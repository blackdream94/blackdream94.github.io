<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>js ajax提交表单内容(和图片文件)</title>
    <url>/javascript/84c09c95/</url>
    <content><![CDATA[<p>使用ajax直接提交表单的数据，在后台会无法获取，因为ajax无法上传文件，需要按下面代码这样写</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="keyword">var</span> formData = <span class="keyword">new</span> FormData($(<span class="string">&quot;#myform&quot;</span>)[<span class="number">0</span>]); <span class="comment">// &quot;#myform&quot; form标签的id值</span></span><br><span class="line"> <span class="number">2</span> </span><br><span class="line"> <span class="number">3</span> $.ajax(&#123;</span><br><span class="line"> <span class="number">4</span>     url: <span class="string">&quot;&#123;:U(GROUP_NAME.&#x27;/Wallet/chongzhi&#x27;)&#125;&quot;</span>, <span class="comment">// 请求地址</span></span><br><span class="line"> <span class="number">5</span>     type: <span class="string">&#x27;POST&#x27;</span>, <span class="comment">// 请求方式</span></span><br><span class="line"> <span class="number">6</span>     data: formData, <span class="comment">// 数据</span></span><br><span class="line"> <span class="number">7</span>     dataType: <span class="string">&#x27;json&#x27;</span>, <span class="comment">// 预期的服务器返回的数据类型</span></span><br><span class="line"> <span class="number">8</span>     contentType: <span class="literal">false</span>, <span class="comment">// 必需，否则报错，告诉jQuery不要去设置Content-Type请求头</span></span><br><span class="line"> <span class="number">9</span>     processData: <span class="literal">false</span>, <span class="comment">// 必需，否则报错，告诉jQuery不要去处理发送的数据</span></span><br><span class="line"><span class="number">10</span>     success: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line"><span class="number">11</span>         <span class="keyword">if</span> (res.status == <span class="number">1</span>) &#123;</span><br><span class="line"><span class="number">12</span>             <span class="built_in">console</span>.log(res.info)</span><br><span class="line"><span class="number">13</span>         &#125;</span><br><span class="line"><span class="number">14</span>         $(<span class="string">&quot;.btn&quot;</span>).attr(<span class="string">&#x27;disabled&#x27;</span>, <span class="literal">false</span>);</span><br><span class="line"><span class="number">15</span>     &#125;,</span><br><span class="line"><span class="number">16</span>     error: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="number">17</span>         alert(<span class="string">&quot;请求失败&quot;</span>);</span><br><span class="line"><span class="number">18</span>         $(<span class="string">&quot;.btn&quot;</span>).attr(<span class="string">&#x27;disabled&#x27;</span>, <span class="literal">false</span>);</span><br><span class="line"><span class="number">19</span>     &#125;</span><br><span class="line"><span class="number">20</span> &#125;)</span><br></pre></td></tr></table></figure>

<p>首先依第一行获取form表单的数据，作为data</p>
<p>注意：</p>
<p>contentType: false,</p>
<p>processData: false</p>
<p>这两行是必须的，否则会报错</p>
]]></content>
      <categories>
        <category>javascript</category>
      </categories>
  </entry>
  <entry>
    <title>JS 向DOM中添加元素内容 - insertAdjacentHTML</title>
    <url>/javascript/ed35deee/</url>
    <content><![CDATA[<p>一直是向dom中追加元素的操作就是,createElement 、appendChild等, 知道发现了更加灵活、方便的 insertAdjacentHTML</p>
<h4 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h4><p>insertAdjacentHTML() 可以将文本解析成 Element 元素，并将结果节点追加到DOM树指定位置，它不会重新解析它正在使用的元素，因此它不会破坏元素内的现有元素。这避免了额外的序列化步骤，使其比直接使用innerHTML操作更快</p>
<h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><p>element.insertAdjacentHTML(position, text);</p>
<p>position是指添加到哪个位置 ，并且必须是以下字符串之一：</p>
<ul>
<li>beforebegin: 元素自身的前面</li>
<li>afterbegin: 插入元素内部的第一个子节点之前</li>
<li>beforeend: 插入元素内部的最后一个子节点之后</li>
<li>afterend: 元素自身的后面</li>
</ul>
<p>text是要被解析为HTML或XML元素，并插入到DOM树中的字符串</p>
<h4 id="示例及效果图"><a href="#示例及效果图" class="headerlink" title="示例及效果图"></a>示例及效果图</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"> 1 <span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"> 2 <span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"> 3 </span><br><span class="line"> 4   <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"> 5     <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"> 6     <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line"> 7     <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"> 8   <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> 9 </span><br><span class="line">10   <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">11     <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">12       <span class="tag">&lt;<span class="name">div</span>&gt;</span>最开始的一句话<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">13     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">14   <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">15 </span><br><span class="line">16   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="number">17</span>     <span class="keyword">var</span> str1 = <span class="string">&#x27;&lt;div&gt;beforebegin - 插入到元素自身的前面&lt;/div&gt;&#x27;</span>;</span></span><br><span class="line"><span class="javascript"><span class="number">18</span>     <span class="keyword">var</span> str2 = <span class="string">&#x27;&lt;div&gt;afterbegin - 插入元素内部的第一个子节点之前&lt;/div&gt;&#x27;</span>;</span></span><br><span class="line"><span class="javascript"><span class="number">19</span>     <span class="keyword">var</span> str3 = <span class="string">&#x27;&lt;div&gt;beforeend - 插入元素内部的最后一个子节点之后&lt;/div&gt;&#x27;</span>;</span></span><br><span class="line"><span class="javascript"><span class="number">20</span>     <span class="keyword">var</span> str4 = <span class="string">&#x27;&lt;div&gt;afterend - 元素自身的后面&lt;/div&gt;&#x27;</span>;</span></span><br><span class="line"><span class="javascript"><span class="number">21</span>     <span class="keyword">var</span> box = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#box&#x27;</span>);</span></span><br><span class="line"><span class="javascript"><span class="number">22</span>     box.insertAdjacentHTML(<span class="string">&#x27;beforebegin&#x27;</span>, str1);</span></span><br><span class="line"><span class="javascript"><span class="number">23</span>     box.insertAdjacentHTML(<span class="string">&#x27;afterbegin&#x27;</span>, str2);</span></span><br><span class="line"><span class="javascript"><span class="number">24</span>     box.insertAdjacentHTML(<span class="string">&#x27;beforeend&#x27;</span>, str3);</span></span><br><span class="line"><span class="javascript"><span class="number">25</span>     box.insertAdjacentHTML(<span class="string">&#x27;afterend&#x27;</span>, str4);</span></span><br><span class="line"><span class="javascript"><span class="number">26</span>   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">27 </span><br><span class="line">28 <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>效果图：</strong></p>
<p><img src="../../images/DOM%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0%E5%86%85%E5%AE%B9_insertAdjacentHTML/2020519-20200816013448847-1056945316.png" alt="img"></p>
]]></content>
      <categories>
        <category>javascript</category>
      </categories>
  </entry>
  <entry>
    <title>ElementUI el-select下拉选择框默认显示</title>
    <url>/javascript/8f45c573/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 &lt;el-select v-model=&quot;goodsDetail.gift_coupons&quot; placeholder=&quot;无&quot; style=&quot;width:300px&quot;&gt;</span><br><span class="line">2     &lt;el-option :label=&quot;item.name&quot; :value=&quot;item.id&quot; v-for=&quot;(item,id) in couponsList&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">3     &lt;/el-option&gt;</span><br><span class="line">4 &lt;/el-select&gt;</span><br></pre></td></tr></table></figure>

<p><strong>方法：</strong></p>
<p>在加载时给 goodsDetail.gift_coupons 默认值，这个默认值为 代码第二行中的 item.id 中的其中一个</p>
<p><strong>注意：</strong></p>
<p>好像给的这个默认值要和 item.id的 类型一样，要注意一下，反正如果 :value 绑定的是数字，若出不来效果，就试试 string 或 number 哪个类型可以</p>
<p><strong>效果：</strong></p>
<p><img src="../../images/ElementUI_el-select%E4%B8%8B%E6%8B%89%E9%80%89%E6%8B%A9%E6%A1%86%E9%BB%98%E8%AE%A4%E6%98%BE%E7%A4%BA/2020519-20201108005401898-1869011592.png" alt="img"></p>
]]></content>
      <categories>
        <category>javascript</category>
      </categories>
  </entry>
  <entry>
    <title>mac docker存储目录不存在_进入Docker虚拟机</title>
    <url>/docker/2cf0f9ea/</url>
    <content><![CDATA[<p>我的电脑是mac m1芯片的，当使用docker 的volume匿名绑定时，发现找不到绑定的默认存储路径，这个路径根本不存在，</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker --version</span></span><br><span class="line">Docker version 20.10.8, build 3967b7d</span><br></pre></td></tr></table></figure>

<p>百度了下，了解到，docker 虚拟机才是我创建容器的真正的宿主机，如何进入虚拟机呢？</p>
<p>找了好多帖子，不知道为什么大多对我的问题都不适用，找了好长时间，终于进到了docker 虚拟机中</p>
<p>首先，先启动Docker，之后终端执行以下命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Mac中进入Docker Linux虚拟机(Docker Desktop 2.4及以上)</span></span><br><span class="line"></span><br><span class="line">stty -echo -icanon &amp;&amp; nc -U ~/Library/Containers/com.docker.docker/Data/debug-shell.sock &amp;&amp; stty sane # ls -al /var/lib/docker/overlay2/</span><br></pre></td></tr></table></figure>

<p>之后，就可以找到挂载位置了，因为已经进入到宿主机 - Docker VM中了</p>
<p>转自：<a href="https://blog.csdn.net/activity110/article/details/119305964">https://blog.csdn.net/activity110/article/details/119305964</a></p>
]]></content>
      <categories>
        <category>docker</category>
      </categories>
  </entry>
  <entry>
    <title>CSS flex弹性盒子布局</title>
    <url>/css/de355132/</url>
    <content><![CDATA[<p><strong>Flex是Flexible Box的缩写，意为“弹性盒子”，用来为盒装模型提供最大的灵活性。任何一个容器都可以指定为Flex布局。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 &lt;style&gt;</span><br><span class="line"> 2   .box1 &#123;</span><br><span class="line"> 3     display: -webkit-flex; /* 在webkit内核的浏览器上使用要加前缀 */</span><br><span class="line"> 4     display: flex; /*将对象作为弹性伸缩盒显示*/</span><br><span class="line"> 5   &#125;</span><br><span class="line"> 6 </span><br><span class="line"> 7   /* 行内元素也可以使用flex布局 */</span><br><span class="line"> 8   .box2 &#123;</span><br><span class="line"> 9     display: inline-flex; /*将对象作为内联块级弹性伸缩盒显示*/</span><br><span class="line">10   &#125;</span><br><span class="line">11 </span><br><span class="line">12   /* 兼容性写法 */</span><br><span class="line">13   .box3 &#123;</span><br><span class="line">14     display: flex || inline-flex;</span><br><span class="line">15   &#125;</span><br><span class="line">16 &lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="一、概念"><a href="#一、概念" class="headerlink" title="一、概念"></a>一、概念</h4><p>采用Flex布局的元素，被称为Flex容器(flex container)，简称“容器”。其所有子元素自动成为容器成员，成为Flex项目(Flex item)，简称“项目”。</p>
<p><img src="../../images/flex/2020519-20200816021748913-874589781.png" alt="img"></p>
<p>容器默认存在两根主轴：水平方向主轴(main axis)和垂直方向交叉轴(cross axis)，默认项目按主轴排列。</p>
<ul>
<li>main start/main end：主轴开始位置/结束位置；</li>
<li>cross start/cross end：交叉轴开始位置/结束位置；</li>
<li>main size/cross size：单个项目占据主轴/交叉轴的空间；</li>
</ul>
<h4 id="二、属性"><a href="#二、属性" class="headerlink" title="二、属性"></a>二、属性</h4><ul>
<li>flex-direction</li>
<li>flex-wrap</li>
<li>flex-flow</li>
<li>justify-content</li>
<li>align-item</li>
<li>align-content</li>
</ul>
<h5 id="1）-flex-direction属性：决定主轴的方向（即项目的排列方向）"><a href="#1）-flex-direction属性：决定主轴的方向（即项目的排列方向）" class="headerlink" title="1） flex-direction属性：决定主轴的方向（即项目的排列方向）"></a>1） flex-direction属性：决定主轴的方向（即项目的排列方向）</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 .box &#123;</span><br><span class="line">2    flex-direction: row | row-reverse | column | column-reverse;</span><br><span class="line">3 &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>row（默认）：主轴水平方向，起点在左端；</li>
<li>row-reverse：主轴水平方向，起点在右端；</li>
<li>column：主轴垂直方向，起点在上边沿；</li>
<li>column-reserve：主轴垂直方向，起点在下边沿。</li>
</ul>
<p><img src="../../images/flex/2020519-20200816022754702-166418566.jpg" alt="img"></p>
<h5 id="2）-flex-wrap属性：定义换行情况"><a href="#2）-flex-wrap属性：定义换行情况" class="headerlink" title="2） flex-wrap属性：定义换行情况"></a>2） flex-wrap属性：定义换行情况</h5><p>默认情况项目都排列在一条轴线上，但有可能一条轴线排不下。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 .box&#123;</span><br><span class="line">2    flex-wrap: nowrap | wrap | wrap-reverse;</span><br><span class="line">3 &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>nowrap（默认）：不换行</li>
</ul>
<p><img src="../../images/flex/2020519-20200816022933845-1860469424.png" alt="img"></p>
<ul>
<li>wrap：换行，第一行在上方</li>
</ul>
<p><img src="../../images/flex/2020519-20200816023018451-2092508271.png" alt="img"></p>
<ul>
<li>wrap-reverse：换行，第一行在下方</li>
</ul>
<p><img src="../../images/flex/2020519-20200816023057607-719963151.png" alt="img"></p>
<h5 id="3）-flex-flow-：-flex-direction-和-flex-wrap-属性的复合属性"><a href="#3）-flex-flow-：-flex-direction-和-flex-wrap-属性的复合属性" class="headerlink" title="3） flex-flow ： flex-direction 和 flex-wrap 属性的复合属性"></a>3） flex-flow ： flex-direction 和 flex-wrap 属性的复合属性</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 .box &#123;</span><br><span class="line">2   flex-flow: &lt;flex-direction&gt; &lt;flex-wrap&gt;;</span><br><span class="line">3 &#125;</span><br></pre></td></tr></table></figure>

<h5 id="4）-justify-content-：-定义了项目在主轴上的对齐方式"><a href="#4）-justify-content-：-定义了项目在主轴上的对齐方式" class="headerlink" title="4） justify-content ： 定义了项目在主轴上的对齐方式"></a>4） justify-content ： 定义了项目在主轴上的对齐方式</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 .box &#123;</span><br><span class="line">2   justify-content: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">3 &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>flex-start（默认值）：左对齐</li>
<li>flex-end：右对齐</li>
<li>center： 居中</li>
<li>space-between：两端对齐，项目之间的间隔都相等</li>
<li>space-around：每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍</li>
</ul>
<p><img src="../../images/flex/2020519-20200816023406139-2123365545.png" alt="img"></p>
<p> <img src="../../images/flex/2020519-20200816023430412-860395005.png" alt="img"></p>
<p> <img src="../../images/flex/2020519-20200816023446191-2061629055.png" alt="img"></p>
<p> <img src="../../images/flex/2020519-20200816023458807-2040866559.png" alt="img"></p>
<p> <img src="../../images/flex/2020519-20200816023513311-704941467.png" alt="img"></p>
<h5 id="5）-align-items-定义项目在交叉轴上如何对齐"><a href="#5）-align-items-定义项目在交叉轴上如何对齐" class="headerlink" title="5） align-items : 定义项目在交叉轴上如何对齐"></a>5） align-items : 定义项目在交叉轴上如何对齐</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 .box &#123;</span><br><span class="line">2   align-items: flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">3 &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>flex-start：交叉轴的起点对齐</li>
<li>flex-end：交叉轴的终点对齐</li>
<li>center：交叉轴的中点对齐</li>
<li>baseline: 项目的第一行文字的基线对齐</li>
<li>stretch（默认值）：如果项目未设置高度或设为auto，将占满整个容器的高度</li>
</ul>
<p>align-items:flex-start</p>
<p><img src="../../images/flex/2020519-20200816023641006-1297965970.png" alt="img"></p>
<p>align-items:flex-end</p>
<p><img src="../../images/flex/2020519-20200816023719643-1582011225.png" alt="img"></p>
<p>align-items:baseline</p>
<p><img src="../../images/flex/2020519-20200816023743875-682252401.png" alt="img"></p>
<p>align-items:center</p>
<p><img src="../../images/flex/2020519-20200816023809360-1641491884.png" alt="img"></p>
<p>align-items:stretch</p>
<p> <img src="../../images/flex/2020519-20200816023830105-1288870121.png" alt="img"></p>
<h5 id="6）-align-content-定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用"><a href="#6）-align-content-定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用" class="headerlink" title="6） align-content : 定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用"></a>6） align-content : 定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用</h5><ul>
<li>flex-start：与交叉轴的起点对齐</li>
<li>flex-end：与交叉轴的终点对齐</li>
<li>center：与交叉轴的中点对齐</li>
<li>space-between：与交叉轴两端对齐，轴线之间的间隔平均分布</li>
<li>space-around：每根轴线两侧的间隔都相等。所以，轴线之间的间隔比轴线与边框的间隔大一倍</li>
<li>stretch（默认值）：轴线占满整个交叉轴</li>
</ul>
<p>align-content:flex-start</p>
<p><img src="../../images/flex/2020519-20200816023932688-1339899875.png" alt="img"></p>
<p>align-content:flex-end</p>
<p><img src="../../images/flex/2020519-20200816023950900-2070074328.png" alt="img"></p>
<p>align-content:center</p>
<p><img src="../../images/flex/2020519-20200816024056094-1779223237.png" alt="img"></p>
<p>align-content:space-between</p>
<p><img src="../../images/flex/2020519-20200816024116325-668215042.png" alt="img"></p>
<p>align-content:space-around</p>
<p><img src="../../images/flex/2020519-20200816024801296-544443069.jpg" alt="img"></p>
<p>align-content:stretch</p>
<p><img src="../../images/flex/2020519-20200816024839742-1184314772.png" alt="img"></p>
<h4 id="三、项目属性"><a href="#三、项目属性" class="headerlink" title="三、项目属性"></a>三、项目属性</h4><p>以下6个属性设置在项目上</p>
<ul>
<li>order</li>
<li>flex-grow</li>
<li>flex-shrink</li>
<li>flex-basis</li>
<li>flex</li>
<li>align-self</li>
</ul>
<h5 id="1）order"><a href="#1）order" class="headerlink" title="1）order"></a>1）order</h5><p>定义项目的排列顺序。数值越小，排列越靠前，默认为0</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 .item &#123;</span><br><span class="line">2   order: &lt;integer&gt;;</span><br><span class="line">3 &#125;</span><br></pre></td></tr></table></figure>

<p><img src="../../images/flex/2020519-20200816024958811-307930944.png" alt="img"></p>
<h5 id="2）-flex-grow"><a href="#2）-flex-grow" class="headerlink" title="2） flex-grow"></a>2） flex-grow</h5><p>定义项目的放大比例，默认为0，即如果存在剩余空间，也不放大</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 .item &#123;</span><br><span class="line">2   flex-grow: &lt;number&gt;; /* default 0 */</span><br><span class="line">3 &#125;</span><br></pre></td></tr></table></figure>

<p><img src="../../images/flex/2020519-20200816025039910-2099868299.png" alt="img"></p>
<p> <img src="../../images/flex/2020519-20200816025055456-853012184.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">如果所有项目的flex-grow属性都为1，则它们将等分</span><br><span class="line">剩余空间（如果有的话）。如果一个项目的flex-grow</span><br><span class="line">属性为2，其他项目都为1，则前者占据的剩余空</span><br><span class="line">间将比其他项多一倍。</span><br></pre></td></tr></table></figure>

<h5 id="3）-flex-shrink"><a href="#3）-flex-shrink" class="headerlink" title="3） flex-shrink"></a>3） flex-shrink</h5><p>定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 .item &#123;</span><br><span class="line">2   flex-shrink: &lt;number&gt;; /* default 1 */</span><br><span class="line">3 &#125;</span><br></pre></td></tr></table></figure>

<p>如果所有项目的flex-shrink属性都为1，当空间不足时，都将等比例缩小。如果一个项目的flex-shrink属性为0，其他项目都为1，则空间不足时，前者不缩小。</p>
<p>负值对该属性无效。</p>
<h5 id="4）-flex-basis"><a href="#4）-flex-basis" class="headerlink" title="4） flex-basis"></a>4） flex-basis</h5><p>定义了在分配多余空间之前，项目占据的主轴空间（main size）。浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为auto，即项目的本来大小</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 .item &#123;</span><br><span class="line">2   flex-basis: &lt;length&gt; | auto; /* default auto */</span><br><span class="line">3 &#125;</span><br></pre></td></tr></table></figure>

<p>它可以设为跟width或height属性一样的值（比如350px），则项目将占据固定空间</p>
<h5 id="5）-flex"><a href="#5）-flex" class="headerlink" title="5）  flex"></a>5）  flex</h5><p>是flex-grow, flex-shrink 和 flex-basis的简写，默认值为0 1 auto。后两个属性可选</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 .item &#123;</span><br><span class="line">2   flex: none | [ &lt;&#x27;flex-grow&#x27;&gt; &lt;&#x27;flex-shrink&#x27;&gt;? || &lt;&#x27;flex-basis&#x27;&gt; ]</span><br><span class="line">3 &#125;</span><br></pre></td></tr></table></figure>

<p>该属性有两个快捷值：auto (1 1 auto) 和 none (0 0 auto)。</p>
<p>建议优先使用这个属性，而不是单独写三个分离的属性，因为浏览器会推算相关值</p>
<h5 id="6）-align-self"><a href="#6）-align-self" class="headerlink" title="6） align-self"></a>6） align-self</h5><p>允许单个项目有与其他项目不一样的对齐方式，可覆盖align-items属性。默认值为auto，表示继承父元素的align-items属性，如果没有父元素，则等同于stretch</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 .item &#123;</span><br><span class="line">2   align-self: auto | flex-start | flex-end | center |</span><br><span class="line">3  baseline | stretch;</span><br><span class="line">4 &#125;</span><br></pre></td></tr></table></figure>

<p><img src="../../images/flex/2020519-20200816025527657-9437559.png" alt="img"></p>
<p>该属性可能取6个值，除了auto，其他都与<br>align-items属性完全一致</p>
]]></content>
      <categories>
        <category>css</category>
      </categories>
  </entry>
  <entry>
    <title>bootstrapTable 复选框选多页勾选</title>
    <url>/javascript/a2804fc5/</url>
    <content><![CDATA[<blockquote>
<p>问题</p>
</blockquote>
<p>bootstrap table的复选框选中后，翻页操作会导致上一页选中的丢失</p>
<blockquote>
<p>解决</p>
</blockquote>
<p>将选中的值先存在一个全局的变量中，然后使用 formatter，示例如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">table.bootstrapTable(&#123;</span><br><span class="line">    <span class="attr">url</span>: $.fn.bootstrapTable.defaults.extend.index_url,</span><br><span class="line">    <span class="attr">sortName</span>: <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">    <span class="attr">showToggle</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">showExport</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">columns</span>: [</span><br><span class="line">        [&#123;</span><br><span class="line">            <span class="attr">field</span>: <span class="string">&#x27;state&#x27;</span>,</span><br><span class="line">            <span class="attr">checkbox</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">formatter</span>: <span class="function"><span class="keyword">function</span> (<span class="params">i, row</span>) </span>&#123;            <span class="comment">// 每次加载 checkbox 时判断当前 row 的 id 是否已经存在全局 Set() 里</span></span><br><span class="line">                <span class="keyword">if</span> ($.inArray(row.id, idArr) != -<span class="number">1</span>) &#123;<span class="comment">// 因为 判断数组里有没有这个 id</span></span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        <span class="attr">checked</span>: <span class="literal">true</span>               <span class="comment">// 存在则选中</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">    ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>bootstrap</tag>
      </tags>
  </entry>
  <entry>
    <title>ES6 将数组第一项移到最后一项</title>
    <url>/javascript/5221cec5/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// es6语法，将数组第一项移到最后一项</span></span><br><span class="line"><span class="keyword">const</span> [first, ...rest] = <span class="built_in">this</span>.linshi;</span><br><span class="line"><span class="built_in">this</span>.linshi = [...rest, first];</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>javascript</category>
      </categories>
  </entry>
  <entry>
    <title>js input type=file按钮修改样式及选择图片后预览_点击图标上传文件</title>
    <url>/javascript/7f71159/</url>
    <content><![CDATA[<p>修改<input type='file'>，并通过<label>标签来实现</p>
<p>将<input type='file'>隐藏掉，然后修改<label>标签中的内容及样式</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"> 1 <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&#x27;multipart/form-data&#x27;</span>&gt;</span></span><br><span class="line"> 2     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wx_box&quot;</span>&gt;</span></span><br><span class="line"> 3         <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&#x27;my_file&#x27;</span> <span class="attr">class</span>=<span class="string">&#x27;inputlabelBox&#x27;</span>&gt;</span></span><br><span class="line"> 4             <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;img&quot;</span> <span class="attr">src</span>=<span class="string">&#x27;/Public/img/upload.png&#x27;</span> <span class="attr">width</span>=<span class="string">&quot;80%&quot;</span>&gt;</span></span><br><span class="line"> 5         <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"> 6         <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myfile&quot;</span> <span class="attr">id</span>=<span class="string">&#x27;my_file&#x27;</span> <span class="attr">style</span>=<span class="string">&quot;display:none;&quot;</span> <span class="attr">accept</span>=<span class="string">&quot;image/*&quot;</span>/&gt;</span></span><br><span class="line"> 7     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> 8 <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"> 9 </span><br><span class="line">10 <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="number">11</span>     $(<span class="string">&quot;#my_file&quot;</span>).change(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="number">12</span>         $(<span class="string">&quot;.img&quot;</span>).attr(<span class="string">&quot;src&quot;</span>, URL.createObjectURL($(<span class="built_in">this</span>)[<span class="number">0</span>].files[<span class="number">0</span>]));</span></span><br><span class="line"><span class="javascript"><span class="number">13</span>     &#125;);</span></span><br><span class="line"><span class="javascript"><span class="number">14</span> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如上所述，我将上传图片的按钮的样式修改为了一个图片，当我选择图片后，改变图片的src值</p>
<p>效果如下：</p>
<p><img src="../../images/input_file%E6%8C%89%E9%92%AE%E6%A0%B7%E5%BC%8F%E4%BF%AE%E6%94%B9/2020519-20210610144841687-705409090.png" alt="img"></p>
]]></content>
      <categories>
        <category>javascript</category>
      </categories>
  </entry>
  <entry>
    <title>json数据中 双引号变为&amp;quot;</title>
    <url>/javascript/ebad6dc4/</url>
    <content><![CDATA[<p>JS</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var yc = ycList.replace(/&amp;quot;/g,&#x27;&quot;&#x27;);</span><br></pre></td></tr></table></figure>

<p>PHP</p>
<p>在传递json数据时 会产生字符被HTML化 如 ：{“key”:”test&quot;“} 中的双引号被转成 ‘&quot;’， {&quot;key&quot;:&quot;test&amp;quot;&quot;},</p>
<p>可以使用htmlspecialchars_decode()函数将其处理回原来的字符串，</p>
<p>htmlspecialchars() 函数是htmlspecialchars_decode()的反函数把预定义的字符转换为 HTML 实体；</p>
<p>转自 </p>
<p><a href="https://blog.csdn.net/qq_38837004/article/details/84993812">php json数据中 双引号变为”解决_南滨月亮的博客-CSDN博客</a></p>
]]></content>
      <categories>
        <category>javascript</category>
      </categories>
  </entry>
  <entry>
    <title>vue/uni-app 父组件异步获取动态数据传递给子组件 获取不到值</title>
    <url>/javascript/142b5746/</url>
    <content><![CDATA[<p><strong>问题：</strong></p>
<p>vue 父组件异步请求获取数据，在请求数据没有返回数据时，子组件就已经加载了，并且它绑定的值也是空的</p>
<p><strong>解决方法（两种）：</strong></p>
<h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><p>让子组件条件渲染，数据渲染完成后才渲染子组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 &lt;!-- 父组件中 条件渲染子组件prizeRoll --&gt;</span><br><span class="line"> 2 &lt;template&gt;</span><br><span class="line"> 3   &lt;view&gt;</span><br><span class="line"> 4     &lt;block v-if=&quot;flag&quot;&gt;</span><br><span class="line"> 5       &lt;prizeRoll :lists=&quot;rankList&quot; :listNum=&quot;5&quot;&gt;&lt;/prizeRoll&gt;</span><br><span class="line"> 6     &lt;/block&gt;</span><br><span class="line"> 7     &lt;view&gt;</span><br><span class="line"> 8 &lt;/template&gt;</span><br><span class="line"> 9 </span><br><span class="line">10 &lt;script&gt;</span><br><span class="line">11 import prizeRoll from &#x27;../../components/prize-info/prize-info.vue&#x27;</span><br><span class="line">12 export default &#123;</span><br><span class="line">13   components: &#123; prizeRoll &#125;,</span><br><span class="line">14   data() &#123;</span><br><span class="line">15     return &#123;</span><br><span class="line">16       rankList: [],</span><br><span class="line">17       flag: flase,</span><br><span class="line">18     &#125;</span><br><span class="line">19   &#125;,</span><br><span class="line">20   methods: &#123;</span><br><span class="line">21     // 异步请求数据</span><br><span class="line">22     ranking() &#123;</span><br><span class="line">23       this.$api(&#x27;gonggao.ranking&#x27;).then((res) =&gt; &#123;</span><br><span class="line">24         this.rankList = res.data</span><br><span class="line">25         // 数据渲染完成后，将flag值改为true</span><br><span class="line">26         this.flag = true</span><br><span class="line">27       &#125;)</span><br><span class="line">28     &#125;,</span><br><span class="line">29   &#125;,</span><br><span class="line">30   onLoad() &#123;</span><br><span class="line">31     this.ranking()</span><br><span class="line">32   &#125;,</span><br><span class="line">33 &#125;</span><br><span class="line">34 &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h4><p>大概逻辑：使用vuex全局状态管理,其实简单，利用vuex的辅助函数（mapState，mapMutations）mapState是将state里面的数据映射到计算中（computed），mapMutations也是类似，把vuex中mutations的方法映射到组件里面，就可以在组件里面直接使用方法了,在vuex中使用异步（actions）去掉用接口，然后在接口成功的函数里面取触发同步（mutations）里面的方法,把得到数据传给mutations里面的方法里并且给state里面的属性赋值，然后就可以在子组件中使用computed计算中去获取数据并且渲染到页面上</p>
<p><strong>vuex / index.js</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 &lt;script&gt;</span><br><span class="line"> 2 import Vue from &#x27;vue&#x27;</span><br><span class="line"> 3 import Vuex from &#x27;vuex&#x27;</span><br><span class="line"> 4 import axios from &#x27;axios&#x27;</span><br><span class="line"> 5 Vue.use(Vuex)</span><br><span class="line"> 6 export default new Vuex.Store(&#123;</span><br><span class="line"> 7     //定义初始数据</span><br><span class="line"> 8     state: &#123;</span><br><span class="line"> 9         title: &#x27;&#x27;,</span><br><span class="line">10         list: [],</span><br><span class="line">11         isShow: false</span><br><span class="line">12     &#125;,</span><br><span class="line">13     //同步的方法</span><br><span class="line">14     mutations: &#123;</span><br><span class="line">15         //向state 里面设置数据</span><br><span class="line">16         changeListMutation(state, list) &#123;</span><br><span class="line">17             state.list = list</span><br><span class="line">18         &#125;,</span><br><span class="line">19         //在list.vue里面点击下拉选项的时候触发 给state.title赋值</span><br><span class="line">20         changeTitleMutation(state, title) &#123;</span><br><span class="line">21             state.title = title</span><br><span class="line">22         &#125;,</span><br><span class="line">23         //selectinput.vue里面点击input的时候触发 给state.isShow赋值</span><br><span class="line">24         toggleShow(state, isShow) &#123;</span><br><span class="line">25             state.isShow = isShow</span><br><span class="line">26         &#125;</span><br><span class="line">27     &#125;,</span><br><span class="line">28     //异步的方法</span><br><span class="line">29     actions: &#123;</span><br><span class="line">30         //在list.vue里面created生命周期里面触发</span><br><span class="line">31         getListAction(&#123; commit &#125;) &#123;</span><br><span class="line">32             axios.get(&#x27;/mock/5afd9dc0c088691e06a6ab45/example/dataList&#x27;)</span><br><span class="line">33                 .then((res) =&gt; &#123;</span><br><span class="line">34                     commit(&#x27;changeListMutation&#x27;, res.data) //调用mutations下面的changeListMutation方法并且传值过去</span><br><span class="line">35                 &#125;)</span><br><span class="line">36                 .catch((error) =&gt; &#123;</span><br><span class="line">37                     console.log(error)</span><br><span class="line">38                 &#125;)</span><br><span class="line">39 </span><br><span class="line">40         &#125;</span><br><span class="line">41     &#125;</span><br><span class="line">42 &#125;)</span><br><span class="line">43 // 触发异步里面的方法是用 this.$store.dispatch(&#x27;这里是方法名&#x27;)</span><br><span class="line">44 // 触发同步里面的方法是用 this.$store.commit(&#x27;这里是方法名&#x27;)</span><br><span class="line">45 &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>父组件 select.vue</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 &lt;template&gt;</span><br><span class="line"> 2   &lt;div class=&quot;select&quot;&gt;</span><br><span class="line"> 3     &lt;div class=&quot;wrap&quot;&gt;</span><br><span class="line"> 4         &lt;selectInput&gt;&lt;/selectInput&gt;</span><br><span class="line"> 5         &lt;list&gt;&lt;/list&gt;</span><br><span class="line"> 6     &lt;/div&gt;</span><br><span class="line"> 7   &lt;/div&gt;</span><br><span class="line"> 8 &lt;/template&gt;</span><br><span class="line"> 9 &lt;script&gt;</span><br><span class="line">10   // 引入子组件 </span><br><span class="line">11   import selectInput from &#x27;@/components/selectInput&#x27;  </span><br><span class="line">12   import list from &#x27;@/components/list&#x27;</span><br><span class="line">13   export default &#123;</span><br><span class="line">14     components:&#123;   //加载子组件</span><br><span class="line">15       selectInput,</span><br><span class="line">16       list</span><br><span class="line">17     &#125;,</span><br><span class="line">18   &#125;</span><br><span class="line">19 &lt;/script&gt;</span><br><span class="line">20 &lt;style&gt;</span><br><span class="line">21   .select&#123;</span><br><span class="line">22     background:#4a56fe;</span><br><span class="line">23     width: 400px;</span><br><span class="line">24     margin: 100px auto 0;</span><br><span class="line">25     padding: 40px;</span><br><span class="line">26     border-radius: 10px;</span><br><span class="line">27   &#125;</span><br><span class="line">28   .wrap&#123;</span><br><span class="line">29     background: #e3e5fe;</span><br><span class="line">30     border-radius: 10px;</span><br><span class="line">31     padding: 40px;</span><br><span class="line">32   &#125;</span><br><span class="line">33   ul&#123;</span><br><span class="line">34     list-style: none;</span><br><span class="line">35   &#125;</span><br><span class="line">36 &lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>子组件 list.vue</p>
<p>该组件就是展示下拉选项，并且调用数据渲染</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 &lt;template&gt;</span><br><span class="line"> 2   &lt;div class=&quot;list&quot;&gt;</span><br><span class="line"> 3     &lt;ul&gt;</span><br><span class="line"> 4       &lt;li v-for=&quot;(item,index) in list&quot; :key=&quot;index&quot; v-show=&quot;initShow&quot; @click=&quot;changeTitle(item.title)&quot;&gt;&#123;&#123;item.title&#125;&#125;&lt;/li&gt;</span><br><span class="line"> 5     &lt;/ul&gt;</span><br><span class="line"> 6   &lt;/div&gt;</span><br><span class="line"> 7 &lt;/template&gt;</span><br><span class="line"> 8 </span><br><span class="line"> 9 &lt;script&gt;</span><br><span class="line">10     import &#123;mapState,mapMutations&#125; from &#x27;vuex&#x27;  // 将vuex中的state数据和mutations中的方法映射到组件中</span><br><span class="line">11     export default &#123;</span><br><span class="line">12         //vue 生命周期（created）在实例创建之后，在数据初始化之前被调用</span><br><span class="line">13         created()&#123;  </span><br><span class="line">14             this.$store.dispatch(&#x27;getListAction&#x27;)  //调用vuex 中的 getListAction异步方法</span><br><span class="line">15         &#125;,</span><br><span class="line">16         //计算state数据</span><br><span class="line">17         computed:&#123;</span><br><span class="line">18             ...mapState(&#123;</span><br><span class="line">19               list:&#x27;list&#x27;,</span><br><span class="line">20               initShow:&#x27;isShow&#x27;</span><br><span class="line">21             &#125;)</span><br><span class="line">22         &#125;,</span><br><span class="line">23         methods:&#123;</span><br><span class="line">24             changeTitle(title)&#123;</span><br><span class="line">25               this.$store.commit(&#x27;changeTitleMutation&#x27;,title)</span><br><span class="line">26               this.$store.commit(&#x27;toggleShow&#x27;,!this.initShow)</span><br><span class="line">27             &#125;</span><br><span class="line">28         &#125;</span><br><span class="line">29     &#125;</span><br><span class="line">30 &lt;/script&gt;</span><br><span class="line">31 // 触发异步里面的方法是用 this.$store.dispatch(&#x27;这里是方法名&#x27;)</span><br><span class="line">32 // 触发同步里面的方法是用 this.$store.commit(&#x27;这里是方法名&#x27;)</span><br><span class="line">33 </span><br><span class="line">34 &lt;style&gt;</span><br><span class="line">35   .list&#123;</span><br><span class="line">36     padding: 10px 0;</span><br><span class="line">37     text-align: center;</span><br><span class="line">38   &#125;</span><br><span class="line">39   li&#123;</span><br><span class="line">40     line-height: 30px;</span><br><span class="line">41     height: 30px;</span><br><span class="line">42     border-radius: 15px;</span><br><span class="line">43     cursor: pointer;</span><br><span class="line">44     color:#535353;</span><br><span class="line">45   &#125;</span><br><span class="line">46   li:hover&#123;</span><br><span class="line">47     background: #ff705b;</span><br><span class="line">48     color: #fff;</span><br><span class="line">49   &#125;</span><br><span class="line">50 &lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>子组件 selectinput.vue</p>
<p>该组件展示选中的数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 &lt;template&gt;</span><br><span class="line"> 2   &lt;div class=&quot;inputBox&quot;&gt;</span><br><span class="line"> 3     &lt;input type=&quot;text&quot; readonly :value=&quot;getTitle&quot; @click=&quot;toggleShow&quot; placeholder=&quot;你喜欢什么&quot;&gt;</span><br><span class="line"> 4   &lt;/div&gt;</span><br><span class="line"> 5 &lt;/template&gt;</span><br><span class="line"> 6 </span><br><span class="line"> 7 &lt;script&gt;</span><br><span class="line"> 8 export default &#123;</span><br><span class="line"> 9   computed:&#123;</span><br><span class="line">10     // 获取vuex中的state数据并赋值绑定到 value上面  computed 里面的方法名其实就是相当于 data里面的数据，可以用this.getTitle 去访问</span><br><span class="line">11     getTitle()&#123; </span><br><span class="line">12       return this.$store.state.title</span><br><span class="line">13     &#125;,</span><br><span class="line">14     // 初始化控制下拉选项显示隐藏的状态，如果isShow是false 则不限是下拉菜单，默认是false</span><br><span class="line">15     initShow()&#123;</span><br><span class="line">16         return this.$store.state.isShow</span><br><span class="line">17     &#125;</span><br><span class="line">18   &#125;,</span><br><span class="line">19   methods:&#123;</span><br><span class="line">20     //点击input的时候调用该方法，这个方法去触发mutations下面的toggleShow，去改变isShow的状态，默认是isShow等于false, 然后在点击的时候去改变isShow 等于true ,  !this.initShow就是true，如果是true的话，下拉选项才能出来,并将改变过后的值传给toggleShow方法，去给vuex/store.js 里面的state.isShow赋值。</span><br><span class="line">21     toggleShow()&#123;</span><br><span class="line">22       this.$store.commit(&#x27;toggleShow&#x27;,!this.initShow)</span><br><span class="line">23     &#125;</span><br><span class="line">24   &#125;</span><br><span class="line">25 &#125;</span><br><span class="line">26 &lt;/script&gt;</span><br><span class="line">27 </span><br><span class="line">28 &lt;style&gt;</span><br><span class="line">29 input&#123;</span><br><span class="line">30   outline: none;</span><br><span class="line">31   width: 100%;</span><br><span class="line">32   height: 40px;</span><br><span class="line">33   line-height: 40px;</span><br><span class="line">34   border-radius: 10px;</span><br><span class="line">35   border: 1px solid #d3d3d3;</span><br><span class="line">36   text-indent: 20px;</span><br><span class="line">37   color: #535353;</span><br><span class="line">38 &#125;</span><br><span class="line">39 &lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>转载自：<a href="https://www.jianshu.com/p/4450b63a27fe">https://www.jianshu.com/p/4450b63a27fe</a></p>
]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>error</tag>
      </tags>
  </entry>
  <entry>
    <title>JS 一图解决所有 宽高与位置 的获取</title>
    <url>/javascript/818b50cc/</url>
    <content><![CDATA[<p><img src="../../images/%E6%89%80%E6%9C%89%E5%AE%BD%E9%AB%98/2020519-20200816015541809-143103147.png" alt="img"></p>
]]></content>
      <categories>
        <category>javascript</category>
      </categories>
  </entry>
  <entry>
    <title>微信JS-SDK wx.chooseImage选择并预览图片，并上传到自己服务器</title>
    <url>/javascript/774c2087/</url>
    <content><![CDATA[<p>转自：<a href="https://zhuanlan.zhihu.com/p/342672565">https://zhuanlan.zhihu.com/p/342672565</a></p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>我想要达成一个选择完图片就可以直接预览的效果，文档中也写明了localId可以作为img的src属性显示图片，</p>
<p>我的操作是，选择完图片之后，直接将 localId 赋给 img的src属性，但是结果不显示</p>
<p>通过搜贴，发现自己忽略了文档中的这一条信息</p>
<p><img src="../../images/wxjs-sdk_wx.chooseImage%E9%80%89%E6%8B%A9%E5%B9%B6%E9%A2%84%E8%A7%88%E5%9B%BE%E7%89%87%E5%B9%B6%E4%B8%8A%E4%BC%A0%E5%88%B0%E8%87%AA%E5%B7%B1%E6%9C%8D%E5%8A%A1%E5%99%A8/2020519-20210115102751259-563109486.png" alt="img"></p>
<p>不显示原因有二</p>
<ol>
<li>版本低于1.2.0，我使用的是1.0.0</li>
<li>用 getLocalImgData 接口获取的数据，苹果可以直接赋值，但是安卓有一个坑，在拼接前需要对localData进行换行符的全局替换</li>
</ol>
<h2 id="wx-chooseImage选择并预览图片，并上传到自己服务器"><a href="#wx-chooseImage选择并预览图片，并上传到自己服务器" class="headerlink" title="wx.chooseImage选择并预览图片，并上传到自己服务器"></a>wx.chooseImage选择并预览图片，并上传到自己服务器</h2><h3 id="注意-引入JS文件"><a href="#注意-引入JS文件" class="headerlink" title="注意 引入JS文件"></a>注意 引入JS文件</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">// 推荐使用1.3.2以上的版本，之前的版本很多坑 </span><br><span class="line">https://res.wx.qq.com/open/js/jweixin-1.3.2.js</span><br><span class="line">// 也可以用npm包</span><br><span class="line">npm install weixin-js-sdk</span><br></pre></td></tr></table></figure>

<h3 id="选择图片"><a href="#选择图片" class="headerlink" title="选择图片"></a>选择图片</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">wx.chooseImage(&#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">1</span>, <span class="comment">// 默认9</span></span><br><span class="line">    <span class="attr">sizeType</span>: [<span class="string">&#x27;original&#x27;</span>, <span class="string">&#x27;compressed&#x27;</span>], <span class="comment">// 可以指定是原图还是压缩图，默认二者都有</span></span><br><span class="line">    <span class="attr">sourceType</span>: [<span class="string">&#x27;album&#x27;</span>, <span class="string">&#x27;camera&#x27;</span>], <span class="comment">// 可以指定来源是相册还是相机，默认二者都有</span></span><br><span class="line">    <span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> localIds = res.localIds; <span class="comment">// array,返回选定照片的本地ID列表，localId可以作为img标签的src属性显示图片</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="处理图片数据为base64"><a href="#处理图片数据为base64" class="headerlink" title="处理图片数据为base64"></a>处理图片数据为base64</h3><p><code>wx.chooseImage</code>获取到的图片为一个临时路径，微信同时提供了<code>wx.getLocalImgData</code>方法可以把获取到的路径转为base64格式的数据，至此就可以轻松许多了，但是转出来的base64在android和iOS中稍有不同，需要特别注意一下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">wx.getLocalImgData(&#123;</span><br><span class="line">          <span class="attr">localId</span>: res.localIds[<span class="number">0</span>], <span class="comment">// 图片的localID</span></span><br><span class="line">          <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> localData = res.localData;</span><br><span class="line">            <span class="keyword">let</span> imageBase64 = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (localData.indexOf(<span class="string">&#x27;data:image&#x27;</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">              <span class="comment">//苹果的直接赋值，默认生成&#x27;data:image/jpeg;base64,&#x27;的头部拼接</span></span><br><span class="line">              imageBase64 = localData;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="comment">//此处是安卓中的唯一得坑！在拼接前需要对localData进行换行符的全局替换</span></span><br><span class="line">              <span class="comment">//此时一个正常的base64图片路径就完美生成赋值到img的src中了</span></span><br><span class="line">              imageBase64 = <span class="string">&#x27;data:image/jpeg;base64,&#x27;</span> + localData.replace(<span class="regexp">/\n/g</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            $(<span class="string">&#x27;#img&#x27;</span>).attr(<span class="string">&#x27;src&#x27;</span>, imageBase64);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="上传图片"><a href="#上传图片" class="headerlink" title="上传图片"></a>上传图片</h3><p>获取到图片的base64数据之后其实我们就可以为所欲为了，不需要使用<code>wx.uploadImage</code>和<code>wx.downloadImage</code>了，不仅需要麻烦的上传到微信服务器，还有三天的时间限制反而增加了成本，最好的方式就是直接上传至我们自己的服务器。</p>
<p>一般与服务端交互的这种文件类型一般采用表单提交–multipart/form-data的方式，这就要求我们熟悉传输form-data的数据交互，所以需要把刚才获取到的base64转为可post的二进制数据，JavaScript提供了原生的<code>atob/btoa</code>用来对base64进行编码和解码；</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dataURLtoBlob</span>(<span class="params">dataurl</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> arr = dataurl.split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> mime = arr[<span class="number">0</span>].match(<span class="regexp">/:(.*?);/</span>)[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">let</span> bstr = atob(arr[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">let</span> n = bstr.length;</span><br><span class="line">    <span class="keyword">let</span> u8arr = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(n);</span><br><span class="line">    <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">      u8arr[n] = bstr.charCodeAt(n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Blob([u8arr], &#123;</span><br><span class="line">      <span class="attr">type</span>: mime</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<p>ok,处理好可交互的数据就可以上传到自己的服务器了，之后相当于普通H5页面的图片交互了,可上传可下载</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> param = <span class="keyword">new</span> FormData();</span><br><span class="line">param.append(<span class="string">&#x27;headPic&#x27;</span>, imageData);</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&quot;http://www.xxx.com/upimg.php&quot;</span>, <span class="comment">// 填写你的url地址</span></span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">  <span class="attr">data</span>: param,</span><br><span class="line">  <span class="attr">dataType</span>: <span class="string">&#x27;JSON&#x27;</span>, <span class="comment">// 服务器响应的数据类型</span></span><br><span class="line">  <span class="attr">processData</span>: <span class="literal">false</span>, <span class="comment">// 因为data值是FormData对象，不需要对数据做处理</span></span><br><span class="line">  <span class="attr">contentType</span>: <span class="literal">false</span>, <span class="comment">// 告诉jQuery不要去设置Content-Type请求头</span></span><br><span class="line">  <span class="attr">cache</span>: <span class="literal">false</span>, <span class="comment">// 上传文件不需要缓存</span></span><br><span class="line">  <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    alert(<span class="string">&#x27;请求成功&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>后台获取到的代码是这样的</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$_FILES</span>) &#123;</span><br><span class="line">    file_put_contents(<span class="string">&#x27;../test.log&#x27;</span>, json_encode(<span class="variable">$_FILES</span>));</span><br><span class="line">    <span class="keyword">echo</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123;&quot;headPic&quot;:&#123;&quot;name&quot;:&quot;blob&quot;,&quot;type&quot;:&quot;image\/jpg&quot;,&quot;tmp_name&quot;:&quot;\/tmp\/phpX8kcxh&quot;,&quot;error&quot;:0,&quot;size&quot;:37937&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>之后就可以在后台完成上传代码的操作的，服务器接收传过来的图片并上传到服务器的操作，请参考 —— <a href="https://www.cnblogs.com/jiuhefree/articles/14239805.html">《PHP CURL的用法及上传图片》</a>，在最下面的一段代码</p>
<h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><p>我这个是直接在官方示例模板中改写的，官方示例下载地址：<a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html#67">https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html#67</a></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">  <span class="number">1</span> <span class="meta">&lt;?php</span></span><br><span class="line">  <span class="number">2</span> <span class="keyword">require_once</span> <span class="string">&quot;jssdk.php&quot;</span>;</span><br><span class="line">  <span class="number">3</span> <span class="variable">$jssdk</span> = <span class="keyword">new</span> JSSDK(<span class="string">&quot;你的appId&quot;</span>, <span class="string">&quot;你的appSecret&quot;</span>);</span><br><span class="line">  <span class="number">4</span> <span class="variable">$signPackage</span> = <span class="variable">$jssdk</span>-&gt;GetSignPackage();</span><br><span class="line">  <span class="number">5</span> <span class="meta">?&gt;</span></span><br><span class="line">  <span class="number">6</span> &lt;!DOCTYPE html&gt;</span><br><span class="line">  <span class="number">7</span> &lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">  <span class="number">8</span> </span><br><span class="line">  <span class="number">9</span> &lt;head&gt;</span><br><span class="line"> <span class="number">10</span>   &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line"> <span class="number">11</span>   &lt;meta content=<span class="string">&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0&quot;</span> name=<span class="string">&quot;viewport&quot;</span>&gt;</span><br><span class="line"> <span class="number">12</span>   &lt;title&gt;&lt;/title&gt;</span><br><span class="line"> <span class="number">13</span> &lt;/head&gt;</span><br><span class="line"> <span class="number">14</span> </span><br><span class="line"> <span class="number">15</span> &lt;body&gt;</span><br><span class="line"> <span class="number">16</span>   &lt;button id=<span class="string">&quot;button2&quot;</span>&gt;拍照或从手机相册中选图接口&lt;/button&gt;&lt;br /&gt;</span><br><span class="line"> <span class="number">17</span>   &lt;button onclick=<span class="string">&quot;updateImg()&quot;</span>&gt;确认上传&lt;/button&gt;&lt;br /&gt;</span><br><span class="line"> <span class="number">18</span>   &lt;img src=<span class="string">&quot;&quot;</span> id=<span class="string">&quot;img&quot;</span> width=<span class="string">&quot;150px&quot;</span> height=<span class="string">&quot;150px&quot;</span>&gt;&lt;br /&gt;</span><br><span class="line"> <span class="number">19</span> &lt;/body&gt;</span><br><span class="line"> <span class="number">20</span> &lt;script src=<span class="string">&quot;https://cdn.bootcss.com/jquery/3.4.1/jquery.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"> <span class="number">21</span> &lt;script src=<span class="string">&quot;https://res.wx.qq.com/open/js/jweixin-1.6.0.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"> <span class="number">22</span> &lt;script&gt;</span><br><span class="line"> <span class="number">23</span>   <span class="comment">/*</span></span><br><span class="line"><span class="comment"> 24    * 注意：</span></span><br><span class="line"><span class="comment"> 25    * 1. 所有的JS接口只能在公众号绑定的域名下调用，公众号开发者需要先登录微信公众平台进入“公众号设置”的“功能设置”里填写“JS接口安全域名”。</span></span><br><span class="line"><span class="comment"> 26    * 2. 如果发现在 Android 不能分享自定义内容，请到官网下载最新的包覆盖安装，Android 自定义分享接口需升级至 6.0.2.58 版本及以上。</span></span><br><span class="line"><span class="comment"> 27    * 3. 常见问题及完整 JS-SDK 文档地址：http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html</span></span><br><span class="line"><span class="comment"> 28    *</span></span><br><span class="line"><span class="comment"> 29    * 开发中遇到问题详见文档“附录5-常见错误及解决办法”解决，如仍未能解决可通过以下渠道反馈：</span></span><br><span class="line"><span class="comment"> 30    * 邮箱地址：weixin-open<span class="doctag">@qq</span>.com</span></span><br><span class="line"><span class="comment"> 31    * 邮件主题：【微信JS-SDK反馈】具体问题</span></span><br><span class="line"><span class="comment"> 32    * 邮件内容说明：用简明的语言描述问题所在，并交代清楚遇到该问题的场景，可附上截屏图片，微信团队会尽快处理你的反馈。</span></span><br><span class="line"><span class="comment"> 33    */</span></span><br><span class="line"> <span class="number">34</span>   wx.config(&#123;</span><br><span class="line"> <span class="number">35</span>     debug: <span class="literal">false</span>, <span class="comment">// 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。</span></span><br><span class="line"> <span class="number">36</span>     appId: <span class="string">&#x27;&lt;?php echo $signPackage[&quot;appId&quot;]; ?&gt;&#x27;</span>, <span class="comment">// 必填</span></span><br><span class="line"> <span class="number">37</span>     timestamp: <span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="variable">$signPackage</span>[<span class="string">&quot;timestamp&quot;</span>]; <span class="meta">?&gt;</span>, <span class="comment">// 必填，生成签名的时间戳</span></span><br><span class="line"> <span class="number">38</span>     nonceStr: <span class="string">&#x27;&lt;?php echo $signPackage[&quot;nonceStr&quot;]; ?&gt;&#x27;</span>, <span class="comment">// 必填，生成签名的随机串</span></span><br><span class="line"> <span class="number">39</span>     signature: <span class="string">&#x27;&lt;?php echo $signPackage[&quot;signature&quot;]; ?&gt;&#x27;</span>, <span class="comment">// 必填，签名</span></span><br><span class="line"> <span class="number">40</span>     jsApiList: [ <span class="comment">// 必填</span></span><br><span class="line"> <span class="number">41</span>       <span class="comment">// 所有要调用的 API 都要加到这个列表中</span></span><br><span class="line"> <span class="number">42</span>       <span class="string">&#x27;onMenuShareAppMessage&#x27;</span>,</span><br><span class="line"> <span class="number">43</span>       <span class="string">&#x27;chooseImage&#x27;</span>,</span><br><span class="line"> <span class="number">44</span>       <span class="string">&#x27;getLocalImgData&#x27;</span></span><br><span class="line"> <span class="number">45</span>     ]</span><br><span class="line"> <span class="number">46</span>   &#125;);</span><br><span class="line"> <span class="number">47</span>   wx.ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="number">48</span>     <span class="comment">// config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。</span></span><br><span class="line"> <span class="number">49</span>     <span class="comment">// 在这里调用 API</span></span><br><span class="line"> <span class="number">50</span>   &#125;);</span><br><span class="line"> <span class="number">51</span> </span><br><span class="line"> <span class="number">52</span>   <span class="keyword">var</span> image_base64 = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"> <span class="number">53</span> </span><br><span class="line"> <span class="number">54</span>   $(<span class="string">&#x27;#button2&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="number">55</span>     <span class="keyword">var</span> images = &#123;</span><br><span class="line"> <span class="number">56</span>       localId: [],</span><br><span class="line"> <span class="number">57</span>       serverId: []</span><br><span class="line"> <span class="number">58</span>     &#125;;</span><br><span class="line"> <span class="number">59</span>     <span class="comment">// 选择图片</span></span><br><span class="line"> <span class="number">60</span>     wx.chooseImage(&#123;</span><br><span class="line"> <span class="number">61</span>       count: <span class="number">1</span>, <span class="comment">// 默认9</span></span><br><span class="line"> <span class="number">62</span>       sizeType: [<span class="string">&#x27;original&#x27;</span>, <span class="string">&#x27;compressed&#x27;</span>], <span class="comment">// 可以指定是原图还是压缩图，默认二者都有</span></span><br><span class="line"> <span class="number">63</span>       sourceType: [<span class="string">&#x27;album&#x27;</span>, <span class="string">&#x27;camera&#x27;</span>], <span class="comment">// 可以指定来源是相册还是相机，默认二者都有</span></span><br><span class="line"> <span class="number">64</span>       success: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line"> <span class="number">65</span>         <span class="comment">// wx.chooseImage获取到的图片为一个临时路径，微信同时提供了wx.getLocalImgData方法可以把获取到的路径转为base64格式的数据，至此就可以轻松许多了，但是转出来的base64在android和iOS中稍有不同</span></span><br><span class="line"> <span class="number">66</span>         wx.getLocalImgData(&#123;</span><br><span class="line"> <span class="number">67</span>           localId: res.localIds[<span class="number">0</span>], <span class="comment">// 图片的localID</span></span><br><span class="line"> <span class="number">68</span>           success: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line"> <span class="number">69</span>             <span class="keyword">const</span> localData = res.localData;</span><br><span class="line"> <span class="number">70</span>             let imageBase64 = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"> <span class="number">71</span>             <span class="keyword">if</span> (localData.indexOf(<span class="string">&#x27;data:image&#x27;</span>) == <span class="number">0</span>) &#123;</span><br><span class="line"> <span class="number">72</span>               <span class="comment">//苹果的直接赋值，默认生成&#x27;data:image/jpeg;base64,&#x27;的头部拼接</span></span><br><span class="line"> <span class="number">73</span>               imageBase64 = localData;</span><br><span class="line"> <span class="number">74</span>             &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> <span class="number">75</span>               <span class="comment">//此处是安卓中的唯一得坑！在拼接前需要对localData进行换行符的全局替换</span></span><br><span class="line"> <span class="number">76</span>               <span class="comment">//此时一个正常的base64图片路径就完美生成赋值到img的src中了</span></span><br><span class="line"> <span class="number">77</span>               imageBase64 = <span class="string">&#x27;data:image/jpeg;base64,&#x27;</span> + localData.replace(/\n/g, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"> <span class="number">78</span>             &#125;</span><br><span class="line"> <span class="number">79</span>             image_base64 = imageBase64;</span><br><span class="line"> <span class="number">80</span>             $(<span class="string">&#x27;#img&#x27;</span>).attr(<span class="string">&#x27;src&#x27;</span>, imageBase64);</span><br><span class="line"> <span class="number">81</span>           &#125;</span><br><span class="line"> <span class="number">82</span>         &#125;);</span><br><span class="line"> <span class="number">83</span>       &#125;</span><br><span class="line"> <span class="number">84</span>     &#125;);</span><br><span class="line"> <span class="number">85</span>   &#125;);</span><br><span class="line"> <span class="number">86</span> </span><br><span class="line"> <span class="number">87</span>   <span class="comment">/**</span></span><br><span class="line"><span class="comment"> 88    * 点击上传图片按钮</span></span><br><span class="line"><span class="comment"> 89    */</span></span><br><span class="line"> <span class="number">90</span>   <span class="function"><span class="keyword">function</span> <span class="title">updateImg</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="number">91</span>     <span class="keyword">if</span> (image_base64 == <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line"> <span class="number">92</span>       alert(<span class="string">&#x27;请先选择图片&#x27;</span>);</span><br><span class="line"> <span class="number">93</span>       <span class="keyword">return</span>;</span><br><span class="line"> <span class="number">94</span>     &#125;</span><br><span class="line"> <span class="number">95</span>     handleAvatar(dataURLtoBlob(image_base64));</span><br><span class="line"> <span class="number">96</span>   &#125;</span><br><span class="line"> <span class="number">97</span> </span><br><span class="line"> <span class="number">98</span>   <span class="comment">/**</span></span><br><span class="line"><span class="comment"> 99    * ajax上传图片</span></span><br><span class="line"><span class="comment">100    */</span></span><br><span class="line"><span class="number">101</span>   <span class="function"><span class="keyword">function</span> <span class="title">handleAvatar</span>(<span class="params">imageData</span>) </span>&#123;</span><br><span class="line"><span class="number">102</span>     <span class="keyword">var</span> param = <span class="keyword">new</span> FormData();</span><br><span class="line"><span class="number">103</span>     param.append(<span class="string">&#x27;headPic&#x27;</span>, imageData);</span><br><span class="line"><span class="number">104</span>     $.ajax(&#123;</span><br><span class="line"><span class="number">105</span>       url: <span class="string">&quot;http://www.xxx.com/upimg.php&quot;</span>, <span class="comment">// 填写你的url地址</span></span><br><span class="line"><span class="number">106</span>       type: <span class="string">&quot;post&quot;</span>,</span><br><span class="line"><span class="number">107</span>       data: param,</span><br><span class="line"><span class="number">108</span>       dataType: <span class="string">&#x27;JSON&#x27;</span>, <span class="comment">// 服务器响应的数据类型</span></span><br><span class="line"><span class="number">109</span>       processData: <span class="literal">false</span>, <span class="comment">// 因为data值是FormData对象，不需要对数据做处理</span></span><br><span class="line"><span class="number">110</span>       contentType: <span class="literal">false</span>, <span class="comment">// 告诉jQuery不要去设置Content-Type请求头</span></span><br><span class="line"><span class="number">111</span>       cache: <span class="literal">false</span>, <span class="comment">// 上传文件不需要缓存</span></span><br><span class="line"><span class="number">112</span>       success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line"><span class="number">113</span>         <span class="comment">// ...</span></span><br><span class="line"><span class="number">114</span>         alert(<span class="string">&#x27;请求成功&#x27;</span>);</span><br><span class="line"><span class="number">115</span>       &#125;</span><br><span class="line"><span class="number">116</span>     &#125;);</span><br><span class="line"><span class="number">117</span>   &#125;;</span><br><span class="line"><span class="number">118</span> </span><br><span class="line"><span class="number">119</span>   <span class="comment">/**</span></span><br><span class="line"><span class="comment">120    * base64转为可post的二进制数据</span></span><br><span class="line"><span class="comment">121    */</span></span><br><span class="line"><span class="number">122</span>   <span class="function"><span class="keyword">function</span> <span class="title">dataURLtoBlob</span>(<span class="params">dataurl</span>) </span>&#123;</span><br><span class="line"><span class="number">123</span>     let arr = dataurl.split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line"><span class="number">124</span>     let mime = arr[<span class="number">0</span>].<span class="keyword">match</span>(/:(.*?);/)[<span class="number">1</span>];</span><br><span class="line"><span class="number">125</span>     let bstr = atob(arr[<span class="number">1</span>]);</span><br><span class="line"><span class="number">126</span>     let n = bstr.length;</span><br><span class="line"><span class="number">127</span>     let u8arr = <span class="keyword">new</span> Uint8Array(n);</span><br><span class="line"><span class="number">128</span>     <span class="keyword">while</span> (n--) &#123;</span><br><span class="line"><span class="number">129</span>       u8arr[n] = bstr.charCodeAt(n);</span><br><span class="line"><span class="number">130</span>     &#125;</span><br><span class="line"><span class="number">131</span>     <span class="keyword">return</span> <span class="keyword">new</span> Blob([u8arr], &#123;</span><br><span class="line"><span class="number">132</span>       type: mime</span><br><span class="line"><span class="number">133</span>     &#125;);</span><br><span class="line"><span class="number">134</span>   &#125;;</span><br><span class="line"><span class="number">135</span> &lt;/script&gt;</span><br><span class="line"><span class="number">136</span> </span><br><span class="line"><span class="number">137</span> &lt;/html&gt;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>javascript</category>
      </categories>
  </entry>
  <entry>
    <title>PHP 封装Memcached类</title>
    <url>/memcached/1ddd81de/</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用php提供检查扩展是否存在的函数来进行判断，调用对应的扩展来使用api</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mem</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$handle</span> = <span class="literal">null</span>; <span class="comment">// 连接实例</span></span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$so</span> = <span class="literal">true</span>; <span class="comment">// 检查扩展是否存在</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化链接</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $hosts 链接配置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $preFix 前缀</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="keyword">array</span> <span class="variable">$hosts</span>, <span class="keyword">string</span> <span class="variable">$preFix</span> = <span class="string">&#x27;&#x27;</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 检查给定的类是否存在</span></span><br><span class="line">        <span class="keyword">$this</span>-&gt;so = extension_loaded(<span class="string">&#x27;Memcached&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;so) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;handle = <span class="keyword">new</span> Memcached();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;handle = <span class="keyword">new</span> Memcache();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//配置</span></span><br><span class="line">        <span class="variable">$c</span> = <span class="keyword">$this</span>-&gt;so ? <span class="string">&#x27;\\Memcached&#x27;</span> : <span class="string">&#x27;\\Memcache&#x27;</span>;</span><br><span class="line">        <span class="comment">// 1. 一致性hash算法</span></span><br><span class="line">        <span class="variable">$params</span> = [</span><br><span class="line">            <span class="variable">$c</span>::OPT_DISTRIBUTION =&gt; <span class="variable">$c</span>::DISTRIBUTION_CONSISTENT,</span><br><span class="line">            <span class="variable">$c</span>::OPT_LIBKETAMA_COMPATIBLE =&gt; <span class="literal">true</span>,</span><br><span class="line">            <span class="variable">$c</span>::OPT_REMOVE_FAILED_SERVERS =&gt; <span class="literal">true</span></span><br><span class="line">        ];</span><br><span class="line">        <span class="comment">// 2. 前缀</span></span><br><span class="line">        <span class="variable">$preFix</span> &amp;&amp; <span class="variable">$params</span>[<span class="variable">$c</span>::OPT_PREFIX_KEY] = <span class="variable">$preFix</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;handle-&gt;setOptions(<span class="variable">$params</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 连接memcached服务</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$hosts</span> <span class="keyword">as</span> <span class="variable">$item</span>) &#123;</span><br><span class="line">            [<span class="variable">$host</span>, <span class="variable">$port</span>] = <span class="variable">$item</span>;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;handle-&gt;addServer(<span class="variable">$host</span>, <span class="variable">$port</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;handle-&gt;get(<span class="variable">$key</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加与设置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$key</span>, <span class="variable">$value</span>, <span class="keyword">int</span> <span class="variable">$expire</span> = <span class="number">3600</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;so) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;handle-&gt;set(<span class="variable">$key</span>, <span class="variable">$value</span>, <span class="variable">$expire</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;handle-&gt;set(<span class="variable">$key</span>, <span class="variable">$value</span>, MEMCACHE_COMPRESSED, <span class="variable">$expire</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">del</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;handle-&gt;delete(<span class="variable">$key</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自增操作</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> mixed</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">incr</span>(<span class="params"><span class="variable">$key</span>, <span class="variable">$value</span> = <span class="number">1</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable">$key</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;handle-&gt;increment(<span class="variable">$key</span>, <span class="variable">$value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自减操作</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> mixed</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">decr</span>(<span class="params"><span class="variable">$key</span>, <span class="variable">$value</span> = <span class="number">1</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable">$key</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;handle-&gt;decrement(<span class="variable">$key</span>, <span class="variable">$value</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 全部删除</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">flush</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;handle-&gt;flush();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 单个/集群设置</span></span><br><span class="line"><span class="variable">$hosts</span> = [</span><br><span class="line">    [<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">11211</span>],</span><br><span class="line">    [<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">11212</span>],</span><br><span class="line">    [<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">11213</span>],</span><br><span class="line">    [<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">11214</span>]</span><br><span class="line">];</span><br><span class="line"><span class="variable">$mem</span> = <span class="keyword">new</span> Mem(<span class="variable">$hosts</span>);</span><br><span class="line"><span class="comment">// 操作</span></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">1</span>; <span class="variable">$i</span> &lt;= <span class="number">12</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="variable">$mem</span>-&gt;set(<span class="string">&#x27;key_&#x27;</span> . <span class="variable">$i</span>, <span class="string">&#x27;value_&#x27;</span> . <span class="variable">$i</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// $mem-&gt;flush();</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>memcached</category>
      </categories>
  </entry>
  <entry>
    <title>PHP 将session写入到memcached</title>
    <url>/memcached/1b6ff6a7/</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MemcacheSession</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// memcache对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$handler</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// 过期时间 秒</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$lifetime</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// 当前时间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$time</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// session名前缀</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">const</span> NS = <span class="string">&#x27;session_&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 初始化</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"><span class="variable">$handler</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$handler</span> = <span class="variable">$handler</span>;</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$lifetime</span> = <span class="number">1440</span>;</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$time</span> = time();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 外部调用初始化</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">start</span>(<span class="params">Memcached <span class="variable">$memcached</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::init(<span class="variable">$memcached</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自定义session存储介质</span></span><br><span class="line">        session_set_save_handler(</span><br><span class="line">            <span class="keyword">array</span>(<span class="keyword">__CLASS__</span>, <span class="string">&#x27;open&#x27;</span>),</span><br><span class="line">            <span class="keyword">array</span>(<span class="keyword">__CLASS__</span>, <span class="string">&#x27;close&#x27;</span>),</span><br><span class="line">            <span class="keyword">array</span>(<span class="keyword">__CLASS__</span>, <span class="string">&#x27;read&#x27;</span>),</span><br><span class="line">            <span class="keyword">array</span>(<span class="keyword">__CLASS__</span>, <span class="string">&#x27;write&#x27;</span>),</span><br><span class="line">            <span class="keyword">array</span>(<span class="keyword">__CLASS__</span>, <span class="string">&#x27;destroy&#x27;</span>),</span><br><span class="line">            <span class="keyword">array</span>(<span class="keyword">__CLASS__</span>, <span class="string">&#x27;gc&#x27;</span>)</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">if</span> (!headers_sent() &amp;&amp; session_id() == <span class="string">&#x27;&#x27;</span>) session_start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">open</span>(<span class="params"><span class="variable">$path</span>, <span class="variable">$name</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">close</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">read</span>(<span class="params"><span class="variable">$PHPSESSID</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$out</span> = <span class="built_in">self</span>::<span class="variable">$handler</span>-&gt;get(<span class="built_in">self</span>::session_key(<span class="variable">$PHPSESSID</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$out</span> === <span class="literal">false</span> || <span class="variable">$out</span> == <span class="literal">null</span>) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$out</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">write</span>(<span class="params"><span class="variable">$PHPSESSID</span>, <span class="variable">$data</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$handler</span>-&gt;set(<span class="built_in">self</span>::session_key(<span class="variable">$PHPSESSID</span>), <span class="variable">$data</span>, <span class="built_in">self</span>::<span class="variable">$lifetime</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">destroy</span>(<span class="params"><span class="variable">$PHPSESSID</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$handler</span>-&gt;delete(<span class="built_in">self</span>::session_key(<span class="variable">$PHPSESSID</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">gc</span>(<span class="params"><span class="variable">$lifetime</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">session_key</span>(<span class="params"><span class="variable">$PHPSESSID</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$session_key</span> = <span class="built_in">self</span>::NS . <span class="variable">$PHPSESSID</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$session_key</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$memcached</span> = <span class="keyword">new</span> Memcached();</span><br><span class="line"><span class="variable">$memcached</span>-&gt;addServer(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">11211</span>);</span><br><span class="line">MemcacheSession::start(<span class="variable">$memcached</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写</span></span><br><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&#x27;aaa&#x27;</span>] = <span class="string">&#x27;你好世界&#x27;</span>;</span><br><span class="line"><span class="comment">// 读</span></span><br><span class="line">var_dump(<span class="variable">$_SESSION</span>);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>memcached</category>
      </categories>
  </entry>
  <entry>
    <title>mac 终端配置策略_终端美化_iterm2+oh-my-zsh+powerlevel9k</title>
    <url>/mac/2cf0f9ea/</url>
    <content><![CDATA[<p>首先我的是m1芯片的，iterm2和oh-my-zsh不做过多的介绍，还请自行百度，此篇主要是快速配置终端。这是配置之后的效果图</p>
<p><img src="../../images/%E7%BB%88%E7%AB%AF%E7%BE%8E%E5%8C%96/2020519-20210919053801283-66990963-20211017033554615.png" alt="img"></p>
<h2 id="iterm2"><a href="#iterm2" class="headerlink" title="iterm2"></a>iterm2</h2><p><code>Mac OS</code>自带的终端，用起来虽然有些不太方便，界面也不够友好,<code>iTerm2</code>是一款相对比较好用的终端工具.<code>iTerm2</code>常用操作包括主题选择、声明高亮、自动填充建议、隐藏用户名和主机名、分屏效果等</p>
<blockquote>
<h3 id="使用homebrew安装"><a href="#使用homebrew安装" class="headerlink" title="使用homebrew安装"></a>使用homebrew安装</h3></blockquote>
<p>执行命令安装</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">brew install iterm2</span><br></pre></td></tr></table></figure>

<p>之后就可以 command + 空格，输入iterm，就可以进入iterm了</p>
<blockquote>
<h3 id="修改-Report-Terminal-Type，以支持绚丽的配色"><a href="#修改-Report-Terminal-Type，以支持绚丽的配色" class="headerlink" title="修改 Report Terminal Type，以支持绚丽的配色"></a>修改 Report Terminal Type，以支持绚丽的配色</h3></blockquote>
<p>在iterm2界面，顶部操作栏中，修改 <code>Report Terminal Type</code>为 <code>xterm-256color：</code></p>
<p>iTerm2 &gt; Preferences &gt; Profiles &gt; Terminal &gt; Report Terminal Type，设为<code>xterm-256color</code></p>
<p><img src="../../images/%E7%BB%88%E7%AB%AF%E7%BE%8E%E5%8C%96/2020519-20210919054925880-1389458847.png" alt="img"></p>
<blockquote>
<h3 id="修改iterm2的配色方案"><a href="#修改iterm2的配色方案" class="headerlink" title="修改iterm2的配色方案"></a>修改iterm2的配色方案</h3></blockquote>
<p>设定路径：iTerm2 &gt; Preferences &gt; Profiles &gt; Colors &gt; Color Presets…</p>
<p><img src="../../images/%E7%BB%88%E7%AB%AF%E7%BE%8E%E5%8C%96/2020519-20210919055202090-341723511.png" alt="img"></p>
<p>这里面没有我们想要的，让我们去git上克隆iterm2 color scheme到本地，然后import到iterm2</p>
<p><a href="https://github.com/mbadolato/iTerm2-Color-Schemes">https://github.com/mbadolato/iTerm2-Color-Schemes</a></p>
<p><img src="../../images/%E7%BB%88%E7%AB%AF%E7%BE%8E%E5%8C%96/2020519-20210919055642474-34510375.png" alt="img"></p>
<p>在schemes目录下有很多，这里我选的是 <code>Tomorrow Night Eighties</code></p>
<p><img src="../../images/%E7%BB%88%E7%AB%AF%E7%BE%8E%E5%8C%96/2020519-20210919060002022-2123759413.png" alt="img"></p>
<blockquote>
<h3 id="4、安装-powerline-font"><a href="#4、安装-powerline-font" class="headerlink" title="4、安装 powerline font"></a>4、安装 powerline font</h3></blockquote>
<p>由于我们要使用的 theme 会用到很多特殊的 icon，所以 iTerm2 选用的字体必须为支持这些特殊 icon 的字体。这类型的字体统称为 powerline font（另外还有加强版支持更多特殊 icon 的为 nerd font）</p>
<p>若沒有安装 powerline font 的话，遇到字体所不支持的 icon 时会像这样：</p>
<p><img src="../../images/%E7%BB%88%E7%AB%AF%E7%BE%8E%E5%8C%96/2020519-20210919060230287-1073894388.png" alt="img"></p>
<p>支持 powerline 的字体很多，这里选用的是 font-sauce-code-pro-nerd-font，使用homebrew安装</p>
<p>这里的命令不知道对你的电脑不适用，若有问题，请百度解决</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">brew tap homebrew/cask-fonts</span><br><span class="line"></span><br><span class="line">brew install --cask font-sauce-code-pro-nerd-font</span><br></pre></td></tr></table></figure>

<p>如果要是找其他字体：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">brew search nerd</span><br></pre></td></tr></table></figure>

<p>安装完成后，就修改iterm2使用的字体</p>
<p>Iterm2 &gt; Preferences &gt; Profiles &gt; Text &gt; Change Font，将其改为 SauceCodePro Nerd Font</p>
<p><img src="../../images/%E7%BB%88%E7%AB%AF%E7%BE%8E%E5%8C%96/2020519-20210919061055559-889854002.png" alt="img"></p>
<p><strong>可能出现的问题</strong></p>
<p>若在切换字体后，发生 iTerm2 无法正常运作，有可能是遇到同一字体有重复版本的问题，请按一下步骤进行修改：<br>打开 Font Book.app -&gt; 选择刚安装的字体 -&gt; 选择自动解决版本问题</p>
<h2 id="oh-my-zsh"><a href="#oh-my-zsh" class="headerlink" title="oh-my-zsh"></a>oh-my-zsh</h2><p>mac默认shell使用的是bash。zsh也是一种shell，功能更强大而且基本兼容前者</p>
<p>oh-my-zsh则是zsh一个非常出色的开源的插件包，让Zsh原本繁琐的配置过程变得简便</p>
<p>mac下自带zsh，但不是最新。查看zsh版本：<code>zsh --version</code></p>
<blockquote>
<h3 id="可以通过brew安装最新版"><a href="#可以通过brew安装最新版" class="headerlink" title="可以通过brew安装最新版"></a>可以通过brew安装最新版</h3></blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">brew install zsh</span><br></pre></td></tr></table></figure>

<p>zsh的配置文件为 ~/.zshrc，没有就手动创建 </p>
<blockquote>
<h3 id="设定默认shell为zsh"><a href="#设定默认shell为zsh" class="headerlink" title="设定默认shell为zsh"></a>设定默认shell为zsh</h3></blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 查看支持的 shell</span><br><span class="line">cat /etc/shells</span><br><span class="line"># 若没有 zsh，则安装</span><br><span class="line">brew install zsh</span><br><span class="line"># 将 zsh 设定为默认的 shell</span><br><span class="line">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="安装oh-my-zsh"><a href="#安装oh-my-zsh" class="headerlink" title="安装oh-my-zsh"></a>安装oh-my-zsh</h3></blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;</span><br></pre></td></tr></table></figure>

<p>安装完成后会发现多了文件夹 ~/.oh-my-zsh</p>
<h2 id="安装powerlevel9k主题"><a href="#安装powerlevel9k主题" class="headerlink" title="安装powerlevel9k主题"></a>安装powerlevel9k主题</h2><p><code>oh-my-zsh</code> 内建很多 <code>theme，默认为“robbyrussell”</code>，在它的 github wiki 上有很多截图可以参考：</p>
<p><a href="https://links.jianshu.com/go?to=https://github.com/robbyrussell/oh-my-zsh/wiki/themes">https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Frobbyrussell%2Foh-my-zsh%2Fwiki%2Fthemes</a></p>
<p>切换内建的 theme 很简单，直接修改你的 <code>~/.zshrc</code>，把原本 <code>ZSH_THEME=”robbyrussell”</code> 改成你想要的：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 編輯 ~/.zshrc</span><br><span class="line">ZSH_THEME=”agnoster” # 試試看把 robbyrussell 改成 agnoster</span><br></pre></td></tr></table></figure>

<p>修改完成之后，记得刷新配置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure>

<p>powerlevel9k主题则是来自powerlevel9k 的 github</p>
<p><a href="https://github.com/Powerlevel9k/powerlevel9k">https://github.com/Powerlevel9k/powerlevel9k</a></p>
<p><code>powerlevel9k</code> 不只是像上面的示范图显示一些基本的资讯，还可以，比如像下图那样，显示 WiFi 信号强度、笔记本剩余电量、CPU loading、system free memory 等等信息在 command line</p>
<p><img src="../../images/%E7%BB%88%E7%AB%AF%E7%BE%8E%E5%8C%96/2020519-20210919063857119-1333490689.png" alt="img"></p>
<blockquote>
<p>克隆powerlevel9k到~/.oh-my-zsh/custom/themes/</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/bhilburn/powerlevel9k.git ~/.oh-my-zsh/custom/themes/powerlevel9k</span><br></pre></td></tr></table></figure>

<blockquote>
<p>编辑<code>~/.zshrc</code> ，把 <code>ZSH_THEME</code> 设为 <code>powerlevel9k</code></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># nerd-font active</span><br><span class="line">POWERLEVEL9K_MODE=&#x27;nerdfont-complete&#x27;</span><br><span class="line">ZSH_THEME=&quot;powerlevel9k/powerlevel9k&quot;</span><br></pre></td></tr></table></figure>

<p>注意：必须在<code>ZSH_THEME</code>前增加 <code>POWERLEVEL9K_MODE</code>，否则可能会出现部分 icon 无法显示。</p>
<blockquote>
<p>调整 command line 的提示符以及显示样式</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 提示符修改</span><br><span class="line"># command line 左侧要显示的信息</span><br><span class="line">POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(dir dir_writable rbenv vcs)</span><br><span class="line"># command line 右侧要显示的信息</span><br><span class="line">POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status root_indicator background_jobs ram load history time)</span><br><span class="line"># 提示符分两行显示</span><br><span class="line">POWERLEVEL9K_PROMPT_ON_NEWLINE=true</span><br><span class="line"># 在提示符与要输入的指令之间增加空格</span><br><span class="line">POWERLEVEL9K_MULTILINE_FIRST_PROMPT_PREFIX=&quot;%f&quot;</span><br><span class="line"># 当前用户为 root 时，提示符为&quot;#&quot;，否则为&quot;$&quot;</span><br><span class="line">local user_symbol=&quot;$&quot;</span><br><span class="line">if [[ $(print -P &quot;%#&quot;) =~ &quot;#&quot; ]]; then</span><br><span class="line">    user_symbol = &quot;#&quot;</span><br><span class="line">fi</span><br><span class="line">POWERLEVEL9K_MULTILINE_LAST_PROMPT_PREFIX=&quot;%&#123;%B%F&#123;black&#125;%K&#123;yellow&#125;%&#125; $user_symbol%&#123;%b%f%k%F&#123;yellow&#125;%&#125; %&#123;%f%&#125;&quot;</span><br><span class="line"># 没执行完一条指令在最后增加一空行</span><br><span class="line">POWERLEVEL9K_PROMPT_ADD_NEWLINE=true</span><br></pre></td></tr></table></figure>

<p>完成～</p>
<p>转自</p>
<p><a href="https://www.jianshu.com/p/f7a2e3f08aff?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation">https://www.jianshu.com/p/f7a2e3f08aff?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation</a></p>
]]></content>
      <categories>
        <category>mac</category>
      </categories>
  </entry>
  <entry>
    <title>PHP 使用memcache/memcached实现session共享</title>
    <url>/memcached/5cacee34/</url>
    <content><![CDATA[<p>参考自：</p>
<p><a href="https://blog.csdn.net/jiandanokok/article/details/102768573?ivk_sa=1024320u">【Memcached】使用Memcache实现共享Session【原创】_一直加班的程序猿-CSDN博客_memcached做session共享</a></p>
<p><a href="https://blog.csdn.net/yanlintao1/article/details/38593117">将session的值存储到memcached中去，配置以及方法和注意事项_yanlintao1的专栏-CSDN博客</a></p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>这种session共享是为了解决集群中session丢失问题的其中一种方法</p>
<h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>用户登录态是保存在Session中，默认是保存在文件中的，且没有做共享Session，导致在某一台登录成功之后，写入到Session文件中，然后刷新页面就有可能请求到另一台服务器上，而另一台服务器中的Session文件是没有该登录态的，就会导致服务器认为用户没有登录需要重新登录</p>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>一般业界通用的 有两种：</p>
<ul>
<li>使用 IP_HASH 做会话保持（Session保持）：每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，达到了Session保持的方法。</li>
<li>使用 Redis/Memcache等Nosql来做会话共享（Session共享）：把Session放在一个统一的地方，集群中的所有节点都在这个地方进行Session的存取</li>
</ul>
<p>Session保持（会话保持）是我们见到最多的名词之一，通过会话保持，负载均衡进行请求分发的时候保证每个客户端固定的访问到后端的同一台应用服务器。会话保持方案在所有的负载均衡都有对应的实现。而且这是在负载均衡这一层就可以解决Session问题。</p>
<p>会话保持看似解决了Session同步的问题，但是却带来的一些其它方面的问题：</p>
<p>负载不均衡了：由于使用了Session保持，很显然就无法保证负载绝对的均衡。<br>没有彻底解决问题：如果后端有服务器宕机，那么这台服务器的Session丢失，被分配到这台服务请求的用户还是需要重新登录。</p>
<p>所以一般呢，更加推荐使用 Redis/Memcache等Nosql来做会话共享（Session共享）</p>
<h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><p>\1. 安装服务器端Memcached</p>
<p>\2. web服务器端安装php的memcache/memcached扩展</p>
<h2 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h2><p>实现Session共享，其实就是把Session的存储，从默认的文件存储改成使用Memcache来存储即可，一共三种方法，推荐第一种</p>
<h3 id="第一种方法：直接在php-ini配置文件修改（推荐）"><a href="#第一种方法：直接在php-ini配置文件修改（推荐）" class="headerlink" title="第一种方法：直接在php.ini配置文件修改（推荐）"></a>第一种方法：直接在php.ini配置文件修改（推荐）</h3><p>   第一步：开启memcache扩展，并运行memcache。</p>
<p>   第二步：将php.ini配置文件中的session.save_handler=memcache</p>
<p>   第三步：将php.ini配置文件中的session.save_path=”tcp://127.0.0.1:11211”</p>
<p>　 第四步：重启php服务</p>
<p>注意：如果客户端使用的是php的memcached扩展而不是memcache，那么 session.save_path的值要把 “tcp://“ 去掉，变为如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 session.save_handler=memcached</span><br><span class="line">2 session.save_path=&quot;127.0.0.1:11211&quot;</span><br></pre></td></tr></table></figure>

<p>之后，查看phpinfo()中配置是否生效，另外一台web服务器上也做相同的操作，如此便可实现session的共享</p>
<p><img src="../../images/%E5%AE%9E%E7%8E%B0session%E5%85%B1%E4%BA%AB/2020519-20210621162323744-742740903.png" alt="img"></p>
<p>注意：如果修改后发现phpinfo页面还是指向默认的文件缓存地址/tmp，说明还有其他的Session配置，在Linux中php-fpm的配置文件：/etc/php-fpm.conf或者/etc/php-fpm.d/*.conf中，而且它们的优先级比php.ini高，会覆盖php.ini中的配置，所以也需要在这里面修改：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 # memcache扩展，如果有多个memcached服务端的话，用逗号,隔开</span><br><span class="line">2 php_value[session.save_handler] = memcache  </span><br><span class="line">3 php_value[session.save_path] = &quot;tcp://127.0.0.1:11211&quot;  </span><br><span class="line">4  </span><br><span class="line">5 # memcached扩展，如果有多个memcached服务端的话，用逗号,隔开</span><br><span class="line">6 php_value[session.save_handler] = memcached</span><br><span class="line">7 php_value[session.save_path] = &quot;127.0.0.1:11211&quot; </span><br></pre></td></tr></table></figure>

<h3 id="第二种方法：设置-htaccess"><a href="#第二种方法：设置-htaccess" class="headerlink" title="第二种方法：设置.htaccess"></a>第二种方法：设置.htaccess</h3><p>在某个目录下，修改.htaccess：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># memcache扩展，如果有多个memcached服务端的话，用逗号,隔开</span><br><span class="line">php_value session.save_handler &quot;memcache&quot;  </span><br><span class="line">php_value session.save_path  &quot;tcp://127.0.0.1:11211&quot;  </span><br><span class="line"> </span><br><span class="line"># memcached扩展，如果有多个memcached服务端的话，用逗号,隔开</span><br><span class="line">php_value session.save_handler &quot;memcached&quot;  </span><br><span class="line">php_value session.save_path  &quot;127.0.0.1:11211&quot;  </span><br></pre></td></tr></table></figure>

<p>这个方法一般不推荐</p>
<h3 id="第三种方法：通过php函数ini-set函数来自动动态修改配置，且只作用于本页面即临时配置，不会修改到原php-ini。"><a href="#第三种方法：通过php函数ini-set函数来自动动态修改配置，且只作用于本页面即临时配置，不会修改到原php-ini。" class="headerlink" title="第三种方法：通过php函数ini_set函数来自动动态修改配置，且只作用于本页面即临时配置，不会修改到原php.ini。"></a>第三种方法：通过php函数ini_set函数来自动动态修改配置，且只作用于本页面即临时配置，不会修改到原php.ini。</h3><p>​    ini_set(“session.save_handler”,”memcache”);</p>
<p>​    ini_set(“session.save_path”,”tcp://127.0.0.1:11211”);</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># memcache扩展，如果有多个memcached服务端的话，用逗号,隔开</span></span><br><span class="line">ini_set(<span class="string">&quot;session.save_handler&quot;</span>, <span class="string">&quot;memcache&quot;</span>);  </span><br><span class="line">ini_set(<span class="string">&quot;session.save_path&quot;</span>, <span class="string">&quot;tcp://127.0.0.1:11211&quot;</span>);  </span><br><span class="line"> </span><br><span class="line"><span class="comment"># memcached扩展，如果有多个memcached服务端的话，用逗号,隔开</span></span><br><span class="line">ini_set(<span class="string">&quot;session.save_handler&quot;</span>, <span class="string">&quot;memcached&quot;</span>);  </span><br><span class="line">ini_set(<span class="string">&quot;session.save_path&quot;</span>, <span class="string">&quot;127.0.0.1:11211&quot;</span>);  </span><br></pre></td></tr></table></figure>

<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>（1）在session数据存储到memcached时，键值对中的键是以session_id为键存储</p>
<p>（2）如果存入多个session，则它是以session_id为key名的数组存入的。</p>
<p>（3）如果session中存入对象时，对象被序列化后存入memcached。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>使用memcached扩展</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="comment">// Memcached</span></span><br><span class="line"> <span class="number">2</span> <span class="comment">// 1. 先测试下session存取</span></span><br><span class="line"> <span class="number">3</span> session_start();</span><br><span class="line"> <span class="number">4</span> <span class="variable">$_SESSION</span>[<span class="string">&#x27;name&#x27;</span>] = <span class="string">&#x27;李斯&#x27;</span>;</span><br><span class="line"> <span class="number">5</span> <span class="variable">$_SESSION</span>[<span class="string">&#x27;name2&#x27;</span>] = <span class="string">&#x27;韩非&#x27;</span>;</span><br><span class="line"> <span class="number">6</span> <span class="keyword">print</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;name&#x27;</span>] . <span class="string">&#x27;&lt;br/&gt;&#x27;</span>); <span class="comment">// 李斯 session可以正常设置读取</span></span><br><span class="line"> <span class="number">7</span> </span><br><span class="line"> <span class="number">8</span> <span class="comment">// 2. 查看一下是否是以session_id为键存储的</span></span><br><span class="line"> <span class="number">9</span> <span class="variable">$mem</span> = <span class="keyword">new</span> Memcached();</span><br><span class="line"><span class="number">10</span> <span class="variable">$mem</span>-&gt;addServer(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">11211</span>);</span><br><span class="line"><span class="number">11</span> <span class="variable">$res</span> = <span class="variable">$mem</span>-&gt;get(<span class="string">&#x27;memc.sess.key.&#x27;</span> . session_id()); <span class="comment">// string(18) &quot;name|s:6:&quot;李斯&quot;;name2|s:6:&quot;韩非&quot;;&quot;</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">print</span>(<span class="variable">$res</span> . <span class="string">&#x27;&lt;br/&gt;&#x27;</span>);</span><br><span class="line"><span class="number">13</span> </span><br><span class="line"><span class="number">14</span> <span class="comment">// 3. 再查看下memcached可以正常使用否</span></span><br><span class="line"><span class="number">15</span> <span class="variable">$mem</span>-&gt;set(<span class="string">&#x27;age&#x27;</span>, <span class="number">20</span>, <span class="number">60</span>);</span><br><span class="line"><span class="number">16</span> <span class="variable">$res1</span> = <span class="variable">$mem</span>-&gt;get(<span class="string">&#x27;age&#x27;</span>); <span class="comment">// 20 //说明memcached还可以正常使用</span></span><br><span class="line"><span class="number">17</span> <span class="keyword">print</span>(<span class="variable">$res1</span>);</span><br></pre></td></tr></table></figure>

<p>使用memcache扩展</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="comment">// Memcache</span></span><br><span class="line"> <span class="number">2</span> <span class="comment">// 1. 先测试下session存取</span></span><br><span class="line"> <span class="number">3</span> session_start();</span><br><span class="line"> <span class="number">4</span> <span class="variable">$_SESSION</span>[<span class="string">&#x27;name&#x27;</span>] = <span class="string">&#x27;李斯&#x27;</span>;</span><br><span class="line"> <span class="number">5</span> <span class="variable">$_SESSION</span>[<span class="string">&#x27;name2&#x27;</span>] = <span class="string">&#x27;韩非&#x27;</span>;</span><br><span class="line"> <span class="number">6</span> <span class="keyword">print</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;name&#x27;</span>] . <span class="string">&#x27;&lt;br/&gt;&#x27;</span>); <span class="comment">// 李斯 session可以正常设置读取</span></span><br><span class="line"> <span class="number">7</span> </span><br><span class="line"> <span class="number">8</span> <span class="comment">// 2. 查看一下是否是以session_id为键存储的</span></span><br><span class="line"> <span class="number">9</span> <span class="variable">$mem</span> = <span class="keyword">new</span> Memcache();</span><br><span class="line"><span class="number">10</span> <span class="variable">$mem</span>-&gt;addServer(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">11211</span>);</span><br><span class="line"><span class="number">11</span> <span class="variable">$res</span> = <span class="variable">$mem</span>-&gt;get(session_id()); <span class="comment">// string(18) &quot;name|s:6:&quot;李斯&quot;;name2|s:6:&quot;韩非&quot;;&quot;</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">print</span>(<span class="variable">$res</span> . <span class="string">&#x27;&lt;br/&gt;&#x27;</span>);</span><br><span class="line"><span class="number">13</span> </span><br><span class="line"><span class="number">14</span> <span class="comment">// 3. 再查看下memcached可以正常使用否</span></span><br><span class="line"><span class="number">15</span> <span class="variable">$mem</span>-&gt;set(<span class="string">&#x27;age&#x27;</span>, <span class="number">20</span>, MEMCACHE_COMPRESSED, <span class="number">60</span>);</span><br><span class="line"><span class="number">16</span> <span class="variable">$res1</span> = <span class="variable">$mem</span>-&gt;get(<span class="string">&#x27;age&#x27;</span>); <span class="comment">// 20 //说明memcached还可以正常使用</span></span><br><span class="line"><span class="number">17</span> <span class="keyword">print</span>(<span class="variable">$res1</span>);</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>上面两段代码的第11行，memcache存储的key名是session_id()，而memcached存储的key名是 ‘memc.sess.key’ . session_id()</p>
]]></content>
      <categories>
        <category>memcached</category>
      </categories>
  </entry>
  <entry>
    <title>MySQL 利用mysqlbinlog二进制文件还原指定数据库</title>
    <url>/mysql/ad16af82/</url>
    <content><![CDATA[<p>推荐这篇 mysqlbinlog详解 - <a href="https://www.cnblogs.com/Presley-lpc/p/9619571.html">https://www.cnblogs.com/Presley-lpc/p/9619571.html</a></p>
<h3 id="我的初始环境"><a href="#我的初始环境" class="headerlink" title="我的初始环境"></a>我的初始环境</h3><p>系统：CentOS 7.6.1810(Py3.7.8)</p>
<p>MySQL：5.7.31</p>
<h3 id="检查MySQL是否开启binlog日志"><a href="#检查MySQL是否开启binlog日志" class="headerlink" title="检查MySQL是否开启binlog日志"></a>检查MySQL是否开启binlog日志</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;log_bin&#x27;;</span><br><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| log_bin       | ON    |</span><br><span class="line">+---------------+-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>log_bin为ON即为开启，</p>
<p>若未开启？</p>
<p>修改配置文件，在 [mysqld]下添加如下内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">log-bin=mysql-bin</span><br><span class="line">server-id = 1</span><br><span class="line">binlog_format=mixed</span><br><span class="line"></span><br><span class="line">#log-bin  开启 Binlog 并写明存放日志的位置；默认使用的设置是“log-bin=mysql-bin”，这样日志是存放在默认的位置上的，一般是放在data目录中。</span><br><span class="line"></span><br><span class="line">#server-id  指定一个集群内的 MySQL 服务器 ID，如果做数据库集群那么必须全局唯一，一般来说不推荐 指定 server_id 等于 1。</span><br><span class="line"></span><br><span class="line">#binlog_format  三种Bin-log日志模式 -- 自动模式</span><br></pre></td></tr></table></figure>

<p><img src="../../images/mysqlbinlog%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E8%BF%98%E5%8E%9F%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE%E5%BA%93/2020519-20201205091044237-1138203380.png" alt="img"></p>
<h3 id="模拟数据丢失"><a href="#模拟数据丢失" class="headerlink" title="模拟数据丢失"></a>模拟数据丢失</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create database test;</span><br><span class="line">use test;</span><br><span class="line">create table t1(</span><br><span class="line">id int primary key,</span><br><span class="line">name varchar(32)</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line">INSERT INTO t1 VALUE(1,&#x27;val1&#x27;);</span><br><span class="line">INSERT INTO t1 VALUE(2,&#x27;val2&#x27;);</span><br><span class="line"></span><br><span class="line">create database test2;</span><br><span class="line">use test2;</span><br><span class="line">create table t1(</span><br><span class="line">id int primary key,</span><br><span class="line">name varchar(32)</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line">INSERT INTO t1 VALUE(1,&#x27;val1&#x27;);</span><br><span class="line">INSERT INTO t1 VALUE(2,&#x27;val2&#x27;);</span><br><span class="line"></span><br><span class="line">drop database test;</span><br><span class="line">drop database test2;</span><br></pre></td></tr></table></figure>

<h3 id="查看日志并恢复数据"><a href="#查看日志并恢复数据" class="headerlink" title="查看日志并恢复数据"></a>查看日志并恢复数据</h3><p>查看当前日志文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show master status;</span><br><span class="line">+------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |</span><br><span class="line">+------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| mysql-bin.000001 |     4285 |              |                  |                   |</span><br><span class="line">+------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">1 row in set (0.06 sec)</span><br></pre></td></tr></table></figure>

<p>结果：说明 mysql-bin.000001 是当前备份的文件名</p>
<p>也可以直接进入/www/server/data，找到类似mysql-bin.000001的文件，选择后缀最大的文件，因为这个是最新的</p>
<p>如果找不到，可以全局搜索一下，使用 find / -name mysql-bin.000001; 去查看一下路径</p>
<p>由于binlog是二进制的，所以需要先转换成文本文件，一般可以采用Mysql自带的mysqlbinlog转换成文本。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/www/server/mysql/bin/mysqlbinlog --no-defaults --base64-output=&#x27;decode-rows&#x27; -v mysql-bin.000001 &gt; ./binlog_2020_12_07;</span><br></pre></td></tr></table></figure>

<p>部分参数说明：</p>
<ol>
<li>–no-defaults 为了防止报错：mysqlbinlog: unknown variable ‘default_character_set=utf8mb4’</li>
<li>–base64-output=’decode-rows’ 和-v一起使用， 进行base64解码</li>
<li>-d databaseName：可以使用-d来指定数据库</li>
<li>–start-datetime=”2020-12-07 14:27:36” ：指定开始时间，注意格式不要写错</li>
<li>–stop-datetime=”” ：指定结束时间</li>
<li>–start-position=”” ： 指定起始点</li>
<li>–stop-position=”” ：指定结束点</li>
</ol>
<p>之后导出文件 ‘binlog_2020_12_07’，我是直接在宝塔面板下载的，用vscode打开文本文件</p>
<p>会看到binlog的基本块如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># at 1488</span><br><span class="line">#201207 14:27:26 server id 1  end_log_pos 1569 CRC32 0xcb9c1cbf     Query    thread_id=178    exec_time=0    error_code=0</span><br><span class="line">SET TIMESTAMP=1607322446/*!*/;</span><br><span class="line">BEGIN</span><br></pre></td></tr></table></figure>

<p>基本块解释：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># at 1488</span><br><span class="line">指明的当前位置相对文件开始的偏移位置，这个在mysqlbinlog命令中可以作为--start-position的参数</span><br><span class="line"></span><br><span class="line">#201207 14:27:26 server id 1  end_log_pos 1569 CRC32 0xcb9c1cbf     Query    thread_id=178    exec_time=0    error_code=0</span><br><span class="line">201207 14:27:26指明时间为20年12月7号14:27:26，serverid也就是你在配置文件中的配置的，end_log_pos 1569，这个块在1569结束，也就是说结束点是1569。thread_id执行的线程id，exec_time执行时间，error_code错误码</span><br><span class="line"></span><br><span class="line">SET TIMESTAMP=1607322446/*!*/;</span><br><span class="line">BEGIN</span><br><span class="line">具体执行语句</span><br></pre></td></tr></table></figure>

<p>截取部分日志：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 /*!*/;</span><br><span class="line"> 2 # at 1852</span><br><span class="line"> 3 #201207 14:27:30 server id 1  end_log_pos 1958 CRC32 0xf8660231     Query    thread_id=178    exec_time=0    error_code=0</span><br><span class="line"> 4 SET TIMESTAMP=1607322450/*!*/;</span><br><span class="line"> 5 INSERT INTO t1 VALUE(2,&#x27;val2&#x27;)</span><br><span class="line"> 6 /*!*/;</span><br><span class="line"> 7 # at 1958</span><br><span class="line"> 8 #201207 14:27:30 server id 1  end_log_pos 1989 CRC32 0x3a49fcc1     Xid = 607</span><br><span class="line"> 9 COMMIT/*!*/;</span><br><span class="line">10 # at 1989</span><br><span class="line">11 #201207 14:27:36 server id 1  end_log_pos 2054 CRC32 0xa4d22816     Anonymous_GTID    last_committed=8    sequence_number=9    rbr_only=no</span><br><span class="line">12 SET @@SESSION.GTID_NEXT= &#x27;ANONYMOUS&#x27;/*!*/;</span><br><span class="line">13 # at 2054</span><br><span class="line">14 #201207 14:27:36 server id 1  end_log_pos 2146 CRC32 0x11bdfbca     Query    thread_id=178    exec_time=0    error_code=0</span><br><span class="line">15 SET TIMESTAMP=1607322456/*!*/;</span><br><span class="line">16 drop database test</span><br><span class="line">17 /*!*/;</span><br><span class="line">18 # at 2146</span><br><span class="line">19 #201207 14:27:42 server id 1  end_log_pos 2211 CRC32 0x9a60cd1d     Anonymous_GTID    last_committed=9    sequence_number=10    rbr_only=no</span><br><span class="line">20 SET @@SESSION.GTID_NEXT= &#x27;ANONYMOUS&#x27;/*!*/;</span><br><span class="line">21 # at 2211</span><br><span class="line">22 #201207 14:27:42 server id 1  end_log_pos 2306 CRC32 0xd29068e1     Query    thread_id=178    exec_time=0    error_code=0</span><br><span class="line">23 SET TIMESTAMP=1607322462/*!*/;</span><br><span class="line">24 drop database test2</span><br><span class="line">25 /*!*/;</span><br><span class="line">26 SET @@SESSION.GTID_NEXT= &#x27;AUTOMATIC&#x27; /* added by mysqlbinlog */ /*!*/;</span><br><span class="line">27 DELIMITER ;</span><br><span class="line">28 # End of log file</span><br><span class="line">29 /*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;</span><br><span class="line">30 /*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=0*/;</span><br></pre></td></tr></table></figure>

<p>这里我们用搜索去找 drop 等关键字，来找到删除操作的日志记录位置</p>
<p>可以看到以上内容，在第16行和第24行，分别删除了数据库test和test2，之后进行恢复数据库<code>test</code>操作，有两种方法:</p>
<p>这里我使用的是第一种</p>
<p>\1) 利用 drop database test 前的 “时间” 进行恢复，请注意时间格式</p>
<p>会产生一个警告，不用管，输入数据库root密码进行验证敲回车</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1 [root@iZm5eajbhqhhehk85j4d95Z data]# /www/server/mysql/bin/mysqlbinlog -d test --stop-datetime=&quot;2020-12-07 14:27:36&quot; mysql-bin.000001 | mysql -uroot -p;</span><br><span class="line">2 Enter password: WARNING: The option --database has been used. It may filter parts of transactions, but will include the GTIDs in any case. If you want to exclude or include transactions, you should use the options --exclude-gtids or --include-gtids, respectively, instead.</span><br><span class="line">3 </span><br><span class="line">4 [root@iZm5eajbhqhhehk85j4d95Z data]# </span><br></pre></td></tr></table></figure>

<p>\2) 利用 –stop-position=”” 进行恢复</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 [root@iZm5eajbhqhhehk85j4d95Z data]# /www/server/mysql/bin/mysqlbinlog -d test --stop-position=&quot;2054&quot; mysql-bin.000001 | mysql -uroot -p;</span><br><span class="line">2 WARNING: The option --database has been used. It may filter parts of transactions, but will include the GTIDs in any case. If you want to exclude or include transactions, you should use the options --exclude-gtids or --include-gtids, respectively, instead.</span><br><span class="line">3 Enter password: </span><br><span class="line">4 [root@iZm5eajbhqhhehk85j4d95Z data]#</span><br></pre></td></tr></table></figure>

<p>再次进入数据库，可以看到数据库<code>test</code>以及数据就已经恢复了</p>
<h3 id="重置日志文件"><a href="#重置日志文件" class="headerlink" title="重置日志文件"></a>重置日志文件</h3><p>使用 mysqlbinlog 恢复之后，日志文件会重复记录前面的操作，此时可以选择重置日志文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; reset master</span><br></pre></td></tr></table></figure>

<p>再次查看二级制文件时，发现已经被重置了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 mysql&gt; show binary logs;</span><br><span class="line"> 2 +------------------+-----------+</span><br><span class="line"> 3 | Log_name         | File_size |</span><br><span class="line"> 4 +------------------+-----------+</span><br><span class="line"> 5 | mysql-bin.000001 |      8079 |</span><br><span class="line"> 6 +------------------+-----------+</span><br><span class="line"> 7 1 row in set (0.00 sec)</span><br><span class="line"> 8 </span><br><span class="line"> 9 mysql&gt; reset master;</span><br><span class="line">10 Query OK, 0 rows affected (0.02 sec)</span><br><span class="line">11 </span><br><span class="line">12 mysql&gt; show binary logs;</span><br><span class="line">13 +------------------+-----------+</span><br><span class="line">14 | Log_name         | File_size |</span><br><span class="line">15 +------------------+-----------+</span><br><span class="line">16 | mysql-bin.000001 |       154 |</span><br><span class="line">17 +------------------+-----------+</span><br><span class="line">18 1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>mysql</category>
      </categories>
  </entry>
  <entry>
    <title>mysql 事务的实现原理</title>
    <url>/mysql/ef4ef4/</url>
    <content><![CDATA[<h2 id="事务的特点"><a href="#事务的特点" class="headerlink" title="事务的特点"></a>事务的特点</h2><ul>
<li>原子性：事务中的所有操作作为一个整体像原子一样不可分割，要么全部成功，要么全部失败。</li>
<li>一致性：事务的执行结果必须使数据库从一个一致性状态到另一个一致性状态。一致性状态是指：</li>
</ul>
<ol>
<li>系统的状态满足数据的完整性约束(主码，参照完整性，check约束等)</li>
<li>系统的状态反应数据库本应描述的现实世界的真实状态，比如转账前后两个账户的金额总和应该保持不变</li>
</ol>
<ul>
<li>隔离性：并发执行的事务不会相互影响，其对数据库的影响和他们串行执行时一样。比如操作同一张表时，数据库为每一个用户开启的事务，不能被其他事务的操作所干扰，多个并发事务之间要相互隔离。比如A正在从一张银行卡中取钱，在A取钱的过程结束前，B不能向这张卡转入钱。</li>
<li>持久性：事务一旦提交，其对数据库的更新就是持久的。对数据库的所有更新将被保存到数据库中，不能回滚，任何事务或系统故障都不会导致数据丢失。</li>
</ul>
<h2 id="事务的实现原理"><a href="#事务的实现原理" class="headerlink" title="事务的实现原理"></a>事务的实现原理</h2><ol>
<li>事务的原子性是通过undo log（回滚日志）实现的</li>
<li>事务的持久性是通过redo log 来实现的</li>
<li>事务的隔离性是通过（读写锁+MVCC）来实现的</li>
<li>事务的一致性是通过原子性，持久性，隔离性来实现的！！！</li>
</ol>
<h2 id="MySQL基本架构图"><a href="#MySQL基本架构图" class="headerlink" title="MySQL基本架构图"></a>MySQL基本架构图</h2><p><img src="data:image/png;base64,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ggBypiU/U+i1MWQBD+HnsS09GOFLlx6/tWy5X81gul6LI4/fUn6RtNIIsJcIEAEiQAQEAeRMS36m0GtjyAIews9jW3owwpcuPX5r2XK/msF0vRZHHr+l/CJppRFgLxGYMAJXXRXCunXln4MOCuGJJya8YS59ngggZ1ryM4Vey4wFPJDqsX2cSP0AACAASURBVC09GOFLlx6/tWy5X81gul6LI4/fUn6RtNIIsHfhEYiJpakIIqxdytQl4k72NJV9pfbCvrkhgJxpyc8Uei0tFvDAqMe29GCEL116/Nay5X41g+l6LY48fkv5RdJKI8DehUXg2WdDOO20+NuwqQgiCr2FDd95bBw505KfKfRaRizggUyPbenBCF+69PitZcv9agbT9VocefyW8ouklUaAvQuLwL33hvAXf7FP6HXfiF155TS+4oTQK/36dioCdmGDsu7GkTMt+ZlCr+XOAh5o99iWHozwpUuP31q23K9mMF2vxZHHbym/SFppBNi7sAhooZcTQDt2zL75u/DCZdj0PF/4wr6vR0VA/v3f77ORuozBJbYizORtorxVlKsr2LTwRJ+sUebXtujT4+GHJREYiABypiU/U+i1YFvAA08e29KDEb506fFby5b71Qym67U48vgt5RdJK40AexcWgb6vbruiCWKq+9YMYk8LPYwRcXfbbftEn7RhTvysnLSJeJQLwg+2KGET8w+RiD4p++bBfFJizQtLOjeeQgA505KfKfRaZC3ggRSPbenBCF+69PitZcv9agbT9VocefyW8ouklUaAvQuPQEwgQUhpEQdhBrGGN3V6DOwAKuaGwMKbQbxBxD3mEjvMhzEQcyLUpK4v9HXb9RjWiUAhAsiZlvxModeCbAEP/HhsSw9G+NKlx28tW+5XM5iu1+LI47eUXyStNALsJQItAhBdeAMm99029KGUfggzaZN7fcEeoq0r/CDUMJ8uIf4wBnPo+dGn7XJ1iE49D+tEgH9HbzkGPAdULdvSg3F5l8u1Wmv2+OV+l/nL1Tw417It5ZdCL8c++/dDQIs2EVEQan3iKSf08PZP7L/2teXf8oUgTAm1EqEnog3jZDNYrxaFMobibj+q2bA/AsiZltzON3otnhbwQIXHtvRghC9devzWsuV+NYPpei2OPH5L+UXSSiPA3oVFQETdZZfNbh9CSYSZFnFaTM1apN/oyVgR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" alt="img"></p>
<p>redo log、undo log是属于innodb存储引擎的日志；binlog、error log、relay log是属于server层的日志</p>
<p>Server 层包括连接器、查询缓存、分析器、优化器、执行器等，以及所有的内置函数（如日期、时间、数学和加密函数等），所有跨存储引擎的功能，比如存储过程、触发器、视图等。</p>
<p>存储引擎层负责数据的存储和提取。InnoDB、MyISAM、Memory 等多个存储引擎。InnoDB 在5.5.5后成为默认存储引擎</p>
<h3 id="server层讲解"><a href="#server层讲解" class="headerlink" title="server层讲解"></a>server层讲解</h3><h4 id="连接器"><a href="#连接器" class="headerlink" title="连接器"></a>连接器</h4><p>负责与客户端建立链接、获取权限、位置和管理链接</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql -h$ip -P$port -u$user -p</span><br></pre></td></tr></table></figure>

<p>用户成功连接之后，连接器会到权限表里面查出该用户所拥有的权限。之后该连接之内的权限判断都会依赖已经督导的权限。即：<em>如果修改已经连接的用户权限需要重新连接之后才能生效。</em></p>
<p>如果连接之后，客户端长时间没有操作，连接器会自动断开。这给时间是由参数<strong>wait_timeout</strong>控制的，默认时间为8小时。</p>
<p>mysql中长连接是指 连接成功之后，如果客户端持续有请求，则一直使用统一给连接。短链接则是指每次执行完很少的几次查询就断开连接，下次查询再重新建立一个。</p>
<p>大量使用长连接，内存占用过大的问题解决办法：</p>
<ul>
<li>定期断开长连接、或者在执行一个占用较大内存查询之后，断开连接</li>
<li>Mysql5.7 之后的版本，可以使用<code>mysql_reset_connection</code>来重新初始化连接资源</li>
</ul>
<h4 id="查询缓存"><a href="#查询缓存" class="headerlink" title="查询缓存"></a>查询缓存</h4><p>MySQL 拿到一个查询请求后，会先到查询缓存看看，之前是不是执行过这条语句。之前执行过的语句及其结果可能会以 key-value 对的形式，被直接缓存在内存中。查询缓存的失效非常频繁，只要有对一个表的更新，这个表上所有的查询缓存都会被清空。<br>参数 query_cache_type 设置成 DEMAN,对默认SQL语句都不使用查询缓存，对于要使用查询缓存的语句，使用 SQL_CACHE 显示指定，例如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT SQL_CACHE * FROM T WHERE ID=10;</span><br></pre></td></tr></table></figure>

<p>1</p>
<p>MYSQL 8.0 后不支持查询缓存</p>
<h4 id="分析器"><a href="#分析器" class="headerlink" title="分析器"></a>分析器</h4><p>1.词法分析：从”SELECT” 识别是查询语句，把字符串“T”识别成“表名T”，把字符串“ID”识别成“列ID”<br>2.语法分析：根据与语法规则判断SQL语句是否满足MySQL语法<br>一般语法错误会提示第一个出错位置，要关注的是紧接“use near”的内容</p>
<h4 id="优化器"><a href="#优化器" class="headerlink" title="优化器"></a>优化器</h4><p>优化器在表里有多个索引的时候，决定使用哪个索引；或者在一个语句有多表关联（join）的时候，决定各个表的连接顺序</p>
<h4 id="执行器"><a href="#执行器" class="headerlink" title="执行器"></a>执行器</h4><p>判断是否有权限对表的操作，如果有则调用引擎接口，进行数据处理。</p>
<h2 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h2><h3 id="undo-log"><a href="#undo-log" class="headerlink" title="undo log"></a>undo log</h3><ul>
<li><p>Undo Log是为了实现事务的原子性，在mysql数据库innodb存储引擎中，还用undo log来实现多版本并发控制（简称：MVCC）</p>
</li>
<li><p>在操作任何数据之前，首先将数据备份到一个地方（这个存储数据备份的地方称为Undo Log）。然后进行数据的修改。如果出现了错误或者用户执行了rollback语句，系统可以利用undo log中的备份将数据恢复到事务开始之前的状态。</p>
</li>
<li><p>注意：undo log是逻辑日志，根据逻辑计算出实际的值，而不需要在每一个状态的时候都存储一份数据。可以理解为：</p>
</li>
<li><ul>
<li>当delete一条记录时，undo log中会记录一条对应的insert记录</li>
<li>当insert一条记录时，undo log中会记录一条对应的delete记录</li>
<li>当update一条记录时，它记录一条对应相反的update记录</li>
</ul>
</li>
</ul>
<h3 id="redo-log"><a href="#redo-log" class="headerlink" title="redo log"></a>redo log</h3><p>和undo log相反，redo log记录的是新数据的备份,而不是逻辑。在事务提交之前，只要将Redo log持久化即可，不需要将数据持久化，当系统崩溃时，虽然数据没有持久化，但是Redo log已经持久化了。系统可以根据Redo log的内容，将所有数据恢复到最新的状态</p>
<h4 id="为什么需要redo-log"><a href="#为什么需要redo-log" class="headerlink" title="为什么需要redo log?"></a>为什么需要redo log?</h4><p>事务的持久性，具体指只要事务提交成功，那么对数据库做的修改就被永久保存下来了，不可能因为任何原因再回到原来的状态。实现持久性的方法并不是在每次事务提交的时候，将该事务涉及修改的数据页全部刷新到磁盘中。因为这样会有严重的性能问题，体现为：</p>
<ol>
<li>因为Innodb是以页为单位进行磁盘交互的，而一个事务很可能只修改一个数据页里面的几个字节，这个时候将完整的数据页刷到磁盘的话，太浪费资源了！</li>
<li>一个事务可能涉及修改多个数据页，并且这些数据页在物理上并不连续，使用随机 IO 写入性能太差！</li>
</ol>
<p>因此mysql设计了redo log，具体来说就是只记录事务对数据页做了哪些修改，这样就能完美地解决性能问题了 (相对而言文件更小并且是顺序 IO)。</p>
<h4 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h4><p><code>redo log</code>包括两部分：一个是内存中的日志缓冲 (<code>redo log buffer</code>)，另一个是磁盘上的日志文件 (<code>redo log file</code>)。<code>mysql</code>每执行一条<code>DML</code>语句，先将记录写入<code>redo log buffer</code>，后续某个时间点再一次性将多个操作记录写到<code>redo log file</code>。这种先写日志，再写磁盘的技术就是<code>MySQL</code>里经常说到的<code>WAL(Write-Ahead Logging)</code> 技术。</p>
<p>在计算机操作系统中，用户空间 (<code>user space</code>) 下的缓冲区数据一般情况下是无法直接写入磁盘的，中间必须经过操作系统内核空间 (<code>kernel space</code>) 缓冲区 (<code>OS Buffer</code>)。因此，<code>redo log buffer</code>写入<code>redo log file</code>实际上是先写入<code>OS Buffer</code>，然后再通过系统调用<code>fsync()</code>将其刷到<code>redo log file</code>中，过程如下：</p>
<p><img src="../../images/%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86/2020519-20210325143114151-1676500635.png" alt="img"></p>
<p>三种写入方式(将redo log buffer写入redo log file的时机),可以通过innodb_flush_log_at_trx_commit参数配置</p>
<p>0：先写到log buffer，每秒钟写到磁盘里。如果在0.99秒时突然mysql崩溃，会丢失1秒的数据</p>
<p>1：当提交时，直接写入磁盘中。有性能问题，效率较低</p>
<p>2：写到os buffer，每秒钟写入磁盘。和0的区别是，如果是整个服务器断电，这俩都丢；如果只是mysql进程挂了，2仍然会调用fsync()写入到磁盘中去</p>
<p> <img src="../../images/%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86/2020519-20210412103146545-1115409512.png" alt="img"></p>
<h4 id="记录形式"><a href="#记录形式" class="headerlink" title="记录形式"></a>记录形式</h4><p>类比《孔乙己》的掌柜记账 WAL 技术，WAL 的全称是 Write-Ahead Logging，它的关键点就是先写日志，再写磁盘。因为更新数据时写磁盘的操作是随机写，这部分的IO消耗很大，而通过组提交（多个事务的变更统一写磁盘）的方式可以提升系统的吞吐量。<br>redo log 是InnoDB 引擎特有的，从开头写到末尾又回开头循环写，有crash-safe能力</p>
<p><img src="../../images/%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86/2020519-20210412104750875-377158243.png" alt="img"></p>
<p> write pos 是当前记录的位置，一边写一边后移，check point 是当前要擦除的位置，也是往后推移并且循环的，擦除记录前要把记录更新到数据文件</p>
<p>启动<code>innodb</code>的时候，不管上次是正常关闭还是异常关闭，总是会进行恢复操作。因为<code>redo log</code>记录的是数据页的物理变化，因此恢复的时候速度比逻辑日志 (如<code>binlog</code>) 要快很多。重启<code>innodb</code>时，首先会检查磁盘中数据页的<code>LSN</code>，如果数据页的<code>LSN</code>小于日志中的<code>LSN</code>，则会从<code>checkpoint</code>开始恢复。还有一种情况，在宕机前正处于<code>checkpoint</code>的刷盘过程，且数据页的刷盘进度超过了日志页的刷盘进度，此时会出现数据页中记录的<code>LSN</code>大于日志中的<code>LSN</code>，这时超出日志进度的部分将不会重做，因为这本身就表示已经做过的事情，无需再重做。</p>
<h4 id="何时会擦除redo-log并更新到数据文件中"><a href="#何时会擦除redo-log并更新到数据文件中" class="headerlink" title="何时会擦除redo log并更新到数据文件中"></a>何时会擦除redo log并更新到数据文件中</h4><ol>
<li>系统空闲时</li>
<li>redo log文件没有空闲空间时，即write pos追上check point的时候</li>
<li>MySQL Server正常关闭时</li>
</ol>
<h4 id="磁盘文件"><a href="#磁盘文件" class="headerlink" title="磁盘文件"></a>磁盘文件</h4><p>默认是两个文件，存在datadir目录中，文件名分别为ib_logfile0和ib_logfile1。datadir可以通过命令select @@datadir;查看：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select @@datadir;</span><br><span class="line">+---------------------------------------+</span><br><span class="line">| @@datadir                             |</span><br><span class="line">+---------------------------------------+</span><br><span class="line">| c:\wamp64\bin\mysql\mysql5.7.21\data\ |</span><br><span class="line">+---------------------------------------+</span><br></pre></td></tr></table></figure>

<p>文件数量和每个文件的大小可以通过变量innodb_log_files_in_group和innodb_log_file_size来设置，这两个变量都是只读变量，只能通过在配置文件中修改并重启的方式生效。redo log文件的总大小（innodb_log_file_size * innodb_log_files_in_group）一般建议配置为可以处理一个小时写操作的量，数值越大则通过checkpoint刷新的次数越少，就越能降低磁盘IO。</p>
<p>配置文件（my.cnf/my.ini）：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">innodb_log_files_in_group=4</span><br><span class="line">innodb_log_file_size=1073741824</span><br></pre></td></tr></table></figure>

<p>查看变量：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;innodb_log_file%&#x27;;</span><br><span class="line">+---------------------------+------------+</span><br><span class="line">| Variable_name             | Value      |</span><br><span class="line">+---------------------------+------------+</span><br><span class="line">| innodb_log_file_size      | 1073741824 |</span><br><span class="line">| innodb_log_files_in_group | 4          |</span><br><span class="line">+---------------------------+------------+</span><br></pre></td></tr></table></figure>

<p>查看磁盘文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\wamp64\bin\mysql\mysql5.7.21\data</span><br><span class="line">λ ls -alh | grep ib_log</span><br><span class="line">-rw-r--r-- 1 username 1049089 1.0G Apr 24 10:45 ib_logfile0</span><br><span class="line">-rw-r--r-- 1 username 1049089 1.0G Apr 24 10:44 ib_logfile1</span><br><span class="line">-rw-r--r-- 1 username 1049089 1.0G Apr 24 10:44 ib_logfile2</span><br><span class="line">-rw-r--r-- 1 username 1049089 1.0G Apr 24 10:45 ib_logfile3</span><br></pre></td></tr></table></figure>

<h3 id="binlog"><a href="#binlog" class="headerlink" title="binlog"></a>binlog</h3><p><code>binlog</code>用于记录数据库执行的写入性操作 (不包括查询) 信息，以二进制的形式保存在磁盘中。<code>binlog</code>是<code>mysql</code>的逻辑日志，并且由<code>Server</code>层进行记录，使用任何存储引擎的<code>mysql</code>数据库都会记录<code>binlog</code>日志。</p>
<p><code>binlog</code>是通过追加的方式进行写入的，可以通过<code>max_binlog_size</code>参数设置每个<code>binlog</code>文件的大小，当文件大小达到给定值之后，会生成新的文件来保存日志。</p>
<h4 id="binlog使用场景"><a href="#binlog使用场景" class="headerlink" title="binlog使用场景"></a>binlog使用场景</h4><p>在实际应用中，<code>binlog</code>的主要使用场景有两个，分别是主从复制和数据恢复。</p>
<ol>
<li>主从复制：在<code>Master</code>端开启<code>binlog</code>，然后将<code>binlog</code>发送到各个<code>Slave</code>端，<code>Slave</code>端重放<code>binlog</code>从而达到主从数据一致。</li>
<li>数据恢复：通过使用<code>mysqlbinlog</code>工具来恢复数据。</li>
</ol>
<h4 id="binlog刷盘时机"><a href="#binlog刷盘时机" class="headerlink" title="binlog刷盘时机"></a>binlog刷盘时机</h4><p>对于<code>InnoDB</code>存储引擎而言，只有在事务提交时才会记录<code>biglog</code>，此时记录还在内存中，那么<code>biglog</code>是什么时候刷到磁盘中的呢？<code>mysql</code>通过<code>sync_binlog</code>参数控制<code>biglog</code>的刷盘时机，取值范围是<code>0-N</code>：</p>
<ul>
<li>0：不去强制要求，由系统自行判断何时写入磁盘；</li>
<li>1：每次<code>commit</code>的时候都要将<code>binlog</code>写入磁盘；</li>
<li>N：每 N 个事务，才会将<code>binlog</code>写入磁盘。</li>
</ul>
<p>从上面可以看出，<code>sync_binlog</code>最安全的是设置是<code>1</code>，这也是<code>MySQL 5.7.7</code>之后版本的默认值。但是设置一个大一些的值可以提升数据库性能，因此实际情况下也可以将值适当调大，牺牲一定的一致性来获取更好的性能。</p>
<h4 id="binlog-日志格式"><a href="#binlog-日志格式" class="headerlink" title="binlog 日志格式"></a>binlog 日志格式</h4><p><code>binlog</code>日志有三种格式，分别为<code>STATMENT</code>、<code>ROW</code>和<code>MIXED</code>。</p>
<blockquote>
<p>在 <code>MySQL 5.7.7</code>之前，默认的格式是<code>STATEMENT</code>，<code>MySQL 5.7.7</code>之后，默认值是<code>ROW</code>。日志格式通过<code>binlog-format</code>指定。</p>
</blockquote>
<ul>
<li><code>STATMENT</code> 基于<code>SQL</code>语句的复制 (<code>statement-based replication, SBR</code>)，每一条会修改数据的 sql 语句会记录到<code>binlog</code>中。优点：不需要记录每一行的变化，减少了<code>binlog</code>日志量，节约了<code>IO</code>, 从而提高了性能；缺点：在某些情况下会导致主从数据不一致，比如执行<code>sysdate()</code>、<code>slepp()</code>等。</li>
<li><code>ROW</code> 基于行的复制 (<code>row-based replication, RBR</code>)，不记录每条 sql 语句的上下文信息，仅需记录哪条数据被修改了。优点：不会出现某些特定情况下的存储过程、或 function、或 trigger 的调用和触发无法被正确复制的问题；缺点：会产生大量的日志，尤其是<code>alter table</code>的时候会让日志暴涨</li>
<li><code>MIXED</code> 基于<code>STATMENT</code>和<code>ROW</code>两种模式的混合复制 (<code>mixed-based replication, MBR</code>)，一般的复制使用<code>STATEMENT</code>模式保存<code>binlog</code>，对于<code>STATEMENT</code>模式无法复制的操作使用<code>ROW</code>模式保存<code>binlog</code></li>
</ul>
<h3 id="update语句的执行流程"><a href="#update语句的执行流程" class="headerlink" title="update语句的执行流程"></a>update语句的执行流程</h3><p>InnoDB存储引擎的表更新数据时update语句的执行流程图。浅绿色的流程在InnoDB内部执行，深绿色的部分在MySQL Server层的执行器中执行。图片以下条sql语句为例。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">update T set c=c+1 where ID=2;</span><br></pre></td></tr></table></figure>

<p><img src="../../images/%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86/2020519-20210412140439023-1460168424.png" alt="img"></p>
<p> 执行流程图注解</p>
<p>（1）更新语句经过 解析，优化 生成执行计划，交由执行器调用存储引擎接口（注：执行器会多次调用存储引擎接口，并不是一次完成）</p>
<p>（2）查询旧值，先去内存缓冲区查看是否有数据，如果没有，从磁盘中加载到内存，并将旧值写入到 Undo log 日志中，用于回滚数据</p>
<p>（3）更新内存中的数据（注：磁盘仍为旧数据）</p>
<p>（4）将操作写入到Redo Log 中，此时处于prepare阶段</p>
<p>（5）Redo Log根据刷盘策略刷到磁盘</p>
<p>（6）准备提交事务，写入binlog 日志（注：binlog也有自己的刷盘策略）</p>
<p>（7）把本次更新对应的binlog文件名称和这次 更新的binlog日志在文件里的位置，都写入到redo log日志文件里去，之后在redo log日志文件里写入一个commit标 记。</p>
<p>（8）事务完成</p>
<p>其实到此数据更新就算完成了，当服务器空闲时，会将redo.log日志更新至表中</p>
<p>当使用过程中突然断电，redolog会将已经写入的数据按照处于prepare的数据先写入binlog再commit，最后写入数据库表中，保证数据不会丢失</p>
<p>如上图所示，redo log的写入分为两个阶段（prepare和commit），这个称作两阶段提交，保证了数据的正确性。下面我们从上图4个可能发生异常关闭的时间点来分析InnoDB如何在MySQL启动时做崩溃恢复。</p>
<p>Point A</p>
<p>如果服务器异常关闭发生在Point A以及之前的时间点，这个时候redolog 和 binlog都没有任何记录，事务还未提交，不会造成任何影响。</p>
<p>Point B</p>
<p>当服务器启动的时候发现redo log里处于prepare状态的记录，这个时候需要检查binlog是否完整包含此条redo log的更新内容（通过全局事务ID对应），发现binlog中还未包含此事务变更，则丢弃此次变更。</p>
<p>Point C</p>
<p>和Point B基本相同，只不过此时发现binlog中包含redo log的更新内容，此时事务会进行提交。</p>
<p>Point D</p>
<p>binlog中和数据库中均含有此事务的变更，没有任何影响。</p>
<h3 id="binlog和redo-log的区别"><a href="#binlog和redo-log的区别" class="headerlink" title="binlog和redo log的区别"></a>binlog和redo log的区别</h3><p>1.redo log是InnoDB引擎特有的；binlog是Server层实现的，所有引擎都可以使用<br>2.redo log是物理日志，记录的是 “在某个数据页上做了什么修改”；binlog是逻辑日志，记录的是这个语句的原始逻辑，比如 “给ID=2这一行的c字段加1”<br>3.redo log是 循环写的，空间固定会用完；binlog是 可以追加写入的。“追加写”是指binlog 文件写到一定大小后会切换到下一个，并不会覆盖以前的日志</p>
<p>\4. <code>redo log</code>适用于崩溃恢复 (crash-safe)，<code>binlog</code>适用于主从复制和数据恢复</p>
<p>sync_binlog 参数设置成1的时候，表示每次事务的binlog都持久化到磁盘，可以保证MySQL异常重启后binlog不丢失</p>
<h2 id="事务的隔离级别"><a href="#事务的隔离级别" class="headerlink" title="事务的隔离级别"></a>事务的隔离级别</h2><h3 id="隔离性与隔离级别"><a href="#隔离性与隔离级别" class="headerlink" title="隔离性与隔离级别"></a>隔离性与隔离级别</h3><p>隔离的越严实，效率就会越低。<strong>可重复读</strong>是 MySQL 的默认级别</p>
<p>SQL标准的事务隔离级别(低==&gt;高)：</p>
<ol>
<li>读未提交（read uncommitted）：一个事务还没提交，它的变更就能被别的事务看到</li>
<li>读已提交（read committed）:一个事务提交了之后，它的变更才会被其他事务看到</li>
<li>可重复读（repeatable read）：一个事务执行过程中看到的数据，总是跟这个事务在启动时看到的数据是一致的，在可重复读隔离级别下，未提交的变更对其他事务也是不可见的</li>
<li>串行化（serializable）：对于同一行记录，“写”会加“写锁”，“读”会加“读锁”，当出现读写锁冲突的时候，后访问的事务必须等前一个事务执行完成，才能继续执行</li>
</ol>
<p><img src="../../images/%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86/2020519-20210412143608951-1623657015.png" alt="img"></p>
<h3 id="事务并发可能出现的情况"><a href="#事务并发可能出现的情况" class="headerlink" title="事务并发可能出现的情况"></a>事务并发可能出现的情况</h3><p>不同的隔离级别可能导致不同的并发异常，如下</p>
<p><img src="../../images/%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86/2020519-20210412143654888-423460240.png" alt="img"></p>
<h4 id="脏读"><a href="#脏读" class="headerlink" title="脏读"></a>脏读</h4><p>一个事务读到了另一个未提交事务修改过的数据</p>
<h4 id="可重复读"><a href="#可重复读" class="headerlink" title="可重复读"></a>可重复读</h4><p>可重复读指的是在一个事务内，最开始读到的数据和事务结束前的任意时刻读到的同一批数据都是一致的。通常针对数据更新（UPDATE）操作。</p>
<h4 id="不可重复读"><a href="#不可重复读" class="headerlink" title="不可重复读"></a>不可重复读</h4><p>对比可重复读，不可重复读指的是在同一事务内，不同的时刻读到的同一批数据可能是不一样的，可能会受到其他事务的影响，比如其他事务改了这批数据并提交了。通常针对数据更新（UPDATE）操作。</p>
<h4 id="幻读"><a href="#幻读" class="headerlink" title="幻读"></a>幻读</h4><p>幻读是针对数据插入（INSERT）操作来说的。简单的说，幻读指当用户读取某一范围的数据行时，另一个事务又在该范围内插入了新行，当用户再读取该范围的数据行时，会发现有新的“幻影” 行</p>
<p><img src="../../images/%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86/2020519-20210412143737154-614376150.png" alt="img"></p>
<p>举例：</p>
<p>create table T(c int) engine=InooDB;<br>insert into T(c) values(1);</p>
<p><img src="../../images/%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86/2020519-20210412143927970-1099489775.png" alt="img"></p>
<p>在不同隔离级别下V1、V2、V3的值</p>
<table>
<thead>
<tr>
<th><strong>隔离级别</strong></th>
<th><strong>值返回</strong></th>
</tr>
</thead>
<tbody><tr>
<td>读未提交</td>
<td>V1=2,V2=2,V3=2</td>
</tr>
<tr>
<td>读提交</td>
<td>V1=1,V2=2,V3=2</td>
</tr>
<tr>
<td>可重复读</td>
<td>V1=1,V2=1,V3=2</td>
</tr>
<tr>
<td>串行化</td>
<td>V1=1,V2=1,V3=2</td>
</tr>
</tbody></table>
<p>串行化：直接用加锁的方式避免并行访问，事务B执行“将1改成2”的时候，会被锁住，直到事务A提交后，事务B才可以继续执行 实现上，数据库会创建视图，访问的时候一视图的逻辑结果为准</p>
<p>可重复读：在事务启动时创建，整个事务存在期间都用这个视图</p>
<p>读提交：在每个SQL语句开始执行时创建</p>
<p>读未提交：直接返回记录上的最新值</p>
<p>配置方式： 将启动参数 transaction-isolation 的值设置成 READ-COMMITTED</p>
<h3 id="隔离级别的实现原理"><a href="#隔离级别的实现原理" class="headerlink" title="隔离级别的实现原理"></a>隔离级别的实现原理</h3><p>使用MySQL的默认隔离级别（可重复读）来进行说明。</p>
<p>每条记录在更新的时候都会同时记录一条回滚操作（回滚操作日志undo log）。同一条记录在系统中可以存在多个版本，这就是数据库的多版本并发控制（MVCC）。即通过回滚（rollback操作），可以回到前一个状态的值。</p>
<p>假设一个值从 1 被按顺序改成了 2、3、4，在回滚日志里面就会有类似下面的记录。</p>
<p><img src="../../images/%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86/2020519-20210412144201775-437692503.png" alt="img"></p>
<p>当前值是 4，但是在查询这条记录的时候，不同时刻启动的事务会有不同的 read-view。如图中看到的，在视图 A、B、C 里面，这一个记录的值分别是 1、2、4，同一条记录在系统中可以存在多个版本，就是数据库的多版本并发控制（MVCC）。对于 read-view A，要得到 1，就必须将当前值依次执行图中所有的回滚操作得到。</p>
<p>同时你会发现，即使现在有另外一个事务正在将 4 改成 5，这个事务跟 read-view A、B、C 对应的事务是不会冲突的。</p>
<p>尽量不要使用长事务，长事务意味着系统会存在很老的事务视图，由于这些事务随时可能访问数据库里面的任何数据，所以这个事务提交之前，数据库里面它可能用到的回滚记录都必须保留，这就会导致大量占用存储空间</p>
<p>提问：回滚操作日志（undo log）什么时候删除？</p>
<p>MySQL会判断当没有事务需要用到这些回滚日志的时候，回滚日志会被删除。</p>
<p>提问：什么时候不需要了？</p>
<p>当系统里没有比这个回滚日志更早的read-view的时候。</p>
<h3 id="事务的启动方式"><a href="#事务的启动方式" class="headerlink" title="事务的启动方式"></a>事务的启动方式</h3><p>事务启动方式</p>
<ol>
<li>显式启动事务语句，begin 或 start transaction。配套的提交语句是commit，回滚语句是rollback</li>
<li>set autocommit=0，这个命令会将线程的自动提交关掉，意味着如果你只执行一个 select 语句，这个事务就启动了，而且并不会自动提交。这个事务持续存在直到你主动执行 commit 或 rollback 语句，或者断开连接。可能会导致意外的长事务</li>
</ol>
<p>可以在 information_schema 库的 innodb_trx 这个表中查询长事务</p>
<h3 id="查看当前会话隔离级别"><a href="#查看当前会话隔离级别" class="headerlink" title="查看当前会话隔离级别"></a>查看当前会话隔离级别</h3><p>方式1</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;transaction_isolation&#x27;;</span><br><span class="line">+-----------------------+--------------+</span><br><span class="line">| Variable_name  | Value |</span><br><span class="line">+-----------------------+--------------+</span><br><span class="line">| transaction_isolation | SERIALIZABLE |</span><br><span class="line">+-----------------------+--------------+</span><br></pre></td></tr></table></figure>

<p>方式二</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| SERIALIZABLE            |</span><br><span class="line">+-------------------------+</span><br></pre></td></tr></table></figure>

<h3 id="设置隔离级别"><a href="#设置隔离级别" class="headerlink" title="设置隔离级别"></a>设置隔离级别</h3><p>方式1：通过set命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SET [GLOBAL|SESSION] TRANSACTIONISOLATIONLEVELlevel;</span><br><span class="line">其中level有4种值：</span><br><span class="line">level: &#123;</span><br><span class="line">     REPEATABLEREAD</span><br><span class="line">   | READCOMMITTED</span><br><span class="line">   | READUNCOMMITTED</span><br><span class="line">   | SERIALIZABLE</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>关键词：GLOBAL</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SETGLOBALTRANSACTIONISOLATIONLEVELlevel;</span><br><span class="line">* 只对执行完该语句之后产生的会话起作用</span><br><span class="line">* 当前已经存在的会话无效</span><br></pre></td></tr></table></figure>

<p>关键词：SESSION</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SET SESSION TRANSACTION ISOLATION LEVEL level;</span><br><span class="line">* 对当前会话的所有后续的事务有效</span><br><span class="line">* 该语句可以在已经开启的事务中间执行，但不会影响当前正在执行的事务</span><br><span class="line">* 如果在事务之间执行，则对后续的事务有效。</span><br></pre></td></tr></table></figure>

<p>无关键词</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SET TRANSACTION ISOLATION LEVEL level;</span><br><span class="line">* 只对当前会话中下一个即将开启的事务有效</span><br><span class="line">* 下一个事务执行完后，后续事务将恢复到之前的隔离级别</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">* 该语句不能在已经开启的事务中间执行，会报错</span><br></pre></td></tr></table></figure>

<p>方式2：通过服务启动项命令</p>
<p>可以修改启动参数transaction-isolation的值</p>
<p>比方说我们在启动服务器时指定了–transaction-isolation=READ UNCOMMITTED，那么事务的默认隔离级别就从原来的REPEATABLE READ变成了READ UNCOMMITTED。</p>
<h3 id="避免长事务"><a href="#避免长事务" class="headerlink" title="避免长事务"></a>避免长事务</h3><p>你现在知道了系统里面应该避免长事务，如果你是业务开发负责人同时也是数据库负责人，你会有什么方案来避免出现或者处理这种情况呢？</p>
<p>首先，从应用开发端来看：</p>
<ol>
<li>确认是否使用了 set autocommit=0。这个确认工作可以在测试环境中开展，把MySQL 的 general_log 开起来，然后随便跑一个业务逻辑，通过 general_log 的日志来确认。一般框架如果会设置这个值，也就会提供参数来控制行为，你的目标就是把它改成 1。</li>
<li>确认是否有不必要的只读事务。有些框架会习惯不管什么语句先用 begin/commit 框起来。我见过有些是业务并没有这个需要，但是也把好几个 select 语句放到了事务中。这种只读事务可以去掉。</li>
<li>业务连接数据库的时候，根据业务本身的预估，通过 SET MAX_EXECUTION_TIME 命令，来控制每个语句执行的最长时间，避免单个语句意外执行太长时间。</li>
</ol>
<p>其次，从数据库端来看：</p>
<ol>
<li>监控 information_schema.Innodb_trx 表，设置长事务阈值，超过就报警 / 或者 kill；</li>
<li>Percona 的 pt-kill 这个工具不错，推荐使用；</li>
<li>在业务功能测试阶段要求输出所有的 general_log，分析日志行为提前发现问题；</li>
<li>如果使用的是 MySQL 5.6 或者更新版本，把 innodb_undo_tablespaces 设置成2（或更大的值）。如果真的出现大事务导致回滚段过大，这样设置后清理起来更方便</li>
</ol>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
  </entry>
  <entry>
    <title>MySQL 忘记root用户密码怎么办？ 简单3步解决</title>
    <url>/mysql/bf4eb02/</url>
    <content><![CDATA[<blockquote>
<p>1、找到mysql目录下mysql数据库目录，我用的wamp环境,参考图中我的路径</p>
</blockquote>
<p><img src="../../images/%E6%89%BE%E5%9B%9Eroot%E5%AF%86%E7%A0%81/2020519-20200816004416612-484672045.png" alt="img"></p>
<blockquote>
<p>2、VSCode 打开二进制文件，我用了一个插件 - hexdump for VSCode，如图，打开user.MYD文件，并alt + 左键选中 框中的代码</p>
</blockquote>
<p><img src="../../images/%E6%89%BE%E5%9B%9Eroot%E5%AF%86%E7%A0%81/2020519-20200816004428029-818535179.png" alt="img"></p>
<blockquote>
<p>3、百度一个MD5加密的网站，将代码复制进去，点击解密，注意 各个字符间是没有空格的，因为刚才复制代码时，代码不在一行，粘贴上去字符间会有空格，删除即可</p>
</blockquote>
<p><img src="../../images/%E6%89%BE%E5%9B%9Eroot%E5%AF%86%E7%A0%81/2020519-20200816004441605-1789432193.png" alt="img"></p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
  </entry>
  <entry>
    <title>mysql 查询缓存</title>
    <url>/mysql/9170ec61/</url>
    <content><![CDATA[<p>转自　<a href="https://www.jianshu.com/p/5c3ddf9a454c">https://www.jianshu.com/p/5c3ddf9a454c</a></p>
<p>开启查询缓存后，查询语句的解析过程：</p>
<p>在解析一个查询语句之前，如果查询缓存是打开的，那么MySQL会优先检查这个查询是否命中查询缓存中的数据。如果当前的查询恰好命中了查询缓存，那么在返回查询结果之前MySQL会检查一次用户权限。若权限没有问题，MySQL会跳过所有其他阶段（解析、优化、执行等），直接从缓存中拿到结果并返回给客户端。这种情况下，查询不会被解析，不用生成执行计划，不会被执行。</p>
<h2 id="开启查询缓存"><a href="#开启查询缓存" class="headerlink" title="开启查询缓存"></a>开启查询缓存</h2><h3 id="设置使用查询缓存的方式"><a href="#设置使用查询缓存的方式" class="headerlink" title="设置使用查询缓存的方式"></a>设置使用查询缓存的方式</h3><p>使用 <strong>query_cache_type</strong> 变量来开启查询缓存，开启方式有三种：</p>
<ul>
<li><p><strong>ON</strong> : 正常缓存。表示在使用 SELECT 语句查询时，若没指定 SQL_NO_CACHE 或其他非确定性函数，则一般都会将查询结果缓存下来。</p>
</li>
<li><p><strong>DEMAND</strong> ：指定SQL_CACHE才缓存。表示在使用 SELECT 语句查询时，必须在该 SELECT 语句中指定 SQL_CACHE 才会将该SELECT语句的查询结果缓存下来。</p>
<blockquote>
<p>例如：select SQL_CACHE name from user where id = 15; #只有明确指定 SQL_CACHE 的SELECT语句，才会将查询结果缓存。</p>
</blockquote>
</li>
<li><p><strong>OFF</strong>： 关闭查询缓存。</p>
</li>
</ul>
<h4 id="立刻生效，重启服务失效"><a href="#立刻生效，重启服务失效" class="headerlink" title="立刻生效，重启服务失效"></a>立刻生效，重启服务失效</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; set global query_cache_type=1;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong></p>
<p>当my.cnf 中，query_cache_type = OFF ，启动mysql服务后，在mysql命令行中使用上面语句开启查询缓存，会报错：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ERROR 1651 (HY000): Query cache is disabled; restart the server with query_cache_type=1 to enable it</span><br></pre></td></tr></table></figure>

<p>遇到这种情况，是无法在mysql命令行中开启查询缓存的，必须修改my.cnf的query_cache_type = ON，然后重启mysql服务。</p>
<h4 id="永久生效"><a href="#永久生效" class="headerlink" title="永久生效"></a>永久生效</h4><p>修改 my.cnf :</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query_cache_type = ON</span><br></pre></td></tr></table></figure>

<p>重启 mysql 服务</p>
<h3 id="设置查询缓存的大小"><a href="#设置查询缓存的大小" class="headerlink" title="设置查询缓存的大小"></a>设置查询缓存的大小</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query_cache_size ：查询缓存的总体可用空间</span><br></pre></td></tr></table></figure>

<p> <strong>注意</strong></p>
<p>如果 query_cache_size=0 ，那即便你设置了 query_cache_type = ON，查询缓存仍然是无法工作的</p>
<h4 id="1-立刻生效，重启服务失效"><a href="#1-立刻生效，重启服务失效" class="headerlink" title="1. 立刻生效，重启服务失效"></a>1. 立刻生效，重启服务失效</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; set global query_cache_size=536870912;   #单位为字节，必须为1024的倍数</span><br></pre></td></tr></table></figure>

<h4 id="永久生效-1"><a href="#永久生效-1" class="headerlink" title="永久生效"></a>永久生效</h4><p>修改 my.cnf :</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query_cache_size = 500M   #支持单位：K,M,G</span><br></pre></td></tr></table></figure>

<p>重启 mysql 服务</p>
<h3 id="查询缓存相关参数"><a href="#查询缓存相关参数" class="headerlink" title="查询缓存相关参数"></a>查询缓存相关参数</h3><p>与缓存功能相关的服务器变量：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; SHOW GLOBAL VARIABLES LIKE &#x27;query_cache%&#x27;;</span><br><span class="line">+------------------------------+----------+</span><br><span class="line">| Variable_name                | Value    |</span><br><span class="line">+------------------------------+----------+</span><br><span class="line">| query_cache_limit            | 1048576  |</span><br><span class="line">| query_cache_min_res_unit     | 4096     |</span><br><span class="line">| query_cache_size             | 16777216 |</span><br><span class="line">| query_cache_strip_comments   | OFF      |</span><br><span class="line">| query_cache_type             | ON       |</span><br><span class="line">| query_cache_wlock_invalidate | OFF      |</span><br><span class="line">+------------------------------+----------+</span><br></pre></td></tr></table></figure>

<p>变量说明：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query_cache_limit :  MySQL能够缓存的最大查询结果；如果某查询的结果大小大于此值，则不会被缓存；</span><br><span class="line">query_cache_min_res_unit : 查询缓存中分配内存的最小单位；(注意：此值通常是需要调整的，此值被调整为接近所有查询结果的平均值是最好的)</span><br><span class="line">                           计算单个查询的平均缓存大小：（query_cache_size-Qcache_free_memory）/Qcache_queries_in_cache</span><br><span class="line">query_cache_size : 查询缓存的总体可用空间，单位为字节；其必须为1024的倍数；</span><br><span class="line">query_cache_type: 查询缓存类型；是否开启缓存功能，开启方式有三种&#123;ON|OFF|DEMAND&#125;；</span><br><span class="line">query_cache_wlock_invalidate : 当其它会话锁定此次查询用到的资源时，是否不能再从缓存中返回数据；（OFF表示可以从缓存中返回数据）</span><br></pre></td></tr></table></figure>

<h2 id="关闭查询缓存"><a href="#关闭查询缓存" class="headerlink" title="关闭查询缓存"></a>关闭查询缓存</h2><p>关闭查询缓存，需要以下两步：</p>
<p>\1. 将query_cache_type设置为OFF。</p>
<p>\2. 将查询缓存的大小设置为0，这样才会真正不缓存数据。</p>
<p><strong>注意</strong></p>
<p>即便query_cache_size = 0，但 query_cache_type 非 0 的话，在实际环境中，可能会频繁发生报错：Waiting for query cache lock 。</p>
<h2 id="查询缓存状态"><a href="#查询缓存状态" class="headerlink" title="查询缓存状态"></a>查询缓存状态</h2><h3 id="与缓存相关的状态变量"><a href="#与缓存相关的状态变量" class="headerlink" title="与缓存相关的状态变量"></a>与缓存相关的状态变量</h3><p>不能也无需修改这些状态数据。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; SHOW  GLOBAL STATUS  LIKE  &#x27;Qcache%&#x27;;</span><br><span class="line">+-------------------------+----------+</span><br><span class="line">| Variable_name            | Value   |</span><br><span class="line">+-------------------------+----------+</span><br><span class="line">| Qcache_free_blocks       | 1       | #查询缓存中的空闲块</span><br><span class="line">| Qcache_free_memory       | 16759656| #查询缓存中尚未使用的空闲内存空间</span><br><span class="line">| Qcache_hits              | 16      | #缓存命中次数</span><br><span class="line">| Qcache_inserts           | 71      | #向查询缓存中添加缓存记录的条数</span><br><span class="line">| Qcache_lowmem_prunes     | 0       | #表示因缓存满了而不得不清理部分缓存以存储新的缓存，这样操作的次数。若此数值过大，则表示缓存空间太小了。</span><br><span class="line">| Qcache_not_cached        | 57      | #没能被缓存的次数</span><br><span class="line">| Qcache_queries_in_cache  | 0       | #此时仍留在查询缓存的缓存个数</span><br><span class="line">| Qcache_total_blocks      | 1       | #共分配出去的块数</span><br><span class="line">+-------------------------+----------+</span><br></pre></td></tr></table></figure>

<h3 id="衡量缓存是否有效"><a href="#衡量缓存是否有效" class="headerlink" title="衡量缓存是否有效"></a>衡量缓存是否有效</h3><h4 id="缓存命中率的计算（次数）"><a href="#缓存命中率的计算（次数）" class="headerlink" title="缓存命中率的计算（次数）"></a>缓存命中率的计算（次数）</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; SHOW GLOBAL STATUS WHERE Variable_name=&#x27;Qcache_hits&#x27; OR Variable_name=&#x27;Com_select&#x27;;</span><br><span class="line">+---------------+-----------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-----------+</span><br><span class="line">| Com_select    | 279292490 | #非缓存查询次数</span><br><span class="line">| Qcache_hits   | 307366973 | # 缓存命中次数</span><br><span class="line">+---------------+-----------</span><br></pre></td></tr></table></figure>

<p>缓存命中率：Qcache_hits/(Qcache_hits+Com_select)</p>
<h4 id="“命中和写入”的比率"><a href="#“命中和写入”的比率" class="headerlink" title="“命中和写入”的比率"></a>“命中和写入”的比率</h4><p>这是另外一种衡量缓存是否有效的指标。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; SHOW GLOBAL STATUS WHERE Variable_name=&#x27;Qcache_hits&#x27; OR Variable_name=&#x27;Qcache_inserts&#x27;;</span><br><span class="line">+----------------+-----------+</span><br><span class="line">| Variable_name  | Value     |</span><br><span class="line">+----------------+-----------+</span><br><span class="line">| Qcache_hits | 307416113    | #缓存命中次数</span><br><span class="line">| Qcache_inserts | 108873957 | #向查询缓存中添加缓存记录的条数</span><br><span class="line">+----------------+-----------+</span><br></pre></td></tr></table></figure>

<p>“命中和写入”的比率: Qcache_hits/Qcache_inserts # 如果此比值大于3:1, 说明缓存也是有效的；如果高于10:1，相当理想；</p>
<p><a href="https://www.jianshu.com/p/5c3ddf9a454c">https://www.jianshu.com/p/5c3ddf9a454c</a></p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
  </entry>
  <entry>
    <title>PHP_MySQL 联表操作增删改查</title>
    <url>/mysql/d9d3bf06/</url>
    <content><![CDATA[<h4 id="联表查询"><a href="#联表查询" class="headerlink" title="联表查询"></a>联表查询</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select *,a.id from stu_message a inner join stu_detail b on a.id=b.sid</span><br></pre></td></tr></table></figure>

<h4 id="联表删除"><a href="#联表删除" class="headerlink" title="联表删除"></a>联表删除</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">delete a,b from stu_message a inner join stu_detail b on a.id=b.sid where a.id=&#123;$id&#125;</span><br></pre></td></tr></table></figure>

<h4 id="联表修改"><a href="#联表修改" class="headerlink" title="联表修改"></a>联表修改</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">update stu_message a inner join stu_detail b on a.id=b.sid</span><br><span class="line">set a.username=&#x27;&#123;$name&#125;&#x27;,a.sex=&#123;$sex&#125;,</span><br><span class="line">b.major=&#x27;&#123;$zhuanye&#125;&#x27;,b.address=&#x27;&#123;$address&#125;&#x27; where a.id=&#123;$id&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="多表插入-只能操作完一个表-再操作另一个"><a href="#多表插入-只能操作完一个表-再操作另一个" class="headerlink" title="多表插入(只能操作完一个表,再操作另一个)"></a>多表插入(只能操作完一个表,再操作另一个)</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 // 第一个sql语句</span><br><span class="line"> 2 $sql = &quot;insert into stu_message(id,username,sex,age,class) value(null,&#x27;&#123;$name&#125;&#x27;,&#123;$sex&#125;,&#123;$age&#125;,&#x27;&#123;$class&#125;&#x27;)&quot;;</span><br><span class="line"> 3 // 发送sql语句</span><br><span class="line"> 4 $res = mysqli_query($con,$sql);</span><br><span class="line"> 5 // 返回上一个insert语句插入的id值</span><br><span class="line"> 6 $sid = mysqli_insert_id($con);</span><br><span class="line"> 7 // 第二个sql语句</span><br><span class="line"> 8 $sql2 = &quot;insert into stu_detail(id,sid,major,address,tel,creatime) value(null,&#123;$sid&#125;,&#x27;&#123;$zhuanye&#125;&#x27;,&#x27;&#123;$address&#125;&#x27;,&#x27;&#123;$tel&#125;&#x27;,&#123;$creatime&#125;)&quot;;</span><br><span class="line"> 9 // 成功操作的结果数量,用来判断第一个sql语句插入成功与否</span><br><span class="line">10 $num = mysqli_affected_rows($con);</span><br><span class="line">11 if($num&gt;0)&#123;</span><br><span class="line">12   $res2 = mysqli_query($con,$sql2);   $num2 = mysqli_affected_rows($con);</span><br><span class="line">13   if($num2&gt;0)&#123;</span><br><span class="line">14     echo &quot;&lt;script&gt;alert(&#x27;信息创建成功&#x27;);</span><br><span class="line">15   &#125;else&#123;</span><br><span class="line">16     echo &quot;&lt;script&gt;alert(&#x27;信息修改失败&#x27;);</span><br><span class="line">17   &#125;</span><br><span class="line">18 &#125;else&#123;</span><br><span class="line">19   echo &quot;&lt;script&gt;alert(&#x27;信息修改失败&#x27;);</span><br><span class="line">20 &#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>mysql</category>
      </categories>
  </entry>
  <entry>
    <title>mysql 锁机制</title>
    <url>/mysql/4bf344cf/</url>
    <content><![CDATA[<p>感谢，转自 <a href="https://blog.csdn.net/user2025/article/details/115394211">https://blog.csdn.net/user2025/article/details/115394211</a></p>
<p><a href="https://www.cnblogs.com/crazylqy/p/7821481.html">https://www.cnblogs.com/crazylqy/p/7821481.html</a></p>
<h2 id="锁"><a href="#锁" class="headerlink" title="锁"></a>锁</h2><p>锁是计算机协调多个线程访问同一共享资源的机制，主要用于解决多线程访问同一共享资源的并发安全问题</p>
<p><img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210408173254229-722995063.png" alt="img"></p>
<h3 id="锁分类"><a href="#锁分类" class="headerlink" title="锁分类"></a>锁分类</h3><p>（1）从性能分为：乐观锁和悲观锁<br>MySQL中采用版本号控制，JVM中使用CAS</p>
<p>（2）从数据库操作类型分为：读锁（共享锁）、写锁（排他锁） 【读锁和写锁都属于悲观锁】</p>
<p>读锁（共享锁)：针对相同行记录，多个读操作可以同时进行，但任何事务都不能进行<br>写锁（排他锁)：获取排他锁的事务既能读数据，又能修改数据。获取到写锁的事务为完成之前，会阻塞其他事务获取写锁或读锁。<br>（3）从颗粒度划分为，表锁和行锁</p>
<p>注意：<br>（1）读锁、写锁都属于行级锁，即事务1 对商品A 获取写锁，和事务2对商品B 获取写锁互相不会阻塞的。<br>（2）如果sql语句使用了行锁，当SQL未使用索引而使用全表扫描的时候，行级锁会变成表锁。</p>
<p>（3）锁只有在执行commit或者rollback的时候才会释放，并且所有的锁都是在同一时刻被释放。<br>（4）Innodb引擎执行普通的修改、删除sql语句时，会给修改和删除的行加行锁。</p>
<h3 id="共享锁（读锁，读写互斥，读读互不影响）"><a href="#共享锁（读锁，读写互斥，读读互不影响）" class="headerlink" title="共享锁（读锁，读写互斥，读读互不影响）"></a>共享锁（读锁，读写互斥，读读互不影响）</h3><p>事务A使用共享锁获取了某条（或某些）记录时，事务B可以读取这些记录，可以继续添加共享锁，但是不能修改这些记录（当事务C对这些数据修改或删除时，会进入阻塞状态，直至锁等待超时或者事务A提交）</p>
<ul>
<li>如何使用共享锁和释放共享锁</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 加锁</span><br><span class="line">SELECT ... LOCK IN SHARE MODE</span><br><span class="line"># 释放锁</span><br><span class="line">commit;</span><br><span class="line">rollback;</span><br></pre></td></tr></table></figure>

<ul>
<li>作用</li>
</ul>
<p>SELECT … LOCK IN SHARE MODE在读取的若干行记录加共享锁（share lock），其他事务只能对这些行查询而不能修改这些记录。多个事务可以对相同的行记录加共享锁，因此获取了共享锁的事务不一定能修改行数据</p>
<ul>
<li>使用场景： 读取结果集的最新版本，同时防止其他事务产生更新该结果集</li>
</ul>
<p>　　　例如：并发下对商品库存的操作</p>
<h3 id="排他锁（写锁，独占锁）"><a href="#排他锁（写锁，独占锁）" class="headerlink" title="排他锁（写锁，独占锁）"></a>排他锁（写锁，独占锁）</h3><p>select … for update在对读取的行记录加排他锁，只允许获取到该排他锁的事务修改该行记录，防止其他事务对该行进行修改，就像普通的update语句执行时会加行锁一样。</p>
<ul>
<li>如何使用排他锁</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 加排他锁</span><br><span class="line">select ... for update //排他锁 </span><br><span class="line"></span><br><span class="line"># 释放锁</span><br><span class="line">commit;</span><br><span class="line">rollback;</span><br></pre></td></tr></table></figure>

<h3 id="共享锁和排他锁的区别"><a href="#共享锁和排他锁的区别" class="headerlink" title="共享锁和排他锁的区别"></a>共享锁和排他锁的区别</h3><p>（1）一旦某个事务获取了排他锁，其他事务就无法再获取排他锁。<br>多个事务可以对相同行数据加共享锁。<br>（2）给指定行加了共享锁的事务，不一定能修改该行数据，因为其他事务也可能对该行加了共享锁或排他锁； 给指定行加了排他锁的事务，则可以修改加了排他锁的该行数据</p>
<h2 id="表锁"><a href="#表锁" class="headerlink" title="表锁"></a>表锁</h2><p>使用表级锁定的主要是MyISAM，MEMORY，CSV等一些非事务性存储引擎。<br>表锁一般在数据迁移时使用。</p>
<h3 id="意向锁：意向共享锁和意向排他锁"><a href="#意向锁：意向共享锁和意向排他锁" class="headerlink" title="意向锁：意向共享锁和意向排他锁"></a>意向锁：意向共享锁和意向排他锁</h3><p>某行加共享锁的前提是：该行数据所在表会先获取到意向共享锁。<br>某行加排他锁的前提是：该行数据所在表会先获取到意向排他锁。<br>注意：意向共享锁和意向排他锁均是表锁，无法手动创建。</p>
<h3 id="为什么需要加入意向锁"><a href="#为什么需要加入意向锁" class="headerlink" title="为什么需要加入意向锁"></a>为什么需要加入意向锁</h3><p>意向锁是为了告知mysql该表已经存在数据被加锁，而不需要逐行扫描是否加锁，提搞加锁的效率。</p>
<h3 id="单个表锁定"><a href="#单个表锁定" class="headerlink" title="单个表锁定"></a>单个表锁定</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">lock tables saas.goods read,saas.account write;　　// 给saas库中的goods表加读锁,account表加写锁</span><br><span class="line">unlock tables;   //解锁</span><br></pre></td></tr></table></figure>

<h3 id="全局表锁定"><a href="#全局表锁定" class="headerlink" title="全局表锁定"></a>全局表锁定</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FLUSH TABLES WITH READ LOCK; 　　// 所有库所有表都被锁定只读</span><br><span class="line">unlock tables;         //解锁</span><br></pre></td></tr></table></figure>

<p>注意： 在客户端和数据库断开连接时，都会隐式的执行unlock tables。如果要让表锁定生效就必须一直保持连接。</p>
<p>表级锁：开销小，加锁快；不会出现死锁；锁定粒度大，发生锁冲突的概率最高，并发度最低；<br>行级锁：开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低，并发度也最高；</p>
<h2 id="行锁"><a href="#行锁" class="headerlink" title="行锁"></a>行锁</h2><ul>
<li>行锁是锁一行或者多行记录</li>
<li>MySQL的行锁是基于索引，行锁是加在索引上，而不是加在行记录上的。</li>
</ul>
<p><img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210409100658186-346155649.png" alt="img"></p>
<p> 如上图所示，数据库中有1个主键索引和1个普通索引，图中的sql语句是基于普通索引查询，命中4条记录，此时一把行锁就锁定两条记录，而其他事务修改这两条记录中的任意一条，都会一直阻塞【获取锁的事务没有执行commit之前】，下图就是上图没有执行commit语句时的情况。</p>
<p><img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210409100801205-1287488897.png" alt="img"></p>
<h3 id="行锁升级为表锁（行锁实际是给索引加锁，如果没用索引而全表扫描，则会给全表加锁）"><a href="#行锁升级为表锁（行锁实际是给索引加锁，如果没用索引而全表扫描，则会给全表加锁）" class="headerlink" title="行锁升级为表锁（行锁实际是给索引加锁，如果没用索引而全表扫描，则会给全表加锁）"></a>行锁升级为表锁（行锁实际是给索引加锁，如果没用索引而全表扫描，则会给全表加锁）</h3><p><img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210409101407210-672188965.png" alt="img"></p>
<p>上图中where条件中，虽然template_name建立普通索引，但使用or关键字，导致template_name的索引失效，从而进行了全表扫描，锁定了整张表。</p>
<h2 id="修改、删除某一行记录，且未提交事务时，该行会一直被行锁锁定"><a href="#修改、删除某一行记录，且未提交事务时，该行会一直被行锁锁定" class="headerlink" title="修改、删除某一行记录，且未提交事务时，该行会一直被行锁锁定"></a>修改、删除某一行记录，且未提交事务时，该行会一直被行锁锁定</h2><p><img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210409101629277-177412278.png" alt="img"></p>
<p> 窗口1中删除某一行，但没有提交。窗口2中更新该行会一直处于阻塞中。</p>
<p><img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210409101652472-47289790.png" alt="img"></p>
<h2 id="记录锁"><a href="#记录锁" class="headerlink" title="记录锁"></a>记录锁</h2><ul>
<li>行锁：行锁是命中索引，一把锁锁的是一张表的一条记录或多条记录</li>
<li>记录锁：记录锁是在行锁的衍生锁，记录锁锁的是表中的某一条记录，记录锁出现的条件必须是：精确命中索引，且索引是唯一索引（比如主键id、唯一索引列）</li>
</ul>
<h2 id="间隙锁"><a href="#间隙锁" class="headerlink" title="间隙锁"></a>间隙锁</h2><p><a href="https://www.cnblogs.com/crazylqy/p/7821481.html">经典参考文章</a></p>
<p>下表中（见图一），id为主键，number字段上有非唯一索引的二级索引，有什么方式可以让该表不能再插入number=5的记录？</p>
<p><img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210409150306894-517305722.png" alt="img"></p>
<p> 图一</p>
<p>根据上面生活中的例子，我们自然而然可以想到，只要控制几个点，number=5<strong>之前</strong>不能插入记录，number=5现有的记录<strong>之间</strong>不能再插入新的记录，number=5<strong>之后</strong>不能插入新的记录，那么新的number=5的记录将不能被插入进来。</p>
<p>那么，mysql是如何控制number=5之前，之中，之后不能有新的记录插入呢（防止幻读）？<br>答案是用间隙锁，在RR级别下，mysql通过间隙锁可以实现锁定number=5之前的间隙，number=5记录之间的间隙，number=5之后的间隙，从而使的新的记录无法被插入进来。</p>
<p><strong>间隙是怎么划分的？</strong></p>
<p>***注***：为了方面理解，我们规定（id=A,number=B）代表一条字段id=A,字段number=B的记录，（C，D）代表一个区间，代表C-D这个区间范围。</p>
<p>图一中，根据number列，我们可以分为几个区间：（无穷小，2），（2，4），（4，5），（5，5），（5,11），（11，无穷大）。<br>只要这些区间对应的两个临界记录中间可以插入记录，就认为区间对应的记录之间有间隙。<br>例如：区间（2，4）分别对应的临界记录是（id=1,number=2），（id=3，number=4），这两条记录中间可以插入（id=2,number=3）等记录，那么就认为（id=1,number=2）与（id=3，number=4）之间存在间隙。</p>
<p>很多人会问，那记录（id=6，number=5）与（id=8，number=5）之间有间隙吗？<br>答案是有的，（id=6，number=5）与（id=8，number=5）之间可以插入记录（id=7，number=5），因此（id=6,number=5）与（id=8,number=5）之间有间隙的，</p>
<p><strong>间隙锁锁定的区域</strong><br>根据检索条件向左寻找最靠近检索条件的记录值A，作为左区间，向右寻找最靠近检索条件的记录值B作为右区间，即锁定的间隙为（A，B）。<br>图一中，where number=5的话，那么间隙锁的区间范围为（4,11）；</p>
<p><strong>间隙锁的目的是为了防止幻读，其主要通过两个方面实现这个目的：</strong><br>（1）防止间隙内有新数据被插入<br>（2）防止已存在的数据，更新成间隙内的数据（例如防止numer=3的记录通过update变成number=5）</p>
<p><strong>innodb自动使用间隙锁的条件：</strong><br>（1）必须在RR级别下<br>（2）检索条件必须有索引（没有索引的话，mysql会全表扫描，那样会锁定整张表所有的记录，包括不存在的记录，此时其他事务不能修改不能删除不能添加）</p>
<p><strong>接下来，通过实际操作观察下间隙锁的作用范围</strong></p>
<p><strong><img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210409150529077-715410728.png" alt="img"></strong></p>
<p> 图三 表结构</p>
<p><strong>案例一：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">````</span><br><span class="line">session 1:</span><br><span class="line">start  transaction ;</span><br><span class="line">select  * from news where number=4 for update ;</span><br><span class="line"></span><br><span class="line">session 2:</span><br><span class="line">start  transaction ;</span><br><span class="line">insert into news value(2,4);#（阻塞）</span><br><span class="line">insert into news value(2,2);#（阻塞）</span><br><span class="line">insert into news value(4,4);#（阻塞）</span><br><span class="line">insert into news value(4,5);#（阻塞）</span><br><span class="line">insert into news value(7,5);#（执行成功）</span><br><span class="line">insert into news value(9,5);#（执行成功）</span><br><span class="line">insert into news value(11,5);#（执行成功）</span><br><span class="line">````</span><br></pre></td></tr></table></figure>

<p>检索条件number=4,向左取得最靠近的值2作为左区间，向右取得最靠近的5作为右区间，因此，session 1的间隙锁的范围（2，4），（4，5），如下图所示：</p>
<p><img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210409150612613-990032066.png" alt="img"></p>
<p>间隙锁锁定的区间为（2，4），（4，5），即记录（id=1,number=2）和记录（id=3,number=4）之间间隙会被锁定，记录（id=3,number=4）和记录（id=6,number=5）之间间隙被锁定。</p>
<p>因此记录（id=2,number=4），（id=2,number=2），（id=4,number=4），（id=4,number=5）正好处在（id=3,number=4）和（id=6,number=5）之间，所以插入不了，需要等待锁的释放，而记录(id=7,number=5)，（id=9,number=5），（id=11,number=5）不在上述锁定的范围内，因此都会插入成功。</p>
<hr>
<p><strong>案例二：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">````</span><br><span class="line">session 1:</span><br><span class="line">start  transaction ;</span><br><span class="line">select  * from news where number=13 for update ;</span><br><span class="line"></span><br><span class="line">session 2:</span><br><span class="line">start  transaction ;</span><br><span class="line">insert into news value(11,5);#(执行成功)</span><br><span class="line">insert into news value(12,11);#(执行成功)</span><br><span class="line">insert into news value(14,11);#(阻塞)</span><br><span class="line">insert into news value(15,12);#(阻塞)</span><br><span class="line">update news set id=14 where number=11;#(阻塞)</span><br><span class="line">update news set id=11 where number=11;#(执行成功)</span><br><span class="line">````</span><br></pre></td></tr></table></figure>

<p>检索条件number=13,向左取得最靠近的值11作为左区间，向右由于没有记录因此取得无穷大作为右区间，因此，session 1的间隙锁的范围（11，无穷大），如下图所示：</p>
<p><img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210409150744129-276196296.png" alt="img"></p>
<p>此表中没有number=13的记录的，innodb依然会为该记录左右两侧加间隙锁，间隙锁的范围（11，无穷大）。</p>
<p>有人会问，为啥update news set id=14 where number=11会阻塞，但是update news set id=11 where number=11却执行成功呢？</p>
<p>间隙锁采用在指定记录的前面和后面以及中间的间隙上加间隙锁的方式避免数据被插入，此图间隙锁锁定的区域是（11，无穷大），也就是记录（id=13,number=11）之后不能再插入记录，update news set id=14 where number=11这条语句如果执行的话，将会被插入到（id=13,number=11）的后面，也就是在区间（11，无穷大）之间，由于该区间被间隙锁锁定，所以只能阻塞等待，而update news set id=11 where number=11执行后是会被插入到（id=13,number=11）的记录前面，也就不在（11，无穷大）的范围内，所以无需等待，执行成功。</p>
<hr>
<p><strong>案例三：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">````</span><br><span class="line">session 1:</span><br><span class="line">start  transaction ;</span><br><span class="line">select  * from news where number=5 for update;</span><br><span class="line"></span><br><span class="line">session 2:</span><br><span class="line">start  transaction ;</span><br><span class="line">insert into news value(4,4);#(阻塞)</span><br><span class="line">insert into news value(4,5);#(阻塞)</span><br><span class="line">insert into news value(5,5);#(阻塞)</span><br><span class="line">insert into news value(7,11);#(阻塞)</span><br><span class="line">insert into news value(9,12);#(执行成功)</span><br><span class="line">insert into news value(12,11);#(阻塞)</span><br><span class="line">update news set number=5 where id=1;#(阻塞)</span><br><span class="line">update news set id=11 where number=11;#(阻塞)</span><br><span class="line">update news set id=2 where number=4 ;#（执行成功）</span><br><span class="line">update news set id=4 where number=4 ;#（阻塞）</span><br><span class="line">````</span><br></pre></td></tr></table></figure>

<p>检索条件number=5,向左取得最靠近的值4作为左区间，向右取得11为右区间，因此，session 1的间隙锁的范围（4，5），（5，11），如下图所示：</p>
<p> <img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210409150835015-1997305918.png" alt="img"></p>
<p>有人会问，为啥insert into news value(9,12)会执行成功？间隙锁采用在指定记录的前面和后面以及中间的间隙上加间隙锁的方式避免数据被插入，（id=9,number=12）很明显在记录（13,11）的后面，因此不再锁定的间隙范围内。</p>
<p>为啥update news set number=5 where id=1会阻塞？<br>number=5的记录的前面，后面包括中间都被封锁了，你这个update news set number=5 where id=1根本没法执行，因为innodb已经把你可以存放的位置都锁定了，因为只能等待。</p>
<p>同理，update news set id=11 where number=11由于记录（id=10,number=5）与记录（id=13,number=11）中间的间隙被封锁了，你这句sql也没法执行，必须等待，因为存放的位置被封锁了。</p>
<hr>
<p><strong>案例四：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">session 1:</span><br><span class="line">start  transaction;</span><br><span class="line">select * from news where number&gt;4 for update;</span><br><span class="line"></span><br><span class="line">session 2:</span><br><span class="line">start  transaction;</span><br><span class="line">update news set id=2 where number=4 ;#(执行成功)</span><br><span class="line">update news set id=4 where number=4 ;#(阻塞)</span><br><span class="line">update news set id=5 where number=5 ;#(阻塞)</span><br><span class="line">insert into news value(2,3);#(执行成功)</span><br><span class="line">insert into news value(null,13);#(阻塞)</span><br></pre></td></tr></table></figure>

<p>检索条件number&gt;4,向左取得最靠近的值4作为左区间，向右取无穷大，因此，session 1的间隙锁的范围（4，无穷大），如下图所示：</p>
<p><img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210409150918781-830809594.png" alt="img"></p>
<p> session2中之所以有些阻塞，有些执行成功，其实就是因为插入的区域被锁定，从而阻塞。</p>
<hr>
<h2 id="next-key-锁【-临键锁-】"><a href="#next-key-锁【-临键锁-】" class="headerlink" title="****next-key**锁【*临键锁*】"></a>****next-key**锁【*<em>临键锁*<em>】</em></em></h2><p>next-key锁其实包含了记录锁和间隙锁，即锁定一个范围，并且锁定记录本身，InnoDB默认加锁方式是next-key 锁。<br>上面的案例一session 1中的sql是：select * from news where number=4 for update ;<br>next-key锁锁定的范围为间隙锁+记录锁，即区间（2，4），（4，5）加间隙锁，同时number=4的记录加记录锁。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from news where number=4 for update ;</span><br></pre></td></tr></table></figure>

<p><img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210409151335569-724456932.png" alt="img"></p>
<p> next-key锁锁定的范围为间隙锁+记录锁，即区间（2，4），（4，5）加间隙锁，同时number=4的记录加记录锁，即next-key锁的锁定的范围为（2,4],(4,5]。</p>
<h2 id="记录锁、间隙锁、临间锁的区别"><a href="#记录锁、间隙锁、临间锁的区别" class="headerlink" title="记录锁、间隙锁、临间锁的区别"></a>记录锁、间隙锁、临间锁的区别</h2><p><img src="../../images/%E9%94%81%E6%9C%BA%E5%88%B6/2020519-20210409151616147-1230056989.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">update news  set number=0 where id&gt;15 </span><br></pre></td></tr></table></figure>

<p>sql默认加的是next-key锁。根据上图，next-key锁的区间为（-∞,1],（1,5]，（5,9]，（9，11]，(11,+∞），上面id&gt;15，实际上next-key锁是加在[11，+∞）这个范围内，而不是（15，+∞）这个范围内。注意：需要使用锁的字段必须加索引，因为锁是加在索引上的，没有索引则加的表锁。</p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
  </entry>
  <entry>
    <title>GitHub访问不了的解决方案</title>
    <url>/others/dcb107c3/</url>
    <content><![CDATA[<p>转自 <a href="https://blog.csdn.net/qq_29621089/article/details/115453593">https://blog.csdn.net/qq_29621089/article/details/115453593</a></p>
<h2 id="确定ip"><a href="#确定ip" class="headerlink" title="确定ip"></a>确定ip</h2><p>进入网址<a href="https://github.com.ipaddress.com/">https://github.com.ipaddress.com</a></p>
<p>查看GitHub的ip地址。</p>
<p><img src="../../images/github%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI5NjIxMDg5,size_16,color_FFFFFF,t_70-20211017042509619.png" alt="img"></p>
<blockquote>
<p>140.82.114.4 github.com</p>
</blockquote>
<h2 id="确定域名ip"><a href="#确定域名ip" class="headerlink" title="确定域名ip"></a>确定域名ip</h2><p>进入网址<a href="https://fastly.net.ipaddress.com/github.global.ssl.fastly.net">https://fastly.net.ipaddress.com/github.global.ssl.fastly.net</a></p>
<p><img src="../../images/github%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI5NjIxMDg5,size_16,color_FFFFFF,t_70.png" alt="img"></p>
<blockquote>
<p>199.232.69.194 github.global.ssl.fastly.net </p>
</blockquote>
<h2 id="确定静态资源ip"><a href="#确定静态资源ip" class="headerlink" title="确定静态资源ip"></a>确定静态资源ip</h2><p>进入网址<a href="https://github.com.ipaddress.com/assets-cdn.github.com">https://github.com.ipaddress.com/assets-cdn.github.com</a></p>
<p><img src="https://img-blog.csdnimg.cn/20210406090431827.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI5NjIxMDg5,size_16,color_FFFFFF,t_70" alt="img"></p>
<blockquote>
<p>185.199.108.153 assets-cdn.github.com<br>185.199.109.153 assets-cdn.github.com<br>185.199.110.153 assets-cdn.github.com<br>185.199.111.153 assets-cdn.github.com</p>
</blockquote>
<h2 id="修改hosts文件"><a href="#修改hosts文件" class="headerlink" title="修改hosts文件"></a>修改hosts文件</h2><p>Windows系统：打开C:\Windows\System32\drivers\etc</p>
<p>找到hosts文件</p>
<p><img src="../../images/github%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NlY3VsYXJf,size_16,color_FFFFFF,t_70.png" alt="img"></p>
<p>可以使用notepad打开，如果没有，右键选择打开方式为记事本即可。</p>
<p>在底部加入前三步获得的内容，即：</p>
<blockquote>
<p>#github<br>140.82.114.4 github.com<br>199.232.69.194 github.global.ssl.fastly.net<br>185.199.108.153 assets-cdn.github.com<br>185.199.109.153 assets-cdn.github.com<br>185.199.110.153 assets-cdn.github.com<br>185.199.111.153 assets-cdn.github.com</p>
</blockquote>
<h2 id="测试能否访问"><a href="#测试能否访问" class="headerlink" title="测试能否访问"></a>测试能否访问</h2><p>一般情况下就可以直接访问了，也有可能存在浏览器或者dns更新较慢的情况</p>
<p>对浏览器而言，可以关闭重启浏览器。</p>
<p>对DNS更新的话，可以打开cmd，输入 ipconfig/flushdns,如下</p>
<p><img src="../../images/github%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE/20210406090702677.png" alt="img"></p>
<p>现在可以试试ping功能能否到达了，能ping通说明问题已被解决</p>
<p><img src="../../images/github%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI5NjIxMDg5,size_16,color_FFFFFF,t_70-20211017042509497.png" alt="img"></p>
]]></content>
      <categories>
        <category>others</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>宝塔 ip多端口建站</title>
    <url>/others/518805b9/</url>
    <content><![CDATA[<h2 id="先假设一个域名"><a href="#先假设一个域名" class="headerlink" title="先假设一个域名"></a>先假设一个域名</h2><p>比如：<a href="http://www.test.com/">www.test.com</a></p>
<p>点击添加站点，先添加这个假设的站点</p>
<p><img src="../../images/%E5%AE%9D%E5%A1%94ip%E5%A4%9A%E7%AB%AF%E5%8F%A3%E5%BB%BA%E7%AB%99/2020519-20210115173454780-874155424.png" alt="img"></p>
<h2 id="修改当前站点的配置文件"><a href="#修改当前站点的配置文件" class="headerlink" title="修改当前站点的配置文件"></a>修改当前站点的配置文件</h2><p>设置 - 配置文件</p>
<p>将</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">listen 80;</span><br><span class="line">server_name  www.test.com;</span><br></pre></td></tr></table></figure>

<p>修改为</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">listen 7777; # 端口号，要确保已在阿里云和宝塔放行</span><br><span class="line">server_name 192.168.1.777; # 你自己的ip地址</span><br></pre></td></tr></table></figure>

<p><img src="../../images/%E5%AE%9D%E5%A1%94ip%E5%A4%9A%E7%AB%AF%E5%8F%A3%E5%BB%BA%E7%AB%99/2020519-20210115174201002-1456547288.png" alt="img"></p>
<h2 id="修改域名管理"><a href="#修改域名管理" class="headerlink" title="修改域名管理"></a>修改域名管理</h2><p>添加一个 192.168.1.777:7777</p>
<p>再把之前的 <a href="http://www.test.com/">www.test.com</a> 删掉即可</p>
<p>访问 192.168.1.777:7777 即可查看网站</p>
<p><img src="../../images/%E5%AE%9D%E5%A1%94ip%E5%A4%9A%E7%AB%AF%E5%8F%A3%E5%BB%BA%E7%AB%99/2020519-20210115174509060-374963790.png" alt="img"></p>
<p>按照此步骤就可以实现 ip多端口建站了</p>
]]></content>
      <categories>
        <category>others</category>
      </categories>
  </entry>
  <entry>
    <title>PHP $a &amp;&amp; $b = $c 和 $a || $b = $c语法</title>
    <url>/php/5e609c3c/</url>
    <content><![CDATA[<p>一、</p>
<p>$a &amp;&amp; $b = $c</p>
<p>解析： 如果 $a 为真, 就执行 $b = $c; 反之不执行</p>
<p>代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 &lt;?php</span><br><span class="line">2 // $a 为真</span><br><span class="line">3 $a = 1;</span><br><span class="line">4 $b = 0;</span><br><span class="line">5 $c = 3;</span><br><span class="line">6 $a &amp;&amp; $b = $c;</span><br><span class="line">7 echo &#x27;a=&#x27; . $a . &#x27;&lt;br/&gt;&#x27; . &#x27;b=&#x27; . $b . &#x27;&lt;br/&gt;&#x27; . &#x27;c=&#x27; . $c; // 结果：a=1 b=3 c=3</span><br><span class="line">1 &lt;?php</span><br><span class="line">2 // $a 为假</span><br><span class="line">3 $a = 0;</span><br><span class="line">4 $b = 0;</span><br><span class="line">5 $c = 3;</span><br><span class="line">6 $a &amp;&amp; $b = $c;</span><br><span class="line">7 echo &#x27;a=&#x27; . $a . &#x27;&lt;br/&gt;&#x27; . &#x27;b=&#x27; . $b . &#x27;&lt;br/&gt;&#x27; . &#x27;c=&#x27; . $c; // 结果：a=0 b=0 c=3</span><br></pre></td></tr></table></figure>

<p> 二、</p>
<p>$a || $b = $c</p>
<p>解析： 如果 $a 为假, 就执行 $b = $c; 反之不执行</p>
<p>代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 &lt;?php</span><br><span class="line">2 // $a 为真</span><br><span class="line">3 $a = 1;</span><br><span class="line">4 $b = 0;</span><br><span class="line">5 $c = 3;</span><br><span class="line">6 $a || $b = $c; // 没有执行$b = $c</span><br><span class="line">7 echo &#x27;a=&#x27; . $a . &#x27;&lt;br/&gt;&#x27; . &#x27;b=&#x27; . $b . &#x27;&lt;br/&gt;&#x27; . &#x27;c=&#x27; . $c; // 结果：a=1 b=0 c=3</span><br><span class="line">1 &lt;?php</span><br><span class="line">2 // $a 为假</span><br><span class="line">3 $a = 0;</span><br><span class="line">4 $b = 0;</span><br><span class="line">5 $c = 3;</span><br><span class="line">6 $a || $b = $c; // 执行了$b = $c</span><br><span class="line">7 echo &#x27;a=&#x27; . $a . &#x27;&lt;br/&gt;&#x27; . &#x27;b=&#x27; . $b . &#x27;&lt;br/&gt;&#x27; . &#x27;c=&#x27; . $c; // 结果：a=0 b=3 c=3</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>FastAdmin 后台将插件配置添加到菜单中</title>
    <url>/php/6e1f7f3f/</url>
    <content><![CDATA[<p>权限管理 - 菜单规则，新增，规则填写 addon/config/name/cms，cms为插件标识</p>
<p><a href="https://ask.fastadmin.net/question/16185.html">https://ask.fastadmin.net/question/16185.html</a></p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>PHP CURL的用法及上传图片</title>
    <url>/php/d5c2c145/</url>
    <content><![CDATA[<p>简介</p>
<p>curl是一个非常强大的开源库，可以使用URL的语法模拟浏览器来传输数据，支持多种协议，FTP, FTPS, HTTP, HTTPS, GOPHER, TELNET, DICT, FILE 以及 LDAP等协议都可以很好的支持，包括一些：HTTPS认证，HTTP POST方法，HTTP PUT方法，FTP上传，keyberos认证，HTTP上传，代理服务器，cookies，用户名/密码认证，下载文件断点续传，上传文件断点续传，http代理服务器管道，甚至它还支持IPv6，scoket5代理服务器，通过http代理服务器上传文件到FTP服务器等等，还可以抓取网页</p>
<p>您需要在php.ini中开启curl扩展才可以使用它</p>
<p>使用</p>
<p>基本步骤</p>
<p>先了解下它的基本步骤，分为4步</p>
<ol>
<li>初始化创建会话　　　curl_init()</li>
<li>设置属性　　　　　　curl_setopt()</li>
<li>执行并获取结果　　　curl_exec()</li>
<li>释放句柄　　　　　　curl_close()</li>
</ol>
<p>基础命令</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="comment">//创建了一个curl会话资源，成功返回一个句柄</span></span><br><span class="line"> <span class="number">2</span> <span class="variable">$ch</span> = curl_init(); </span><br><span class="line"> <span class="number">3</span> <span class="comment">//设置url</span></span><br><span class="line"> <span class="number">4</span> curl_setopt(<span class="variable">$ch</span>, CURLOPT_URL, <span class="string">&quot;baidu.com&quot;</span>); </span><br><span class="line"> <span class="number">5</span> <span class="comment">//如何处理获取的信息，1(true)：是以文件流的形式返回 0(false)：是直接echo输出</span></span><br><span class="line"> <span class="number">6</span> curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>); </span><br><span class="line"> <span class="number">7</span> <span class="comment">//设置为post请求，1：是 0：否</span></span><br><span class="line"> <span class="number">8</span> curl_setopt(<span class="variable">$ch</span>, CURLOPT_POST,<span class="number">1</span>);</span><br><span class="line"> <span class="number">9</span> <span class="comment">//请求默认超时时间</span></span><br><span class="line"><span class="number">10</span> curl_setopt(<span class="variable">$ch</span>, CURLOPT_TIMEOUT, <span class="number">60</span>);</span><br><span class="line"><span class="number">11</span> <span class="comment">//0 or false 为不检查证书 测试时候可以设置</span></span><br><span class="line"><span class="number">12</span> curl_setopt(<span class="variable">$ch</span>, CURLOPT_SSL_VERIFYHOST, <span class="literal">false</span>);</span><br><span class="line"><span class="number">13</span> <span class="comment">//post数据的时候进行数据提交，此命令略坑。</span></span><br><span class="line"><span class="number">14</span> <span class="comment">//使用 curl 并且参数为数据时，向服务器提交数据时，</span></span><br><span class="line"><span class="number">15</span> <span class="comment">//http头会发送content_type: application/x-www-form-urlencoded。</span></span><br><span class="line"><span class="number">16</span> <span class="comment">//这个是正常的网页&lt;form&gt;提交表单时，浏览器发送的头部。</span></span><br><span class="line"><span class="number">17</span> <span class="comment">//而 multipart/form-data 知道这是用于上传文件的表单。包括了 boundary 分界符，会多出很多字节。</span></span><br><span class="line"><span class="number">18</span> <span class="comment">//在没有需要上传文件的情况下，尽量对 post 提交的数据进行 http_build_query 处理,再发送</span></span><br><span class="line"><span class="number">19</span> curl_setopt(<span class="variable">$ch</span>, CURLOPT_POSTFIELDS, <span class="variable">$data</span>);</span><br><span class="line"><span class="number">20</span> <span class="comment">// 执行，然后将响应结果存入$output变量</span></span><br><span class="line"><span class="number">21</span> <span class="variable">$output</span> = curl_exec(<span class="variable">$ch</span>); </span><br><span class="line"><span class="number">22</span> <span class="comment">//捕获句柄执行错误信息</span></span><br><span class="line"><span class="number">23</span> <span class="variable">$error</span> = curl_error(<span class="variable">$ch</span>);</span><br><span class="line"><span class="number">24</span> <span class="comment">// 关闭这个curl会话资源</span></span><br><span class="line"><span class="number">25</span> curl_close(<span class="variable">$ch</span>);    </span><br></pre></td></tr></table></figure>

<p>curl_setopt可以用curl_setopt_array()代替，并将参数以数组的形式传入</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="variable">$opts</span> = <span class="keyword">array</span>(</span><br><span class="line"><span class="number">2</span>     CURLOPT_TIMEOUT =&gt; <span class="number">60</span>,</span><br><span class="line"><span class="number">3</span>     CURLOPT_RETURNTRANSFER =&gt; <span class="number">1</span>,</span><br><span class="line"><span class="number">4</span>     ...</span><br><span class="line"><span class="number">5</span> );</span><br><span class="line"><span class="number">6</span> curl_setopt_array(<span class="variable">$ch</span>, <span class="variable">$opts</span>);</span><br></pre></td></tr></table></figure>

<p>GET请求</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> 2  * GET请求</span></span><br><span class="line"><span class="comment"> 3  * <span class="doctag">@param</span> string $url 请求路径</span></span><br><span class="line"><span class="comment"> 4  * <span class="doctag">@param</span> array $params 请求参数数组</span></span><br><span class="line"><span class="comment"> 5  * <span class="doctag">@param</span> int $timeout 超时时间</span></span><br><span class="line"><span class="comment"> 6  */</span></span><br><span class="line"> <span class="number">7</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">curlGet</span>(<span class="params"><span class="variable">$url</span>, <span class="variable">$params</span> = [], <span class="variable">$timeout</span> = <span class="number">5</span></span>)</span></span><br><span class="line"><span class="function"> 8 </span>&#123;</span><br><span class="line"> <span class="number">9</span>     <span class="variable">$url</span> = <span class="variable">$url</span> . <span class="string">&quot;?&quot;</span> . http_build_query(<span class="variable">$params</span>);</span><br><span class="line"><span class="number">10</span>     <span class="variable">$ch</span> = curl_init(<span class="variable">$url</span>);</span><br><span class="line"><span class="number">11</span>     curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="number">12</span>     curl_setopt(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line"><span class="number">13</span>     curl_setopt(<span class="variable">$ch</span>, CURLOPT_TIMEOUT, <span class="variable">$timeout</span>);</span><br><span class="line"><span class="number">14</span>     <span class="variable">$output</span>  = curl_exec(<span class="variable">$ch</span>);</span><br><span class="line"><span class="number">15</span>     <span class="keyword">if</span> (<span class="variable">$output</span> === <span class="literal">FALSE</span>) &#123;</span><br><span class="line"><span class="number">16</span>         <span class="keyword">echo</span> <span class="string">&quot;CURL GET Error:&quot;</span> . curl_error(<span class="variable">$ch</span>);</span><br><span class="line"><span class="number">17</span>     &#125;</span><br><span class="line"><span class="number">18</span>     curl_close(<span class="variable">$ch</span>);</span><br><span class="line"><span class="number">19</span>     <span class="keyword">return</span> <span class="variable">$output</span>;</span><br><span class="line"><span class="number">20</span> &#125;</span><br></pre></td></tr></table></figure>

<p>POST请求</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> 2  * POST</span></span><br><span class="line"><span class="comment"> 3  * <span class="doctag">@param</span> string $url 请求路径</span></span><br><span class="line"><span class="comment"> 4  * <span class="doctag">@param</span> array $params 请求参数数组</span></span><br><span class="line"><span class="comment"> 5  * <span class="doctag">@param</span> int $timeout 超时时间</span></span><br><span class="line"><span class="comment"> 6  */</span></span><br><span class="line"> <span class="number">7</span> <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">curlPost</span>(<span class="params"><span class="variable">$url</span>, <span class="variable">$params</span> = [], <span class="variable">$timeout</span> = <span class="number">5</span></span>)</span></span><br><span class="line"><span class="function"> 8 </span>&#123;</span><br><span class="line"> <span class="number">9</span>     <span class="variable">$curl</span> = curl_init(<span class="variable">$url</span>);</span><br><span class="line"><span class="number">10</span>     curl_setopt(<span class="variable">$curl</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line"><span class="number">11</span>     curl_setopt(<span class="variable">$curl</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="number">12</span>     curl_setopt(<span class="variable">$curl</span>, CURLOPT_POST, <span class="number">1</span>);</span><br><span class="line"><span class="number">13</span>     curl_setopt(<span class="variable">$curl</span>, CURLOPT_POSTFIELDS, http_build_query(<span class="variable">$params</span>));</span><br><span class="line"><span class="number">14</span>     <span class="variable">$data</span> = curl_exec(<span class="variable">$curl</span>);</span><br><span class="line"><span class="number">15</span>     curl_close(<span class="variable">$curl</span>);</span><br><span class="line"><span class="number">16</span>     <span class="keyword">return</span> <span class="variable">$data</span>;</span><br><span class="line"><span class="number">17</span> &#125;</span><br></pre></td></tr></table></figure>

<p>上传图片</p>
<p>这里需要注意一个PHP版本的坑</p>
<p>在5.6版本以下在图片路径地址前加上@符号即可，而PHP5.6版本则需要使用新得方法new CURLFile(图片路径);方可执行。</p>
<p>或者还是用原来的方法在CURLOPT_POSTFIELDS设置项前加上CURLOPT_SAFE_UPLOAD设置项，设为FALSE。即curl_setopt($ch, CURLOPT_SAFE_UPLOAD, false);</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> 2  * 上传图片</span></span><br><span class="line"><span class="comment"> 3  * <span class="doctag">@param</span> string $url 上传地址</span></span><br><span class="line"><span class="comment"> 4  * <span class="doctag">@param</span> string $params 要上传的图片的路径</span></span><br><span class="line"><span class="comment"> 5  */</span></span><br><span class="line"> <span class="number">6</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">uploadImg</span>(<span class="params"><span class="variable">$url</span>, <span class="variable">$path</span></span>)</span></span><br><span class="line"><span class="function"> 7 </span>&#123;</span><br><span class="line"> <span class="number">8</span>     <span class="variable">$curlPost</span> = <span class="keyword">array</span>(<span class="string">&#x27;file&#x27;</span> =&gt; <span class="keyword">new</span> CURLFile(realpath(<span class="variable">$path</span>)));</span><br><span class="line"> <span class="number">9</span>     <span class="variable">$ch</span> = curl_init();</span><br><span class="line"><span class="number">10</span>     curl_setopt(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span>);</span><br><span class="line"><span class="number">11</span>     curl_setopt(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line"><span class="number">12</span>     curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="number">13</span>     curl_setopt(<span class="variable">$ch</span>, CURLOPT_POST, <span class="number">1</span>); <span class="comment">//POST提交</span></span><br><span class="line"><span class="number">14</span>     curl_setopt(<span class="variable">$ch</span>, CURLOPT_POSTFIELDS, <span class="variable">$curlPost</span>);</span><br><span class="line"><span class="number">15</span>     <span class="variable">$data</span> = curl_exec(<span class="variable">$ch</span>);</span><br><span class="line"><span class="number">16</span>     curl_close(<span class="variable">$ch</span>);</span><br><span class="line"><span class="number">17</span>     <span class="keyword">return</span> <span class="variable">$data</span>;</span><br><span class="line"><span class="number">18</span> &#125;</span><br></pre></td></tr></table></figure>

<p>另一台服务器接收传过来的图片并上传到服务器</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="variable">$path</span> = <span class="string">&#x27;img/&#x27;</span> . date(<span class="string">&#x27;Ymd&#x27;</span>); <span class="comment">// 上传路径</span></span><br><span class="line"> <span class="number">2</span> <span class="keyword">if</span> (is_uploaded_file(<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>])) &#123; <span class="comment">// 是否有上传文件</span></span><br><span class="line"> <span class="number">3</span>     <span class="variable">$ext</span> = pathinfo(<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;name&#x27;</span>], PATHINFO_EXTENSION); <span class="comment">// 获取后缀名</span></span><br><span class="line"> <span class="number">4</span>     <span class="variable">$newName</span> = time() . mt_rand() . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$ext</span>; <span class="comment">// 用时间戳和随机数取名</span></span><br><span class="line"> <span class="number">5</span>     <span class="keyword">if</span> (!file_exists(<span class="variable">$path</span>)) &#123; <span class="comment">// 检测目录是否存在</span></span><br><span class="line"> <span class="number">6</span>         <span class="keyword">if</span> (!mkdir(<span class="variable">$path</span>, <span class="number">0775</span>, <span class="literal">true</span>)) &#123; <span class="comment">// 创建目录</span></span><br><span class="line"> <span class="number">7</span>             <span class="keyword">echo</span> <span class="string">&#x27;创建目录失败&#x27;</span>;</span><br><span class="line"> <span class="number">8</span>             <span class="keyword">exit</span>;</span><br><span class="line"> <span class="number">9</span>         &#125;;</span><br><span class="line"><span class="number">10</span>     &#125;</span><br><span class="line"><span class="number">11</span>     <span class="keyword">if</span> (move_uploaded_file(<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>], <span class="variable">$path</span> . <span class="string">&#x27;/&#x27;</span> . <span class="variable">$newName</span>)) &#123; <span class="comment">// 将上传的文件移动到新位置</span></span><br><span class="line"><span class="number">12</span>         <span class="keyword">echo</span> <span class="string">&#x27;上传成功&#x27;</span>;</span><br><span class="line"><span class="number">13</span>     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="number">14</span>         <span class="keyword">echo</span> <span class="string">&#x27;上传失败&#x27;</span>;</span><br><span class="line"><span class="number">15</span>     &#125;</span><br><span class="line"><span class="number">16</span> &#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>PHP static 延迟静态绑定</title>
    <url>/php/d7fe6b68/</url>
    <content><![CDATA[<p>首先看这种写法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 &lt;?php</span><br><span class="line"> 2 abstract class A</span><br><span class="line"> 3 &#123;</span><br><span class="line"> 4     public static function create(): A</span><br><span class="line"> 5     &#123;</span><br><span class="line"> 6         return new self();</span><br><span class="line"> 7     &#125;</span><br><span class="line"> 8 &#125;</span><br><span class="line"> 9 class B extends A</span><br><span class="line">10 &#123;</span><br><span class="line">11 &#125;</span><br><span class="line">12 B::create();</span><br></pre></td></tr></table></figure>

<p>会成功实例化B吗？不会的，并且还会报错</p>
<hr>
<p>　　Error: Cannot instantiate abstract class A in D:\wamp64\www\test.php on line <em>6</em></p>
<hr>
<p>实际上，self对该类的作用与$this对对象的作用不完全相同。self不是指调用上下文，而是指解析上下文。因此，如果运行上面的例子，会报错，无法实例化抽象类</p>
<p>也就是说，self指向了定义了create()方法的A抽象类，而不是发送调用的B。在PHP5.3之前，这都是一种严格的限制，也出现了许多笨拙的解决方法。PHP5.3中引入了一种叫做延迟静态绑定的概念，最明显的特征就是关键字static。static与self类似，区别在于前者引用的是被调用的类。</p>
<p>这样写就能在静态上下文中利用继承关系了：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 &lt;?php</span><br><span class="line"> 2 abstract class A</span><br><span class="line"> 3 &#123;</span><br><span class="line"> 4     public static function create(): A</span><br><span class="line"> 5     &#123;</span><br><span class="line"> 6         return new static();</span><br><span class="line"> 7     &#125;</span><br><span class="line"> 8 &#125;</span><br><span class="line"> 9 class B extends A</span><br><span class="line">10 &#123;</span><br><span class="line">11 &#125;</span><br><span class="line">12 B::create();</span><br></pre></td></tr></table></figure>

<p>2.</p>
<p>static关键字的用处可不止实例化而已。和self、parent一样，static还可以被用作静态方法调用的标识符，在非静态上下文中也一样。看代码：</p>
<p>A类中有分类group的概念，默认情况下是”default“类，我也可以在类的继承层次的分支中改变这个类别</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 abstract class A</span><br><span class="line"> 2 &#123;</span><br><span class="line"> 3     private $group;</span><br><span class="line"> 4     public function __construct()</span><br><span class="line"> 5     &#123;</span><br><span class="line"> 6         $this-&gt;group = static::getGroup();</span><br><span class="line"> 7     &#125;</span><br><span class="line"> 8     public static function create(): A</span><br><span class="line"> 9     &#123;</span><br><span class="line">10         return new static();</span><br><span class="line">11     &#125;</span><br><span class="line">12     public static function getGroup()</span><br><span class="line">13     &#123;</span><br><span class="line">14         return &#x27;default&#x27;;</span><br><span class="line">15     &#125;</span><br><span class="line">16 &#125;</span><br><span class="line">17 </span><br><span class="line">18 class B extends A</span><br><span class="line">19 &#123;</span><br><span class="line">20 &#125;</span><br><span class="line">21 </span><br><span class="line">22 class C extends A</span><br><span class="line">23 &#123;</span><br><span class="line">24     public static function getGroup()</span><br><span class="line">25     &#123;</span><br><span class="line">26         return &#x27;document&#x27;;</span><br><span class="line">27     &#125;</span><br><span class="line">28 &#125;</span><br><span class="line">29 </span><br><span class="line">30 class D extends C</span><br><span class="line">31 &#123;</span><br><span class="line">32 &#125;</span><br><span class="line">33 var_dump(B::create(), C::create(), D::create());</span><br></pre></td></tr></table></figure>

<p>我在A类中加入了一个构造方法，他会使用static关键字调用静态方法getGroup()。A类提供了“default”类别的实现。另外我还创建了一个新的类D，它继承自C。上面例子的输出结果为：</p>
<hr>
<p>D:\wamp64\www\test.php:34:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">object(B)[1]</span><br><span class="line">  private &#x27;group&#x27; </span><br></pre></td></tr></table></figure>

<p>(A)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">=&gt; </span><br></pre></td></tr></table></figure>

<p>string</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#x27;default&#x27; (length=7)</span><br></pre></td></tr></table></figure>

<p>D:\wamp64\www\test.php:34:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">object(C)[2]</span><br><span class="line">  private &#x27;group&#x27; </span><br></pre></td></tr></table></figure>

<p>(A)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">=&gt; </span><br></pre></td></tr></table></figure>

<p>string</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#x27;document&#x27; (length=8)</span><br></pre></td></tr></table></figure>

<p>D:\wamp64\www\test.php:35:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">object(D)[1]</span><br><span class="line">  private &#x27;group&#x27; </span><br></pre></td></tr></table></figure>

<p>(A)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">=&gt; </span><br></pre></td></tr></table></figure>

<p>string</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#x27;document&#x27; (length=8)</span><br></pre></td></tr></table></figure>

<hr>
<p>对于D类，会先从被调用的D类自身开始找。由于它没有提供实现，C类中的getGroup()方法会被调用。</p>
<p>注意，假如把A类中 return new static() 改为 return new self()，那结果可就不一样了，就都会变成default了，因为使用self关键字的话，只有在实例化A(而不是D)时才能找到getGroup()</p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>PHP call_user_func() 和 call_user_func_array()</title>
    <url>/php/6cbf48b/</url>
    <content><![CDATA[<p>一、 call_user_func</p>
<p>作用</p>
<p>把第一个参数作为回调函数调用</p>
<p>说明</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">call_user_func ( <span class="keyword">callable</span> <span class="variable">$callback</span> [, <span class="keyword">mixed</span> <span class="variable">$parameter</span> [, <span class="keyword">mixed</span> $... ]] ) : <span class="keyword">mixed</span></span><br></pre></td></tr></table></figure>

<p>第一个参数 callback 是被调用的回调函数，其余参数是回调函数的参数</p>
<p>用法</p>
<p>1.基本用法</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="comment">// 1.基本用法</span></span><br><span class="line"><span class="number">2</span> <span class="function"><span class="keyword">function</span> <span class="title">barber</span>(<span class="params"><span class="variable">$type</span></span>)</span></span><br><span class="line"><span class="function">3 </span>&#123;</span><br><span class="line"><span class="number">4</span>     <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">&#123;$type&#125;</span>&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="number">5</span> &#125;</span><br><span class="line"><span class="number">6</span> call_user_func(<span class="string">&#x27;barber&#x27;</span>, <span class="string">&quot;mushroom&quot;</span>);</span><br><span class="line"><span class="number">7</span> call_user_func(<span class="string">&#x27;barber&#x27;</span>, <span class="string">&quot;shave&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>2.使用命名空间</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="meta">&lt;?php</span></span><br><span class="line"> <span class="number">2</span> </span><br><span class="line"> <span class="number">3</span> <span class="keyword">namespace</span> <span class="title">Foobar</span>;</span><br><span class="line"> <span class="number">4</span> </span><br><span class="line"> <span class="number">5</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class"> 6 </span>&#123;</span><br><span class="line"> <span class="number">7</span>     <span class="built_in">static</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"><span class="variable">$name</span></span>)</span></span><br><span class="line"><span class="function"> 8     </span>&#123;</span><br><span class="line"> <span class="number">9</span>         <span class="keyword">print</span> <span class="string">&quot;I&#x27;m <span class="subst">&#123;$name&#125;</span>.&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="number">10</span>     &#125;</span><br><span class="line"><span class="number">11</span> &#125;</span><br><span class="line"><span class="number">12</span> </span><br><span class="line"><span class="number">13</span> call_user_func(<span class="keyword">__NAMESPACE__</span> . <span class="string">&#x27;\Foo::test&#x27;</span>, <span class="string">&#x27;Sim&#x27;</span>); <span class="comment">// 第一种</span></span><br><span class="line"><span class="number">14</span> call_user_func(<span class="keyword">array</span>(<span class="keyword">__NAMESPACE__</span> . <span class="string">&#x27;\Foo&#x27;</span>, <span class="string">&#x27;test&#x27;</span>), <span class="string">&#x27;Tony&#x27;</span>); <span class="comment">// 第二种</span></span><br></pre></td></tr></table></figure>

<p>3.调用类中方法</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="comment">// 3.调用类中方法</span></span><br><span class="line"> <span class="number">2</span> <span class="class"><span class="keyword">class</span> <span class="title">myclass</span></span></span><br><span class="line"><span class="class"> 3 </span>&#123;</span><br><span class="line"> <span class="number">4</span>     <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">say_hello</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"> 5     </span>&#123;</span><br><span class="line"> <span class="number">6</span>         <span class="keyword">echo</span> <span class="string">&quot;Hello!\n&quot;</span>;</span><br><span class="line"> <span class="number">7</span>     &#125;</span><br><span class="line"> <span class="number">8</span>     <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">say_bye</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"> 9     </span>&#123;</span><br><span class="line"><span class="number">10</span>         <span class="keyword">echo</span> <span class="string">&quot;Bye!\n&quot;</span>;</span><br><span class="line"><span class="number">11</span>     &#125;</span><br><span class="line"><span class="number">12</span> &#125;</span><br><span class="line"><span class="number">13</span> </span><br><span class="line"><span class="number">14</span> <span class="comment">// 3.1静态方法的调用方式</span></span><br><span class="line"><span class="number">15</span> <span class="variable">$classname</span> = <span class="string">&quot;myclass&quot;</span>;</span><br><span class="line"><span class="number">16</span> </span><br><span class="line"><span class="number">17</span> call_user_func(<span class="keyword">array</span>(<span class="variable">$classname</span>, <span class="string">&#x27;say_hello&#x27;</span>));</span><br><span class="line"><span class="number">18</span> call_user_func(<span class="variable">$classname</span> . <span class="string">&#x27;::say_hello&#x27;</span>); <span class="comment">// As of 5.2.3</span></span><br><span class="line"><span class="number">19</span> </span><br><span class="line"><span class="number">20</span> <span class="variable">$myobject</span> = <span class="keyword">new</span> myclass();</span><br><span class="line"><span class="number">21</span> </span><br><span class="line"><span class="number">22</span> call_user_func(<span class="keyword">array</span>(<span class="variable">$myobject</span>, <span class="string">&#x27;say_hello&#x27;</span>));</span><br><span class="line"><span class="number">23</span> </span><br><span class="line"><span class="number">24</span> <span class="comment">// 3.2非静态方法的调用方式</span></span><br><span class="line"><span class="number">25</span> <span class="comment">//当php &lt;5.3时，可以如下使用，此时会把 b()方法当作是a的一个静态方式。</span></span><br><span class="line"><span class="number">26</span> call_user_func(<span class="keyword">array</span>(<span class="string">&quot;myclass&quot;</span>, <span class="string">&quot;say_bye&quot;</span>));</span><br><span class="line"><span class="number">27</span>  </span><br><span class="line"><span class="number">28</span> <span class="comment">//当php &gt;=5.3时，类的公开的非静态的方法必须在类实例化后方可被调用，否则会提示Strict性错误（为了兼容先前及以后的版本，还是用对象方法传入）。</span></span><br><span class="line"><span class="number">29</span> <span class="variable">$obj</span> = <span class="keyword">new</span> myclass;</span><br><span class="line"><span class="number">30</span> call_user_func(<span class="keyword">array</span>(<span class="variable">$obj</span>, <span class="string">&quot;say_bye&quot;</span>)); <span class="comment">// bye</span></span><br></pre></td></tr></table></figure>

<p>二、call_user_func_array</p>
<p>和call_user_func很相似，不同点是把一个数组参数作为回调函数的参数</p>
<p>使用</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="comment">// 1.使用</span></span><br><span class="line"> <span class="number">2</span> <span class="function"><span class="keyword">function</span> <span class="title">foobar</span>(<span class="params"><span class="variable">$arg</span>, <span class="variable">$arg2</span></span>)</span></span><br><span class="line"><span class="function"> 3 </span>&#123;</span><br><span class="line"> <span class="number">4</span>     <span class="keyword">echo</span> <span class="keyword">__FUNCTION__</span>, <span class="string">&quot; got <span class="subst">$arg</span> and <span class="subst">$arg2</span>&lt;br/&gt;&quot;</span>;</span><br><span class="line"> <span class="number">5</span> &#125;</span><br><span class="line"> <span class="number">6</span> <span class="class"><span class="keyword">class</span> <span class="title">foo</span></span></span><br><span class="line"><span class="class"> 7 </span>&#123;</span><br><span class="line"> <span class="number">8</span>     <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"><span class="variable">$arg</span>, <span class="variable">$arg2</span></span>)</span></span><br><span class="line"><span class="function"> 9     </span>&#123;</span><br><span class="line"><span class="number">10</span>         <span class="keyword">echo</span> <span class="keyword">__METHOD__</span>, <span class="string">&quot; got <span class="subst">$arg</span> and <span class="subst">$arg2</span>&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="number">11</span>     &#125;</span><br><span class="line"><span class="number">12</span>     <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">bar2</span>(<span class="params"><span class="variable">$arg</span>, <span class="variable">$arg2</span></span>)</span></span><br><span class="line"><span class="function">13     </span>&#123;</span><br><span class="line"><span class="number">14</span>         <span class="keyword">echo</span> <span class="variable">$arg</span> . <span class="string">&#x27; &#x27;</span> . <span class="variable">$arg2</span> . <span class="string">&#x27;&lt;br/&gt;&#x27;</span>;</span><br><span class="line"><span class="number">15</span>     &#125;</span><br><span class="line"><span class="number">16</span> &#125;</span><br><span class="line"><span class="number">17</span> </span><br><span class="line"><span class="number">18</span> <span class="comment">// 1.1 调用函数</span></span><br><span class="line"><span class="number">19</span> call_user_func_array(<span class="string">&quot;foobar&quot;</span>, <span class="keyword">array</span>(<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>));</span><br><span class="line"><span class="number">20</span> </span><br><span class="line"><span class="number">21</span> <span class="comment">// 1.2 调用类中方法</span></span><br><span class="line"><span class="number">22</span> <span class="comment">// 1.2.1 调用非静态方法</span></span><br><span class="line"><span class="number">23</span> <span class="comment">// php&lt;5.3时，非静态的方法可直接传入类名</span></span><br><span class="line"><span class="number">24</span> call_user_func_array(<span class="keyword">array</span>(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>), <span class="keyword">array</span>(<span class="string">&quot;three&quot;</span>, <span class="string">&quot;four&quot;</span>));</span><br><span class="line"><span class="number">25</span> </span><br><span class="line"><span class="number">26</span> <span class="comment">//php&gt;=5.3时，非静态的方法 只有在类被实例化后方可调用，否则会提示Strict性错误</span></span><br><span class="line"><span class="number">27</span> <span class="variable">$foo</span> = <span class="keyword">new</span> foo;</span><br><span class="line"><span class="number">28</span> call_user_func_array(<span class="keyword">array</span>(<span class="variable">$foo</span>, <span class="string">&quot;bar&quot;</span>), <span class="keyword">array</span>(<span class="string">&quot;three&quot;</span>, <span class="string">&quot;four&quot;</span>));</span><br><span class="line"><span class="number">29</span> </span><br><span class="line"><span class="number">30</span> <span class="comment">// 1.2.2 调用静态方法</span></span><br><span class="line"><span class="number">31</span> call_user_func_array(<span class="keyword">array</span>(<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;bar2&#x27;</span>), <span class="keyword">array</span>(<span class="string">&quot;five&quot;</span>, <span class="string">&quot;six&quot;</span>));</span><br><span class="line"><span class="number">32</span> <span class="comment">//或</span></span><br><span class="line"><span class="number">33</span> call_user_func_array(<span class="string">&#x27;foo::bar2&#x27;</span>, <span class="keyword">array</span>(<span class="string">&quot;five&quot;</span>, <span class="string">&quot;six&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>三、使用引用</p>
<p>传入call_user_func()的参数不能为引用传递</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="comment">// 使用引用</span></span><br><span class="line"><span class="number">2</span> <span class="function"><span class="keyword">function</span> <span class="title">incr</span>(<span class="params">&amp;<span class="variable">$b</span></span>) </span>&#123;</span><br><span class="line"><span class="number">3</span>     <span class="variable">$b</span>++;</span><br><span class="line"><span class="number">4</span> &#125;</span><br><span class="line"><span class="number">5</span>  </span><br><span class="line"><span class="number">6</span> <span class="variable">$c</span> = <span class="number">0</span>;</span><br><span class="line"><span class="number">7</span> call_user_func_array(<span class="string">&#x27;incr&#x27;</span>, <span class="keyword">array</span>(&amp;<span class="variable">$c</span>));</span><br><span class="line"><span class="number">8</span> <span class="keyword">echo</span> <span class="variable">$c</span>; <span class="comment">//显示 1</span></span><br></pre></td></tr></table></figure>

<p><a href="https://www.php.net/manual/zh/function.call-user-func.php">https://www.php.net/manual/zh/function.call-user-func.php</a></p>
<p>call_user_func ( <a href="https://www.php.net/manual/zh/language.types.callable.php">callable</a> <code>$callback</code> [, <a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed">mixed</a> <code>$parameter</code> [, <a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed">mixed</a> <code>$...</code> ]] ) : <a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed">mixed</a></p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>PHP DOM对象操作xml文件</title>
    <url>/php/2e4f7228/</url>
    <content><![CDATA[<blockquote>
<h2 id="创建xml并写入节点"><a href="#创建xml并写入节点" class="headerlink" title="创建xml并写入节点"></a>创建xml并写入节点</h2></blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建xml并写入节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">createAndWrite</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 1. 因为是创建，所以声明头部</span></span><br><span class="line">    <span class="variable">$dom</span> = <span class="keyword">new</span> \DOMDocument(<span class="string">&#x27;1.0&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">    <span class="variable">$dom</span>-&gt;formatOutput = <span class="literal">true</span>; <span class="comment">// 格式化</span></span><br><span class="line">    <span class="comment">// 2. 创建根节点</span></span><br><span class="line">    <span class="variable">$node</span> = <span class="variable">$dom</span>-&gt;createElement(<span class="string">&#x27;urlset&#x27;</span>);</span><br><span class="line">    <span class="variable">$dom</span>-&gt;appendChild(<span class="variable">$node</span>);</span><br><span class="line">    <span class="comment">// 3. 创建子节点</span></span><br><span class="line">    <span class="variable">$line</span> = <span class="variable">$dom</span>-&gt;createElement(<span class="string">&#x27;line&#x27;</span>);</span><br><span class="line">    <span class="variable">$node</span>-&gt;appendChild(<span class="variable">$line</span>);</span><br><span class="line">        <span class="comment">// 3.2 创建文本节点</span></span><br><span class="line">    <span class="variable">$msg</span> = <span class="variable">$dom</span>-&gt;createTextNode(<span class="string">&#x27;http://www.baidu.com&#x27;</span>);</span><br><span class="line">    <span class="variable">$line</span>-&gt;appendChild(<span class="variable">$msg</span>);</span><br><span class="line">        <span class="comment">// 3.3 创建标签属性</span></span><br><span class="line">    <span class="variable">$attr</span> = <span class="variable">$dom</span>-&gt;createAttribute(<span class="string">&#x27;alt&#x27;</span>);</span><br><span class="line">    <span class="variable">$attr</span>-&gt;value = <span class="string">&#x27;url&#x27;</span>;</span><br><span class="line">    <span class="variable">$line</span>-&gt;appendChild(<span class="variable">$attr</span>);</span><br><span class="line">    <span class="comment">// 4. 保存文档</span></span><br><span class="line"><span class="comment">//        $str = $dom-&gt;saveXML();</span></span><br><span class="line"><span class="comment">//        file_put_contents($this-&gt;file, $str);</span></span><br><span class="line">        <span class="comment">// 或</span></span><br><span class="line">    <span class="variable">$dom</span>-&gt;save(<span class="keyword">$this</span>-&gt;file);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<h2 id="获取xml文档节点信息"><a href="#获取xml文档节点信息" class="headerlink" title="获取xml文档节点信息"></a>获取xml文档节点信息</h2></blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取xml文档节点信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">read</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 因为是获取，所以不用初始化头部</span></span><br><span class="line">        <span class="variable">$dom</span> = <span class="keyword">new</span> \DOMDocument();</span><br><span class="line">        <span class="comment">// 2. 加载xml文件</span></span><br><span class="line">        <span class="variable">$dom</span>-&gt;load(<span class="keyword">$this</span>-&gt;file); <span class="comment">// 引入成功返回true，返回false也有可能是xml文档有问题</span></span><br><span class="line">        <span class="comment">// 3. 以标签名获取节点列表</span></span><br><span class="line">        <span class="variable">$lines</span> = <span class="variable">$dom</span>-&gt;getElementsByTagName(<span class="string">&#x27;line&#x27;</span>); <span class="comment">// 返回一个DOMNodeList对象</span></span><br><span class="line"><span class="comment">//        $lines-&gt;length; // 获取对象长度</span></span><br><span class="line">        <span class="variable">$first</span> = <span class="variable">$lines</span>-&gt;item(<span class="number">0</span>); <span class="comment">// 获取第一条，从0开始</span></span><br><span class="line"><span class="comment">//        $first-&gt;nodeValue; // 获取标签文本内容，包括子标签</span></span><br><span class="line"><span class="comment">//        $first-&gt;getAttribute(&#x27;alt&#x27;); // 获取属性值</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<h2 id="向节点下添加新节点"><a href="#向节点下添加新节点" class="headerlink" title="向节点下添加新节点"></a>向节点下添加新节点</h2></blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根节点中添加数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">appendXml</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$dom</span> = <span class="keyword">new</span> \DOMDocument();</span><br><span class="line">        <span class="variable">$dom</span>-&gt;preserveWhiteSpace = <span class="literal">false</span>; <span class="comment">// 改值默认为true，如果开启，formatOutput将不起作用</span></span><br><span class="line">        <span class="variable">$dom</span>-&gt;formatOutput = <span class="literal">true</span>; <span class="comment">// 格式化</span></span><br><span class="line">        <span class="variable">$dom</span>-&gt;load(<span class="keyword">$this</span>-&gt;file);</span><br><span class="line">        <span class="comment">// 获取根节点</span></span><br><span class="line">        <span class="variable">$lines</span> = <span class="variable">$dom</span>-&gt;getElementsByTagName(<span class="string">&#x27;urlset&#x27;</span>);</span><br><span class="line">        <span class="variable">$node</span> = <span class="variable">$lines</span>-&gt;item(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建url节点</span></span><br><span class="line">        <span class="variable">$line</span> = <span class="variable">$dom</span>-&gt;createElement(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line">        <span class="variable">$node</span>-&gt;appendChild(<span class="variable">$line</span>);</span><br><span class="line">        <span class="comment">// 创建url子节点loc</span></span><br><span class="line">        <span class="variable">$loc</span> = <span class="variable">$dom</span>-&gt;createElement(<span class="string">&#x27;loc&#x27;</span>);</span><br><span class="line">        <span class="variable">$line</span>-&gt;appendChild(<span class="variable">$loc</span>);</span><br><span class="line">        <span class="variable">$locCont</span> = <span class="variable">$dom</span>-&gt;createTextNode(<span class="string">&#x27;https://wap.hxsd.tv/&#x27;</span>);</span><br><span class="line">        <span class="variable">$loc</span>-&gt;appendChild(<span class="variable">$locCont</span>);</span><br><span class="line">        <span class="comment">// 创建url子节点lastmod</span></span><br><span class="line">        <span class="variable">$lastmod</span> = <span class="variable">$dom</span>-&gt;createElement(<span class="string">&#x27;lastmod&#x27;</span>);</span><br><span class="line">        <span class="variable">$line</span>-&gt;appendChild(<span class="variable">$lastmod</span>);</span><br><span class="line">        <span class="variable">$lastmodCont</span> = <span class="variable">$dom</span>-&gt;createTextNode(<span class="string">&#x27;https://wap.hxsd.tv/&#x27;</span>);</span><br><span class="line">        <span class="variable">$lastmod</span>-&gt;appendChild(<span class="variable">$lastmodCont</span>);</span><br><span class="line"></span><br><span class="line">        <span class="variable">$dom</span>-&gt;save(<span class="keyword">$this</span>-&gt;file);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>PHP session_start() Cannot start session when headers already sent in</title>
    <url>/php/e97971d0/</url>
    <content><![CDATA[<blockquote>
<p>方法一</p>
</blockquote>
<p>大多数帖子的解决方法是</p>
<p>将php.ini中的session.auto_start改为1，重启nginx</p>
<p>在日常开发中，php.ini配置session.auto_start=0；是默认关闭会话，如果想开启会话需要调用session_start();<br>而session.auto_start 开启就自动完成了session_start();<br>当session.auto_start = 1 时，执行 session_start() 将产生新的 session_id<br>其优点在于，任何时候都不会因忘记执行 session_start() 或 session_start() 在程序里的位置不对，而导致错误;<br>缺点在于，如果你使用的是第三方代码，则必须删去其中的全部 session_start() 。否则将不能得到正确的结果。</p>
<p>上段摘自 <a href="https://www.jianshu.com/p/1126c6b5edd0">PHP session_start(): Cannot start session when headers already sent in 出错 - 简书 (jianshu.com)</a></p>
<blockquote>
<p>方法二</p>
</blockquote>
<p>代码中找到</p>
<p>session_start()</p>
<p>将其改为</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if (!headers_sent() &amp;&amp; session_id() == &#x27;&#x27;) session_start();</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>tp5一对多，a表hasmany b表，b表hasmany c表</title>
    <url>/php/39f83996/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 // 在a model定义b model关联</span><br><span class="line"> 2 public function hasManyB()</span><br><span class="line"> 3 &#123;</span><br><span class="line"> 4     return $this-&gt;hasMany(&#x27;关联模型b的模型名&#x27;);</span><br><span class="line"> 5 &#125;</span><br><span class="line"> 6 // 在b model定义c model关联</span><br><span class="line"> 7 public function hasManyC()</span><br><span class="line"> 8 &#123;</span><br><span class="line"> 9 return $this-&gt;hasMany(&#x27;关联模型c的模型名&#x27;);</span><br><span class="line">10 &#125;</span><br><span class="line">11 // 在a model中执行查询</span><br><span class="line">12 $result = $this-&gt;with([&#x27;hasManyB&#x27; =&gt; [&#x27;hasManyC&#x27;]])-&gt;where($where)-&gt;order($order)-&gt;select();</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>thinkphp5</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP 删除文件最后一行</title>
    <url>/php/9f33eb43/</url>
    <content><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$a</span> = file(‘文件名’);</span><br><span class="line">file_put_contents(‘文件名’, join(<span class="string">&#x27;&#x27;</span>, array_slice(<span class="variable">$a</span>, <span class="number">0</span>, -<span class="number">1</span>)));</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>内聚类型 与 耦合类型（举例说明）</title>
    <url>/php/2b2b8195/</url>
    <content><![CDATA[<h4 id="理解内聚与耦合"><a href="#理解内聚与耦合" class="headerlink" title="理解内聚与耦合"></a>理解内聚与耦合</h4><p><a href="https://www.cnblogs.com/jiuhefree/articles/13725621.html">https://www.cnblogs.com/jiuhefree/articles/13725621.html</a></p>
<h4 id="内聚类型：（低-–-gt-高）"><a href="#内聚类型：（低-–-gt-高）" class="headerlink" title="内聚类型：（低 –&gt; 高）"></a>内聚类型：（低 –&gt; 高）</h4><p>1、偶然内聚</p>
<p>  模块的各成分之间没有关联，只是把分散的功能合并在一起。</p>
<p>  例：A模块中有三条语句（一条赋值，一条求和，一条传参），表面上看不出任何联系，但是B、C模块中都用到了这三条语句，于是将这三条语句合并成了模块A。模块A中就是偶然内聚。</p>
<p>2、逻辑内聚</p>
<p>  逻辑上相关的功能被放在同一模块中。</p>
<p>  例：A模块实现的是将对应的人员信息发送给技术部，人事部和财政部，决定发送给哪个部门是输入的控制标志决定的。模块A中就是逻辑内聚。</p>
<p>3、时间内聚</p>
<p>  模块完成的功能必须在同一时间内执行，但这些功能只是因为时间因素才有关联。</p>
<p>  例：编程开始时，程序员把对所有全局变量的初始化操作放在模块A中。模块A中就是时间内聚。</p>
<p>4、过程内聚</p>
<p>  模块内部的处理成分是相关的，而且这些处理必须以特定的次序进行执行。</p>
<p>  例：用户登陆了某某网站，A模块负责依次读取用户的用户名、邮箱和联系方式，这个次序是事先规定的，不能改变。模块A中就是过程内聚。</p>
<p>5、通信内聚</p>
<p>  模块的所有成分都操作同一数据集或生成同一数据集。</p>
<p>  例：模块A实现将传入的Date类型数据转换成String类型，以及将Date类型数据插入数据库，这两个操作都是对“Date类型数据”而言的。模块A中就是通信内聚。</p>
<p>6、顺序内聚</p>
<p>  模块的各个成分和同一个功能密切相关，而且一个成分的输出作为另一个成分的输入。</p>
<p>  例：模块A实现将传入的Date类型数据转换成String类型，然后再将转换好的String类型数据插入数据库。模块A中就是顺序内聚。</p>
<p>7、功能内聚</p>
<p>  模块的所有成分对于完成单一的功能都是必须的。</p>
<p>  例：模块A实现将新注册的用户信息（用户名，密码，个性签名）全部转换成String类型并插入数据库。模块A中就是功能内聚。</p>
<h4 id="三、耦合类型：（高-–-gt-低）"><a href="#三、耦合类型：（高-–-gt-低）" class="headerlink" title="三、耦合类型：（高 –&gt; 低）"></a>三、耦合类型：（高 –&gt; 低）</h4><p>1、内容耦合</p>
<p>  一个模块直接修改或操作另一个模块的数据,或者直接转入另一个模块。</p>
<p>  例：模块A中定义了变量a，在模块B中直接使用了。这种情况下模块A和模块B就是内容耦合。</p>
<p>2、公共耦合</p>
<p>  两个以上的模块共同引用一个全局数据项。</p>
<p>  例：定义了一个全局变量a，在A、B、C模块中均调用了a，这种情况下模块A、模块B、模块C就是公共耦合。</p>
<p>3、控制耦合</p>
<p>  一个模块在界面上传递一个信号控制另一个模块，接收信号的模块的动作根据信号值进行调整。</p>
<p>  例：模块A获取用户类型（普通用户、高级用户）传递给模块B，模块B根据不同类型的用户提供不同的服务。这种情况下模块A和模块B就是控制耦合。</p>
<p>4、标记耦合</p>
<p>  模块间通过参数传递复杂的内部数据结构。</p>
<p>  例：模块A向模块B传递Object类型的数据。这种情况下模块A和模块B就是标记耦合。</p>
<p>5、数据耦合</p>
<p>  模块间通过参数传递基本类型的数据。</p>
<p>  例：模块A实现两个数的加法操作，模块B实现两个加数的初始化，模块B将两个加数传给模块A，模块A进行相加。这种情况下模块A和模块B就是数据耦合。</p>
<p>6、非直接耦合</p>
<p>  模块间没有信息传递。</p>
<p>  例：模块A实现输出字符串，模块B实现接收int数据，两者之间没有信息传递。这种情况下模块A和模块B就是非直接耦合。</p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>PHP MySQL 存储层级结构的两种方式 邻接表和MPTT</title>
    <url>/php/9f25a75e/</url>
    <content><![CDATA[<p>层级结构，也叫树形结构。在关系型数据库中保存树状结构数据，常用的方法有两种：</p>
<ul>
<li>邻接表（Adjacency List）</li>
<li>修改过的前序遍历算法（MPTT）</li>
</ul>
<p>要存储的树状结构数据图如下</p>
<p>表名：Food</p>
<p><img src="../../images/%E5%AD%98%E5%82%A8%E5%B1%82%E7%BA%A7%E7%BB%93%E6%9E%84/2020519-20200907161948118-1433800629.png" alt="img"></p>
<h4 id="邻接表"><a href="#邻接表" class="headerlink" title="邻接表"></a><strong>邻接表</strong></h4><p><img src="../../images/%E5%AD%98%E5%82%A8%E5%B1%82%E7%BA%A7%E7%BB%93%E6%9E%84/2020519-20200907162553553-1389987265.png" alt="img"></p>
<p>邻接表依赖于pid字段连接上下级。id为自增主键，pid为上一节点的id，例如：Apple的上一节点是Red，所以 Apple pid = Red id</p>
<h5 id="打印树结构"><a href="#打印树结构" class="headerlink" title="打印树结构"></a>打印树结构</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 class Tree</span><br><span class="line"> 2 &#123;</span><br><span class="line"> 3     private $treeM; // pdo实例</span><br><span class="line"> 4     private $tname; // 表名称</span><br><span class="line"> 5     private $stmt; // 结果集</span><br><span class="line"> 6     private $res; // 结果</span><br><span class="line"> 7     public function __construct(TreeM $treeM, $tname)</span><br><span class="line"> 8     &#123;</span><br><span class="line"> 9         $this-&gt;treeM = $treeM-&gt;getTreeM();</span><br><span class="line">10         $this-&gt;tname = $tname;</span><br><span class="line">11     &#125;</span><br><span class="line">12     /**</span><br><span class="line">13      * 打印树结构</span><br><span class="line">14      * @param &#123;Int&#125; $root_id 父节点id,为0则显示整个树结构</span><br><span class="line">15      * @param &#123;Int&#125; $level 当前节点所处的层级,用于缩进显示节点</span><br><span class="line">16      */</span><br><span class="line">17     public function show_tree($root_id = 0, $level)</span><br><span class="line">18     &#123;</span><br><span class="line">19         // 1. 获取父节点</span><br><span class="line">20         $this-&gt;stmt = $this-&gt;treeM-&gt;query(&quot;select id, title from &#123;$this-&gt;tname&#125; where pid=&#123;$root_id&#125;&quot;);</span><br><span class="line">21         $this-&gt;res = $this-&gt;stmt-&gt;fetchAll(2);</span><br><span class="line">22         foreach ($this-&gt;res as $row) &#123;</span><br><span class="line">23             // 2. 缩进显示</span><br><span class="line">24             echo &#x27;&lt;div style=&quot;margin-left:&#x27; . ($level * 32) . &#x27;px&quot;&gt;&#x27; . $row[&#x27;title&#x27;] . &#x27;&lt;/div&gt;&#x27;;</span><br><span class="line">25             // 3. 递归调用当前函数，显示再下一级的子节点</span><br><span class="line">26             $this-&gt;show_tree($row[&#x27;id&#x27;], $level + 1);</span><br><span class="line">27         &#125;</span><br><span class="line">28     &#125;</span><br><span class="line">29 &#125;</span><br></pre></td></tr></table></figure>

<p>效果图</p>
<p><img src="../../images/%E5%AD%98%E5%82%A8%E5%B1%82%E7%BA%A7%E7%BB%93%E6%9E%84/2020519-20200907165734324-222101891.png" alt="img"></p>
<h5 id="获取节点路径"><a href="#获取节点路径" class="headerlink" title="获取节点路径"></a>获取节点路径</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1     /**</span><br><span class="line"> 2      * 获取节点路径</span><br><span class="line"> 3      * @param &#123;Int&#125; 需要获取路径的当前节点的id</span><br><span class="line"> 4      */</span><br><span class="line"> 5     public function get_path($id)</span><br><span class="line"> 6     &#123;</span><br><span class="line"> 7         // 1. 获取当前节点 pid 和 title</span><br><span class="line"> 8         $this-&gt;stmt = $this-&gt;treeM-&gt;query(&quot;select title, pid from &#123;$this-&gt;tname&#125; where id=&#123;$id&#125;&quot;);</span><br><span class="line"> 9         $this-&gt;res = $this-&gt;stmt-&gt;fetch(2);</span><br><span class="line">10         // 此数组保存路径</span><br><span class="line">11         $path = [];</span><br><span class="line">12         $path[] = $this-&gt;res[&#x27;title&#x27;];</span><br><span class="line">13         // 如果父节点非 0，即非根节点，则进行递归调用获取父节点的路径</span><br><span class="line">14         if ($this-&gt;res[&#x27;pid&#x27;]) &#123;</span><br><span class="line">15             // 递归调用，获取父节点的路径，并且合并到当前路径数组的其它元素前边</span><br><span class="line">16             $path = array_merge($this-&gt;get_path($this-&gt;res[&#x27;pid&#x27;]), $path);</span><br><span class="line">17         &#125;</span><br><span class="line">18         return $path;</span><br><span class="line">19     &#125;</span><br></pre></td></tr></table></figure>

<p>效果图</p>
<p><img src="../../images/%E5%AD%98%E5%82%A8%E5%B1%82%E7%BA%A7%E7%BB%93%E6%9E%84/2020519-20200907171305742-690483127.png" alt="img"></p>
<h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><p>简单易懂，写入效率较高</p>
<h5 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h5><p>查询起来效率低下。我们对于每个结果，期望只需要一次查询；可是当使用邻接表模型时嵌套的递归使用了多次查询，当树很大的时候，这种慢就会表现得尤为明显。</p>
<h4 id="修改过的前序遍历算法"><a href="#修改过的前序遍历算法" class="headerlink" title="修改过的前序遍历算法"></a>修改过的前序遍历算法</h4><h5 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h5><p>把“树”横着放，如图所示，根节点 ‘Food’ 左侧标记 ‘1’，然后 ‘Fruit’ 左侧标记2，接着按前序遍历的顺序遍历完树，依次在每个节点的左右侧标记数字</p>
<p><img src="../../images/%E5%AD%98%E5%82%A8%E5%B1%82%E7%BA%A7%E7%BB%93%E6%9E%84/2020519-20200907173718398-142753577.png" alt="img"></p>
<p> 根据上图，改变数据表，增加 lft 和 rgt 两个字段用于存储左右数字（left和right是MySQL保留字，所以用简写）。</p>
<p><img src="../../images/%E5%AD%98%E5%82%A8%E5%B1%82%E7%BA%A7%E7%BB%93%E6%9E%84/2020519-20200907173916394-1026923981.png" alt="img"></p>
<h5 id="打印树结构-1"><a href="#打印树结构-1" class="headerlink" title="打印树结构"></a>打印树结构</h5><p>现在想要查看树结构只需一条SQL语句即可。比如，想要打印 ‘Fruit’ 的子树，可以查询左数大于2并且小于11的节点</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 select * from food where lft between 2 and 11;</span><br></pre></td></tr></table></figure>

<p>什么时候显示缩进？缩进多少单位？解决这个问题，需要使用堆栈，即后进先出（LIFO），每到一个节点，将其右边的数字压入堆栈中。我们知道，所有节点右边的值都比其父节点右边的值小，那么将当前节点右边的值和堆栈最上边的右边值进行比较，如果当前节点比堆栈最上边的值小，表示当前堆栈里边剩下的都是父节点了，这时可以显示缩进，堆栈的元素数量即是缩进深度。PHP 代码实现如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1     /**</span><br><span class="line"> 2      * 打印树结构</span><br><span class="line"> 3      * @param &#123;Int&#125; $root_id 父节点id,为0则显示整个树结构</span><br><span class="line"> 4      */</span><br><span class="line"> 5     public function show_tree($root_id = 1)</span><br><span class="line"> 6     &#123;</span><br><span class="line"> 7         // 1. 查询根节点的 lft 和 rgt</span><br><span class="line"> 8         $this-&gt;stmt = $this-&gt;treeM-&gt;query(&quot;select lft, rgt from &#123;$this-&gt;tname&#125; where id = &#123;$root_id&#125;&quot;);</span><br><span class="line"> 9         $this-&gt;res = $this-&gt;stmt-&gt;fetch(2);</span><br><span class="line">10 </span><br><span class="line">11         // 堆栈, 存储节点右边的值, 用于显示缩进</span><br><span class="line">12         $stack = [];</span><br><span class="line">13         // 2. 获取 $root_id 节点的所有子孙节点</span><br><span class="line">14         $this-&gt;stmt = $this-&gt;treeM-&gt;query(&quot;select title, lft, rgt from &#123;$this-&gt;tname&#125; where lft between &#123;$this-&gt;res[&#x27;lft&#x27;]&#125; and &#123;$this-&gt;res[&#x27;rgt&#x27;]&#125; order by lft asc&quot;);</span><br><span class="line">15         $this-&gt;res = $this-&gt;stmt-&gt;fetchAll(2);</span><br><span class="line">16 </span><br><span class="line">17         // 3. 显示节点</span><br><span class="line">18         foreach ($this-&gt;res as $row) &#123;</span><br><span class="line">19             if (count($stack) &gt; 0) &#123; // 仅在堆栈非空的时候检测</span><br><span class="line">20                 // 如果当前节点右边的值比堆栈最上边的值大，则移除堆栈最上边的值，因为这个值对应的节点不是当前节点的父节点</span><br><span class="line">21                 while ($row[&#x27;rgt&#x27;] &gt; $stack[count($stack) - 1]) &#123;</span><br><span class="line">22                     array_pop($stack);</span><br><span class="line">23                 &#125; //while 循环结束之后，堆栈里边只剩下当前节点的父节点了</span><br><span class="line">24             &#125;</span><br><span class="line">25             echo &#x27;&lt;div style=&quot;margin-left:&#x27; . (count($stack) * 32) . &#x27;px&quot;&gt;&#x27; . $row[&#x27;title&#x27;] . &#x27;&lt;/div&gt;&#x27;;</span><br><span class="line">26             // 将当前的节点压入堆栈里边, 为循环后边的节点缩进做准备</span><br><span class="line">27             array_push($stack, $row[&#x27;rgt&#x27;]);</span><br><span class="line">28         &#125;</span><br><span class="line">29     &#125;</span><br></pre></td></tr></table></figure>

<h5 id="求节点的路径"><a href="#求节点的路径" class="headerlink" title="求节点的路径"></a>求节点的路径</h5><p>查看某节点的路径，只需求出左数值小于其左数值,并且右数值大于其右数值的所有节点。比如，要查询Apple的路径</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 select title from food where lft &lt; 8 and rgt &gt;9 order by lft asc;</span><br></pre></td></tr></table></figure>

<p>PHP方法实现如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1     /**</span><br><span class="line"> 2      * 打印路径根节点到某节点的路径</span><br><span class="line"> 3      * @param &#123;Int&#125; $node_id 需要获取路径的节点id</span><br><span class="line"> 4      */</span><br><span class="line"> 5     public function get_path($node_id)</span><br><span class="line"> 6     &#123;</span><br><span class="line"> 7         // 1. 获取当前节点的 lft 和 rgt</span><br><span class="line"> 8         $this-&gt;stmt = $this-&gt;treeM-&gt;query(&quot;select lft, rgt from &#123;$this-&gt;tname&#125; where id = &#123;$node_id&#125;&quot;);</span><br><span class="line"> 9         $this-&gt;res = $this-&gt;stmt-&gt;fetch(2);</span><br><span class="line">10         // 2. 获取路径中的所有节点</span><br><span class="line">11         $this-&gt;stmt = $this-&gt;treeM-&gt;query(&quot;select title from &#123;$this-&gt;tname&#125; where lft &lt;= &#123;$this-&gt;res[&#x27;lft&#x27;]&#125; and rgt &gt;= &#123;$this-&gt;res[&#x27;rgt&#x27;]&#125; order by lft asc&quot;);</span><br><span class="line">12         $this-&gt;res = $this-&gt;stmt-&gt;fetchAll(2);</span><br><span class="line">13         // 3. 返回结果数组</span><br><span class="line">14         $path = [];</span><br><span class="line">15         foreach ($this-&gt;res as $row) &#123;</span><br><span class="line">16             $path[] = $row[&#x27;title&#x27;];</span><br><span class="line">17         &#125;</span><br><span class="line">18         return $path;</span><br><span class="line">19     &#125;</span><br></pre></td></tr></table></figure>

<h5 id="插入节点"><a href="#插入节点" class="headerlink" title="插入节点"></a>插入节点</h5><p>插入新节点之前，首先要给这个节点腾出空位来。比如我们现在要在 ‘Apple’ 的右边新增 ‘Orange’节点，则腾位的 SQL 语句如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 update food set rgt=rgt+2 where rgt&gt;9;</span><br><span class="line">2 update food set lft=lft+2 where lft&gt;9;</span><br></pre></td></tr></table></figure>

<p>之后，插入新节点</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 insert into food value(null,&#x27;Orange&#x27;,10,11);</span><br></pre></td></tr></table></figure>

<p>代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1     /**</span><br><span class="line"> 2      * 插入一个新节点</span><br><span class="line"> 3      * @param &#123;String&#125; $title 节点名称</span><br><span class="line"> 4      * @param &#123;Int&#125; $pid 父节点id</span><br><span class="line"> 5      */</span><br><span class="line"> 6     public function add($title, $pid)</span><br><span class="line"> 7     &#123;</span><br><span class="line"> 8         // 1. 查询父节点的 rgt 值</span><br><span class="line"> 9         $this-&gt;stmt = $this-&gt;treeM-&gt;query(&quot;select rgt from &#123;$this-&gt;tname&#125; where id = &#123;$pid&#125;&quot;);</span><br><span class="line">10         $this-&gt;res = $this-&gt;stmt-&gt;fetch(2);</span><br><span class="line">11         // 2. 通过图看出规律, 父节点的子节点中 rgt值最大的为 父节点的rgt值 - 1, 所以</span><br><span class="line">12         $maxRgt = $this-&gt;res[&#x27;rgt&#x27;] - 1;</span><br><span class="line">13         // 3. 为新节点腾出空间</span><br><span class="line">14         $this-&gt;stmt = $this-&gt;treeM-&gt;exec(&quot;update &#123;$this-&gt;tname&#125; set rgt=rgt+2 where rgt&gt;&#123;$maxRgt&#125;&quot;);</span><br><span class="line">15         $this-&gt;stmt = $this-&gt;treeM-&gt;exec(&quot;update &#123;$this-&gt;tname&#125; set lft=lft+2 where lft&gt;&#123;$maxRgt&#125;&quot;);</span><br><span class="line">16         // 4. 添加新节点</span><br><span class="line">17         $lft = $maxRgt + 1;</span><br><span class="line">18         $rgt = $lft + 1;</span><br><span class="line">19         $this-&gt;stmt = $this-&gt;treeM-&gt;exec(&quot;insert into &#123;$this-&gt;tname&#125; value(null,&#x27;&#123;$title&#125;&#x27;,&#123;$lft&#125;,&#123;$rgt&#125;)&quot;);</span><br><span class="line">20         if ($this-&gt;stmt) &#123;</span><br><span class="line">21             return $this-&gt;treeM-&gt;lastInsertId();</span><br><span class="line">22         &#125;</span><br><span class="line">23     &#125;</span><br></pre></td></tr></table></figure>

<h5 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h5><p>树的构造，路径获取方面性能比邻接表好很多，这个算法牺牲了一些写的性能来换取读的性能，在WEB应用中，读数据库的比例远大于写数据库的比例，所以MPTT更受欢迎些，更加实用</p>
<h5 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h5><p>算法比较抽象，不易理解，增加节点时虽然只用了几条SQL语句，但可能会需要更新很多记录，从而造成阻塞</p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>PHP 导出数据到EXCEL时数字自动变为科学计数法的最简单解决方法</title>
    <url>/php/b7833455/</url>
    <content><![CDATA[<p>转自：<a href="https://blog.csdn.net/weixin_43674113/article/details/103601398">https://blog.csdn.net/weixin_43674113/article/details/103601398</a></p>
<p>用程序导出的csv文件，当字段中有比较长的数字字段存在时，在用excel软件查看csv文件时就会变成科学技术法的表现形式。<br>其实这个问题跟用什么语言导出csv文件没有关系。Excel显示数字时，如果数字大于12位，它会自动转化为科学计数法；如果数字大于15位，它不仅用于科学技术法表示，还会只保留高15位，其他位都变0。<br>解决方式：（只要把数字字段后面加上显示上看不见的字符即可，字符串结尾加上制表符”\t”）<br>注意一定是”\t”，不是’\t’.</p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>excel</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP 抖音小程序二维码生成</title>
    <url>/php/fa2f9fa8/</url>
    <content><![CDATA[<p>使用的是tp框架</p>
<p>转自 <a href="https://blog.csdn.net/qq_34050360/article/details/106722409">ThinkPHP5生成抖音小程序带参数二维码_菜鸟何时能翻身-CSDN博客_抖音小程序二维码生成</a></p>
<h2 id="获取accesstoken"><a href="#获取accesstoken" class="headerlink" title="获取accesstoken"></a>获取accesstoken</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 public function get_access_token()</span><br><span class="line">2 &#123;</span><br><span class="line">3     $appid = &#x27;tt301******3a416&#x27;; //配置appid</span><br><span class="line">4     $secret = &#x27;0421128******65529&#x27;; //配置secret</span><br><span class="line">5     $url = &quot;https://developer.toutiao.com/api/apps/token?grant_type=client_credential&amp;appid=&quot; . $appid . &quot;&amp;secret=&quot; . $secret;</span><br><span class="line">6     $result = https_request($url);</span><br><span class="line">7     $Result = json_decode($result, true);</span><br><span class="line">8     return $Result[&#x27;access_token&#x27;];</span><br><span class="line">9 &#125;</span><br></pre></td></tr></table></figure>



<h2 id="生成带参数二维码"><a href="#生成带参数二维码" class="headerlink" title="生成带参数二维码"></a>生成带参数二维码</h2><blockquote>
<p>存到服务器本地+路径存到用户指定字段用于二次分享的时候直接拿取对应带参数二维码</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 1 //获得抖音二维码</span><br><span class="line"> 2 public function dyshare()</span><br><span class="line"> 3 &#123;</span><br><span class="line"> 4 </span><br><span class="line"> 5     $spcode = request()-&gt;param(&#x27;spcode&#x27;, &#x27;&#x27;);</span><br><span class="line"> 6     $code = Db::name(&#x27;newuser&#x27;)-&gt;where(&#x27;spcode&#x27;, $spcode)-&gt;find();</span><br><span class="line"> 7     if (!$code) &#123;</span><br><span class="line"> 8         return json([&#x27;code&#x27; =&gt; 400, &#x27;message&#x27; =&gt; &#x27;用户不存在&#x27;, &#x27;data&#x27; =&gt; &#x27;&#x27;]);</span><br><span class="line"> 9     &#125;</span><br><span class="line">10     if ($code[&#x27;dyfxcode&#x27;] != &#x27;&#x27;) &#123;</span><br><span class="line">11         return json([&#x27;code&#x27; =&gt; 200, &#x27;message&#x27; =&gt; &#x27;获取成功&#x27;, &#x27;data&#x27; =&gt; request()-&gt;domain() . $code[&#x27;dyfxcode&#x27;]]);</span><br><span class="line">12     &#125;</span><br><span class="line">13 </span><br><span class="line">14     $qr_path = &quot;./uploads/&quot;;</span><br><span class="line">15     if (!file_exists($qr_path . &#x27;user/&#x27;)) &#123;</span><br><span class="line">16         mkdir($qr_path . &#x27;user/&#x27;, 0700, true); //判断保存目录是否存在，不存在自动生成文件目录</span><br><span class="line">17     &#125;</span><br><span class="line">18     $filename = &#x27;user/&#x27; . time() . &#x27;.png&#x27;;</span><br><span class="line">19     $file = $qr_path . $filename;</span><br><span class="line">20     $access_token = $this-&gt;get_access_token();</span><br><span class="line">21     $url = &#x27;https://developer.toutiao.com/api/apps/qrcode&#x27;;</span><br><span class="line">22 </span><br><span class="line">23     $qrcode = array(</span><br><span class="line">24         &#x27;access_token&#x27; =&gt; $access_token,</span><br><span class="line">25         &#x27;scene&#x27;         =&gt; $spcode, //二维码所带参数</span><br><span class="line">26         &#x27;appname&#x27;       =&gt; &#x27;douyin&#x27;,</span><br><span class="line">27         // &#x27;width&#x27;         =&gt; &#x27;430&#x27;,</span><br><span class="line">28         &#x27;path&#x27;          =&gt; urlencode(&quot;pages/index/index?spcode=&quot; . $spcode), //二维码跳转路径（要已发布小程序）</span><br><span class="line">29         // &#x27;platform&#x27;      =&gt; &#x27;miniapp&#x27;,</span><br><span class="line">30         // &quot;set_icon&quot; =&gt; true</span><br><span class="line">31     );</span><br><span class="line">32     $data = https_post($url, json_encode($qrcode)); //请求接口</span><br><span class="line">33     $filename = date(&#x27;YmdHis&#x27;) . rand(10000, 999999) . &#x27;.jpg&#x27;;</span><br><span class="line">34     $dir = ROOT_PATH . &#x27;public/uploads/douyin&#x27;;</span><br><span class="line">35     if (!is_dir($dir)) &#123;</span><br><span class="line">36         @mkdir($dir, 0777, true);</span><br><span class="line">37     &#125;</span><br><span class="line">38 </span><br><span class="line">39     $file = $dir . &#x27;/&#x27; . $filename;</span><br><span class="line">40     file_put_contents($file, $data);</span><br><span class="line">41 </span><br><span class="line">42     $retFile = &#x27;/uploads/douyin/&#x27; . $filename;</span><br><span class="line">43 </span><br><span class="line">44     Db::name(&#x27;newuser&#x27;)-&gt;where(&#x27;spcode&#x27;, $spcode)-&gt;update([&#x27;dyfxcode&#x27; =&gt; $retFile]);</span><br><span class="line">45 </span><br><span class="line">46     return json([&#x27;code&#x27; =&gt; 200, &#x27;message&#x27; =&gt; &#x27;获取成功&#x27;, &#x27;data&#x27; =&gt; request()-&gt;domain() . $retFile]);</span><br><span class="line">47 &#125;</span><br></pre></td></tr></table></figure>



<h2 id="直接返回图片"><a href="#直接返回图片" class="headerlink" title="直接返回图片"></a>直接返回图片</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="comment">//获得抖音二维码</span></span><br><span class="line"> <span class="number">2</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">dyshare</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"> 3 </span>&#123;</span><br><span class="line"> <span class="number">4</span>     <span class="variable">$spcode</span> = request()-&gt;param(<span class="string">&#x27;spcode&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"> <span class="number">5</span>     <span class="variable">$access_token</span> = <span class="keyword">$this</span>-&gt;get_access_token();</span><br><span class="line"> <span class="number">6</span>     <span class="variable">$url</span> = <span class="string">&#x27;https://developer.toutiao.com/api/apps/qrcode&#x27;</span>;</span><br><span class="line"> <span class="number">7</span>     <span class="variable">$qrcode</span> = <span class="keyword">array</span>(</span><br><span class="line"> <span class="number">8</span>         <span class="string">&#x27;access_token&#x27;</span> =&gt; <span class="variable">$access_token</span>,</span><br><span class="line"> <span class="number">9</span>         <span class="string">&#x27;scene&#x27;</span>         =&gt; <span class="variable">$spcode</span>, <span class="comment">//二维码所带参数</span></span><br><span class="line"><span class="number">10</span>         <span class="string">&#x27;appname&#x27;</span>       =&gt; <span class="string">&#x27;douyin&#x27;</span>,</span><br><span class="line"><span class="number">11</span>         <span class="comment">// &#x27;width&#x27;         =&gt; &#x27;430&#x27;,</span></span><br><span class="line"><span class="number">12</span>         <span class="string">&#x27;path&#x27;</span>          =&gt; urlencode(<span class="string">&quot;pages/index/index?spcode=&quot;</span> . <span class="variable">$spcode</span>), <span class="comment">//二维码跳转路径（要已发布小程序）</span></span><br><span class="line"><span class="number">13</span>         <span class="comment">// &#x27;platform&#x27;      =&gt; &#x27;miniapp&#x27;,</span></span><br><span class="line"><span class="number">14</span>         <span class="comment">// &quot;set_icon&quot; =&gt; true</span></span><br><span class="line"><span class="number">15</span>     );</span><br><span class="line"><span class="number">16</span>     <span class="variable">$data</span> = https_post(<span class="variable">$url</span>, json_encode(<span class="variable">$qrcode</span>)); <span class="comment">//请求接口</span></span><br><span class="line"><span class="number">17</span>     <span class="keyword">return</span> response(<span class="variable">$data</span>, <span class="number">200</span>, [<span class="string">&#x27;Content-Length&#x27;</span> =&gt; strlen(<span class="variable">$data</span>)])-&gt;contentType(<span class="string">&#x27;image/png&#x27;</span>);</span><br><span class="line"><span class="number">18</span> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h2><p>可以直接放在公共函数库application/common.php里面</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="comment">#curl请求</span></span><br><span class="line"> <span class="number">2</span> <span class="keyword">if</span> (!function_exists(<span class="string">&#x27;https_request&#x27;</span>)) &#123;</span><br><span class="line"> <span class="number">3</span>     <span class="function"><span class="keyword">function</span> <span class="title">https_request</span>(<span class="params"><span class="variable">$url</span>, <span class="variable">$data</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function"> 4     </span>&#123;</span><br><span class="line"> <span class="number">5</span>         <span class="keyword">if</span> (function_exists(<span class="string">&#x27;curl_init&#x27;</span>)) &#123;</span><br><span class="line"> <span class="number">6</span>             <span class="variable">$curl</span> = curl_init();</span><br><span class="line"> <span class="number">7</span>             curl_setopt(<span class="variable">$curl</span>, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0);</span><br><span class="line"> <span class="number">8</span>             curl_setopt(<span class="variable">$curl</span>, CURLOPT_URL, <span class="variable">$url</span>);</span><br><span class="line"> <span class="number">9</span>             curl_setopt(<span class="variable">$curl</span>, CURLOPT_SSL_VERIFYPEER, <span class="literal">FALSE</span>);</span><br><span class="line"><span class="number">10</span>             curl_setopt(<span class="variable">$curl</span>, CURLOPT_SSL_VERIFYHOST, <span class="literal">FALSE</span>);</span><br><span class="line"><span class="number">11</span>             curl_setopt(<span class="variable">$curl</span>, CURLOPT_SSLVERSION, CURL_SSLVERSION_TLSv1);</span><br><span class="line"><span class="number">12</span>             curl_setopt(<span class="variable">$curl</span>, CURLOPT_FOLLOWLOCATION, <span class="number">1</span>);</span><br><span class="line"><span class="number">13</span>             <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$data</span>)) &#123;</span><br><span class="line"><span class="number">14</span>                 curl_setopt(<span class="variable">$curl</span>, CURLOPT_POST, <span class="number">1</span>);</span><br><span class="line"><span class="number">15</span>                 curl_setopt(<span class="variable">$curl</span>, CURLOPT_POSTFIELDS, <span class="variable">$data</span>);</span><br><span class="line"><span class="number">16</span>             &#125;</span><br><span class="line"><span class="number">17</span>             curl_setopt(<span class="variable">$curl</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="number">18</span>             <span class="variable">$output</span> = curl_exec(<span class="variable">$curl</span>);</span><br><span class="line"><span class="number">19</span>             curl_close(<span class="variable">$curl</span>);</span><br><span class="line"><span class="number">20</span>             <span class="keyword">return</span> <span class="variable">$output</span>;</span><br><span class="line"><span class="number">21</span>         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="number">22</span>             <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="number">23</span>         &#125;</span><br><span class="line"><span class="number">24</span>     &#125;</span><br><span class="line"><span class="number">25</span> &#125;</span><br><span class="line"><span class="number">26</span> <span class="comment">#post请求</span></span><br><span class="line"><span class="number">27</span> <span class="keyword">if</span> (!function_exists(<span class="string">&#x27;https_post&#x27;</span>)) &#123;</span><br><span class="line"><span class="number">28</span>     <span class="function"><span class="keyword">function</span> <span class="title">https_post</span>(<span class="params"><span class="variable">$url</span>, <span class="variable">$data</span></span>)</span></span><br><span class="line"><span class="function">29     </span>&#123;</span><br><span class="line"><span class="number">30</span>         <span class="variable">$curl</span> = curl_init();</span><br><span class="line"><span class="number">31</span>         curl_setopt(<span class="variable">$curl</span>, CURLOPT_URL, <span class="variable">$url</span>);</span><br><span class="line"><span class="number">32</span>         curl_setopt(<span class="variable">$curl</span>, CURLOPT_SSL_VERIFYHOST, <span class="literal">false</span>);</span><br><span class="line"><span class="number">33</span>         curl_setopt(<span class="variable">$curl</span>, CURLOPT_SSL_VERIFYPEER, <span class="literal">false</span>);</span><br><span class="line"><span class="number">34</span>         curl_setopt(<span class="variable">$curl</span>, CURLOPT_POST, <span class="number">1</span>);</span><br><span class="line"><span class="number">35</span>         curl_setopt(<span class="variable">$curl</span>, CURLOPT_POSTFIELDS, <span class="variable">$data</span>);</span><br><span class="line"><span class="number">36</span>         curl_setopt(<span class="variable">$curl</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="number">37</span>         curl_setopt(<span class="variable">$curl</span>, CURLOPT_HTTPHEADER, <span class="keyword">array</span>(<span class="string">&#x27;Content-Type: application/json&#x27;</span>, <span class="string">&#x27;Content-Length: &#x27;</span> . strlen(<span class="variable">$data</span>)));</span><br><span class="line"><span class="number">38</span>         <span class="comment">// dump($curl);</span></span><br><span class="line"><span class="number">39</span>         <span class="variable">$result</span> = curl_exec(<span class="variable">$curl</span>);</span><br><span class="line"><span class="number">40</span>         <span class="keyword">if</span> (curl_errno(<span class="variable">$curl</span>)) &#123;</span><br><span class="line"><span class="number">41</span>             <span class="keyword">return</span> <span class="string">&#x27;Errno&#x27;</span> . curl_errno(<span class="variable">$curl</span>);</span><br><span class="line"><span class="number">42</span>         &#125;</span><br><span class="line"><span class="number">43</span>         curl_close(<span class="variable">$curl</span>);</span><br><span class="line"><span class="number">44</span>         <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line"><span class="number">45</span>     &#125;</span><br><span class="line"><span class="number">46</span> &#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>PHP 大转盘抽奖思路_按权重抽奖</title>
    <url>/php/5981c86d/</url>
    <content><![CDATA[<p>应该不难理解，比如概率数组[‘50’,’100’,’300’]</p>
<p>他们一共是 ‘450’ 份，’50’ 在它们当中占’50’份</p>
<p>将这个数组循环，抽取一个 1-450 的随机数，如果在 50的范围内，那么就选中了50</p>
<p>如果没有选中50，那么就把 ‘50’ 剔除出去，看数组 [‘100’,’300’]，再接着上面的方法去找</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="comment">// 按权重抽奖</span></span><br><span class="line"> <span class="number">2</span> <span class="function"><span class="keyword">function</span> <span class="title">get_rand</span>(<span class="params"><span class="variable">$proArr</span></span>)</span></span><br><span class="line"><span class="function"> 3 </span>&#123;</span><br><span class="line"> <span class="number">4</span>     <span class="variable">$result</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"> <span class="number">5</span> </span><br><span class="line"> <span class="number">6</span>     <span class="comment">// 概率数组的总概率精度</span></span><br><span class="line"> <span class="number">7</span>     <span class="variable">$proSum</span> = array_sum(<span class="variable">$proArr</span>);</span><br><span class="line"> <span class="number">8</span> </span><br><span class="line"> <span class="number">9</span>     <span class="comment">// 概率数组循环</span></span><br><span class="line"><span class="number">10</span>     <span class="keyword">foreach</span> (<span class="variable">$proArr</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$proCur</span>) &#123;</span><br><span class="line"><span class="number">11</span>         <span class="variable">$randNum</span> = mt_rand(<span class="number">1</span>, <span class="variable">$proSum</span>);  <span class="comment">// 返回随机整数</span></span><br><span class="line"><span class="number">12</span>         <span class="keyword">if</span> (<span class="variable">$randNum</span> &lt;= <span class="variable">$proCur</span>) &#123;</span><br><span class="line"><span class="number">13</span>             <span class="variable">$result</span> = <span class="variable">$key</span>;</span><br><span class="line"><span class="number">14</span>             <span class="keyword">break</span>;</span><br><span class="line"><span class="number">15</span>         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="number">16</span>             <span class="variable">$proSum</span> -= <span class="variable">$proCur</span>;</span><br><span class="line"><span class="number">17</span>         &#125;</span><br><span class="line"><span class="number">18</span>     &#125;</span><br><span class="line"><span class="number">19</span>     <span class="keyword">unset</span>(<span class="variable">$proArr</span>);</span><br><span class="line"><span class="number">20</span>     <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line"><span class="number">21</span> &#125;</span><br><span class="line"><span class="number">22</span> </span><br><span class="line"><span class="number">23</span> <span class="variable">$arr</span> = [</span><br><span class="line"><span class="number">24</span>     <span class="comment">// 奖项id =&gt; 奖项权重</span></span><br><span class="line"><span class="number">25</span>     <span class="string">&#x27;1&#x27;</span> =&gt; <span class="number">50</span>,</span><br><span class="line"><span class="number">26</span>     <span class="string">&#x27;2&#x27;</span> =&gt; <span class="number">100</span>,</span><br><span class="line"><span class="number">27</span>     <span class="string">&#x27;3&#x27;</span> =&gt; <span class="number">300</span></span><br><span class="line"><span class="number">28</span> ];</span><br><span class="line"><span class="number">29</span> </span><br><span class="line"><span class="number">30</span> <span class="variable">$randId</span> = get_rand(<span class="variable">$arr</span>); <span class="comment">// 返回，即为随机抽取的奖品ID</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>理解内聚与耦合</title>
    <url>/php/e6a67bb/</url>
    <content><![CDATA[<h4 id="先了解一下什么是模块？"><a href="#先了解一下什么是模块？" class="headerlink" title="先了解一下什么是模块？"></a>先了解一下什么是模块？</h4><p>模块就是从逻辑上将系统分解为更细微的部分，分而治之。</p>
<p>复杂问题因为复杂性的问题，比较难解决，但是可以将复杂问题拆解为若干简单问题，逐个击破地解决这些简单问题，最后实现解决复杂问题的效果。</p>
<p>模块的粒度划分可大可小，可以是函数，类或功能块等等。</p>
<p>耦合主要描述的是模块与模块之间的关系，内聚则主要描述的是单个模块的内部构成。</p>
<p>模块独立性指每个模块只完成系统要求的独立子功能，并且与其他模块的联系最少且接口简单，两个定性的度量标准――耦合性和内聚性。</p>
<h4 id="耦合"><a href="#耦合" class="headerlink" title="耦合"></a>耦合</h4><p>如果模块之间存在依赖，则可能会导致一个模块的改动影响了另外的模块的问题，甚至是相互影响。</p>
<p>两个模块之间的关系越紧密，耦合就越强，模块的独立性就会越差。</p>
<p>比如一个模块A直接操作了模块B中数据，则视为强耦合；若A只是通过数据与模块B交互，则视为弱耦合。</p>
<p>独立的模块便于扩展、维护和单元测试，如果模块之间重重依赖的话，就会极大降低开发效率。</p>
<h4 id="内聚"><a href="#内聚" class="headerlink" title="内聚"></a>内聚</h4><p>一个模块应当尽可能独立完成某个功能，模块内部的元素关联性越强，则内聚越高，模块单一性就越强。</p>
<p>如果有各种场景需要被引入到当前模块，代码的质量将变得非常脆弱，这种情况建议拆分为多个模块。</p>
<p>低内聚的模块代码，不管是维护、扩展还是重构都相当麻烦。因为要兼顾内部元素的关联性，如果不理清楚的话可能会难以下手。</p>
<p>高内聚的优点：可读性、复用性、可维护性和易变更性</p>
<h4 id="内聚类型-与-耦合类型（举例说明）"><a href="#内聚类型-与-耦合类型（举例说明）" class="headerlink" title="内聚类型 与 耦合类型（举例说明）"></a>内聚类型 与 耦合类型（举例说明）</h4><p><a href="https://www.cnblogs.com/jiuhefree/articles/13730537.html">https://www.cnblogs.com/jiuhefree/articles/13730537.html</a></p>
]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>PHP 类型声明和强类型声明</title>
    <url>/php/e8cc6196/</url>
    <content><![CDATA[<h4 id="一、类型声明-及-返回值类型声明"><a href="#一、类型声明-及-返回值类型声明" class="headerlink" title="一、类型声明 及 返回值类型声明"></a>一、类型声明 及 返回值类型声明</h4><table>
<thead>
<tr>
<th>类型声明</th>
<th>起始版本</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>array</td>
<td>5.1</td>
<td>数组，默认值可以是null或数组</td>
</tr>
<tr>
<td>int</td>
<td>7.0</td>
<td>整数值，默认值可以是null或整数</td>
</tr>
<tr>
<td>float</td>
<td>7.0</td>
<td>浮点数值（一个带小数点的数值）。即使开启了严格模式，也可以接受整数。默认值可以是null、浮点类型或整数</td>
</tr>
<tr>
<td>callable</td>
<td>5.4</td>
<td>可调用代码（如匿名函数），默认值可以是null</td>
</tr>
<tr>
<td>bool</td>
<td>7.0</td>
<td>布尔值，默认值可以是null或布尔值</td>
</tr>
<tr>
<td>string</td>
<td>5.0</td>
<td>字符数据，默认值可以是null或字符串</td>
</tr>
<tr>
<td>self</td>
<td>5.0</td>
<td>字符数据，指向自己的引用</td>
</tr>
<tr>
<td>[类类型]</td>
<td>5.0</td>
<td>类或接口的类型，默认值可以是null</td>
</tr>
<tr>
<td>void</td>
<td>7.1</td>
<td>只用于返回值类型声明，不可用于参数类型声明，否则报错强类型检查模式下定义返回类型为 void 的方法不能有返回值，即使返回 null 也不行；或者使用一个空的 return 语句</td>
</tr>
</tbody></table>
<p>使用：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class"> 2 </span>&#123;</span><br><span class="line"> <span class="number">3</span>     <span class="comment">/**</span></span><br><span class="line"><span class="comment"> 4      * 举个例子</span></span><br><span class="line"><span class="comment"> 5      * <span class="doctag">@param</span> &#123;Int&#125; $a 变量$a被声明为整数</span></span><br><span class="line"><span class="comment"> 6      * <span class="doctag">@param</span> &#123;Array&#125; $b 变量$b被声明为数组</span></span><br><span class="line"><span class="comment"> 7      * <span class="doctag">@return</span> &#123;Float&#125; 返回值被声明为浮点型</span></span><br><span class="line"><span class="comment"> 8      */</span></span><br><span class="line"> <span class="number">9</span>     <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$a</span>, <span class="keyword">array</span> <span class="variable">$b</span></span>): <span class="title">float</span></span></span><br><span class="line"><span class="function">10     </span>&#123;</span><br><span class="line"><span class="number">11</span>         <span class="keyword">return</span> <span class="variable">$a</span> . <span class="variable">$b</span>;</span><br><span class="line"><span class="number">12</span>     &#125;</span><br><span class="line"><span class="number">13</span> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="可空类型声明"><a href="#可空类型声明" class="headerlink" title="可空类型声明"></a>可空类型声明</h4><p>可空类型主要用于参数类型声明和函数返回值声明</p>
<p>形式分以下两种：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>): ?<span class="title">int</span>  </span>&#123;</span><br><span class="line"> <span class="number">2</span>     <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">//ok</span></span><br><span class="line"> <span class="number">3</span> &#125;</span><br><span class="line"> <span class="number">4</span>  </span><br><span class="line"> <span class="number">5</span> <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>): ?<span class="title">int</span>  </span>&#123;</span><br><span class="line"> <span class="number">6</span>     <span class="keyword">return</span> <span class="number">42</span>; <span class="comment">// ok</span></span><br><span class="line"> <span class="number">7</span> &#125;</span><br><span class="line"> <span class="number">8</span>  </span><br><span class="line"> <span class="number">9</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">?<span class="keyword">string</span> <span class="variable">$msg</span></span>) </span>&#123;</span><br><span class="line"><span class="number">10</span>     <span class="keyword">if</span> (<span class="variable">$msg</span>) &#123;</span><br><span class="line"><span class="number">11</span>         <span class="keyword">echo</span> <span class="variable">$msg</span>;</span><br><span class="line"><span class="number">12</span>     &#125;</span><br><span class="line"><span class="number">13</span> &#125;</span><br></pre></td></tr></table></figure>

<p>意思为：所指的就是通过 ? 的形式表明函数参数或者返回值的类型要么为指定类型，要么为 null。</p>
<p>此方法也可用于接口函数的定义：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="class"><span class="keyword">interface</span> <span class="title">A</span></span>&#123;</span><br><span class="line"><span class="number">2</span>     <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">?A <span class="variable">$f</span></span>)</span>;</span><br><span class="line"><span class="number">3</span> &#125;</span><br></pre></td></tr></table></figure>

<p>但有一个需要注意的地方：如果函数本身定义了参数类型并且没有默认值，即使是可空的，也不能省略，否则会触发错误。如下：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">?Bar <span class="variable">$bar</span></span>) </span>&#123;&#125;</span><br><span class="line"><span class="number">2</span>  </span><br><span class="line"><span class="number">3</span> a(<span class="keyword">new</span> Bar); <span class="comment">// 可行</span></span><br><span class="line"><span class="number">4</span> a(<span class="literal">null</span>); <span class="comment">// 可行</span></span><br><span class="line"><span class="number">5</span> a(); <span class="comment">// 不可行</span></span><br></pre></td></tr></table></figure>

<p>但是如果以上函数的参数定义为 ?Bar $bar = null 的形式，则第三种写法也是可行的。因为 = null 实际上相当于 ? 的超集，对于可空类型的参数，可以设定 null 为默认值。</p>
<p>类函数中对于返回类型的声明也不能被子类覆盖，否则会触发错误：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class"> 2 </span>&#123;</span><br><span class="line"> <span class="number">3</span>     <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line"> <span class="number">4</span>     &#125;</span><br><span class="line"> <span class="number">5</span> &#125;</span><br><span class="line"> <span class="number">6</span>  </span><br><span class="line"> <span class="number">7</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span></span><br><span class="line"><span class="class"> 8 </span>&#123;</span><br><span class="line"> <span class="number">9</span>     <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>): <span class="title">array</span> </span>&#123;</span><br><span class="line"><span class="number">10</span>      <span class="comment">// Fatal error: Declaration of Foobar::bar() must be compatible with Foo::bar(): void</span></span><br><span class="line"><span class="number">11</span>     &#125;</span><br><span class="line"><span class="number">12</span> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="强类型声明（严格校验模式）"><a href="#强类型声明（严格校验模式）" class="headerlink" title="强类型声明（严格校验模式）"></a>强类型声明（严格校验模式）</h4><ul>
<li>默认情况下，所有的PHP文件都处于弱类型校验模式，弱类型校验模式下如果参数不符合声明类型，将会按照php的规则进行转换。</li>
<li>通过指定strict_types的值（1或者0），1表示严格类型校验模式，作用于函数调用和返回语句；0表示弱类型校验模式。</li>
<li>declare(strict_types=1)必须是文件的第一个语句。如果这个语句出现在文件的其他地方，将会产生一个编译错误，块模式是被明确禁止的。</li>
<li>strict_types指令只影响指定使用的文件，不会影响被它包含（通过include等方式）进来的其他文件。该指令在运行时编译，不能修改。它的运作方式，是在opcode中设置一个标志位，让函数调用和返回类型检查符合类型约束。</li>
</ul>
<p>以下代码会被按照php的规则转换：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class"> 2 </span>&#123;</span><br><span class="line"> <span class="number">3</span>     <span class="comment">// 类型声明$a为布尔型</span></span><br><span class="line"> <span class="number">4</span>     <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"><span class="keyword">bool</span> <span class="variable">$a</span></span>)</span></span><br><span class="line"><span class="function"> 5     </span>&#123;</span><br><span class="line"> <span class="number">6</span>         var_dump(<span class="variable">$a</span>);</span><br><span class="line"> <span class="number">7</span>     &#125;</span><br><span class="line"> <span class="number">8</span> &#125;</span><br><span class="line"> <span class="number">9</span> <span class="comment">// 却传入字符型</span></span><br><span class="line"><span class="number">10</span> A::show(<span class="string">&#x27;flase&#x27;</span>); <span class="comment">// 结果为：boolean true</span></span><br></pre></td></tr></table></figure>

<p>但如果在文件第一行加上 declare(strict_types=1);</p>
<p>便会开启严格效验模式</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">declare</span>(strict_types=<span class="number">1</span>);</span><br><span class="line"><span class="number">3</span> <span class="comment">// ...</span></span><br><span class="line"><span class="number">4</span> A::show(<span class="string">&#x27;flase&#x27;</span>); <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>php</category>
      </categories>
  </entry>
  <entry>
    <title>PHP 导出数据到EXCEL 单元格内换行</title>
    <url>/php/7590ea24/</url>
    <content><![CDATA[<p>1、单元格内的字符串，换行用 “\r\n”，单引号我没试，用双引号吧</p>
<p>2、还有一个条件就是 </p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getStyle(<span class="string">&#x27;A4&#x27;</span>)-&gt;getAlignment()-&gt;setWrapText(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>excel</tag>
      </tags>
  </entry>
</search>
